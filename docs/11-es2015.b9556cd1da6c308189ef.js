(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"3OEI":function(t,c,e){"use strict";e.r(c),e.d(c,"ModuleModule",function(){return J});var n=e("3Pt+"),o=e("PCNd"),i=e("tyNb"),a=e("ZXMZ"),b=e("Z8VL"),r=e("o+DB"),l=e("9UZh"),d=e("82i/"),s=e("vmnB"),u=e("9QbX"),p=e("fXoL"),m=e("jhN1"),f=e("ZzPI"),T=e("6t9p");let U=(()=>{class t extends b.a{constructor(t,c,e,n,o){super(t,e,n),this.raceService=c,this.titleService=o}ngOnInit(){this.titleService.setTitle(`${u.a} - Modules`),this.races=this.raceService.getEntities(),this.moduleTypes=d.a.values(r.a),super.ngOnInit()}calculateMaxEfficiency(t){if(null!=t.product&&null!=t.product.production){const c=t.product.production.map(t=>null==t.effects?null:t.effects.find(t=>t.type==s.a.work)).filter(t=>null!=t).map(t=>t.product);if(c.length>0)return 100*(1+Math.max(...c))}return 100}calculateMaxEfficiencyDisplay(t){if(null!=t.product){if(null!=t.product.production){const c=t.product.production.map(t=>null==t.effects?null:t.effects.find(t=>t.type==s.a.work)).filter(t=>null!=t).map(t=>t.product);if(c.length>0)return 100*(1+Math.max(...c))+"%"}return"100%"}return"-"}}return t.\u0275fac=function(c){return new(c||t)(p.Pb(a.a),p.Pb(l.a),p.Pb(i.c),p.Pb(i.a),p.Pb(m.c))},t.\u0275cmp=p.Jb({type:t,selectors:[["ng-component"]],features:[p.zb],decls:20,vars:16,consts:function(){let t;return t=$localize`:@@stationModules␟9695e47d610a7e6f28a474cd653a904137fac588␟3051929082094770473: Station Modules `,[[1,"row","content-row"],[1,"col-md-12"],[1,"card","shadow"],[1,"card-header","shadow-sm"],t,[1,"card-body"],["keyExpr","id",3,"dataSource","allowColumnReordering","allowColumnResizing","showBorders","hoverStateEnabled","onCellClick"],[3,"showPageSizeSelector","showNavigationButtons"],["mode","multiple"],[3,"applyFilter","visible"],[3,"visible"],["dataField","name","caption","Name"],["dataField","type","caption","Type"],[3,"dataSource"],["dataField","makerRace.id","caption","Race"],["valueExpr","id","displayExpr","name",3,"dataSource"],["dataField","product.name","caption","Product"],["caption","Max Efficiency","name","maxEfficiency",3,"calculateDisplayValue","calculateSortValue","allowSorting","allowFiltering"],["column","name","summaryType","count"]]},template:function(t,c){1&t&&(p.Ub(0,"div",0),p.Ub(1,"div",1),p.Ub(2,"div",2),p.Ub(3,"div",3),p.Yb(4,4),p.Tb(),p.Ub(5,"div",5),p.Ub(6,"dx-data-grid",6),p.hc("onCellClick",function(t){return c.onRowSelect(t)}),p.Qb(7,"dxo-pager",7),p.Qb(8,"dxo-sorting",8),p.Qb(9,"dxo-filter-row",9),p.Qb(10,"dxo-filter-panel",10),p.Qb(11,"dxi-column",11),p.Ub(12,"dxi-column",12),p.Qb(13,"dxo-lookup",13),p.Tb(),p.Ub(14,"dxi-column",14),p.Qb(15,"dxo-lookup",15),p.Tb(),p.Qb(16,"dxi-column",16),p.Qb(17,"dxi-column",17),p.Ub(18,"dxo-summary"),p.Qb(19,"dxi-total-item",18),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Tb()),2&t&&(p.Cb(6),p.pc("dataSource",c.entities)("allowColumnReordering",!0)("allowColumnResizing",!0)("showBorders",!0)("hoverStateEnabled",!0),p.Cb(1),p.pc("showPageSizeSelector",!0)("showNavigationButtons",!0),p.Cb(2),p.pc("applyFilter",c.currentFilter)("visible",!0),p.Cb(1),p.pc("visible",!0),p.Cb(3),p.pc("dataSource",c.moduleTypes),p.Cb(2),p.pc("dataSource",c.races),p.Cb(2),p.pc("calculateDisplayValue",c.calculateMaxEfficiencyDisplay)("calculateSortValue",c.calculateMaxEfficiency)("allowSorting",!0)("allowFiltering",!0))},directives:[f.a,T.Y,T.jb,T.E,T.C,T.b,T.S,T.mb,T.l],encapsulation:2}),t})();var g=e("Lswn"),y=e("6mEA"),C=e("ofXK");function w(t,c){if(1&t&&(p.Ub(0,"div",18),p.Ub(1,"label",19),p.Ec(2),p.Tb(),p.Tb()),2&t){const t=p.jc(3);p.Cb(2),p.Fc(t.entity.description)}}const E=function(t){return["/races",t]};function h(t,c){if(1&t&&(p.Ub(0,"span"),p.Ub(1,"a",20),p.Ec(2),p.Tb(),p.Tb()),2&t){const t=p.jc(3);p.Cb(1),p.pc("routerLink",p.sc(2,E,t.entity.makerRace.id)),p.Cb(1),p.Fc(t.entity.makerRace.name)}}function v(t,c){1&t&&(p.Ub(0,"span"),p.Ec(1," - "),p.Tb())}function F(t,c){if(1&t&&(p.Ub(0,"span"),p.Ec(1),p.Tb()),2&t){const t=p.jc(3);p.Cb(1),p.Fc(t.entity.type)}}function x(t,c){1&t&&(p.Ub(0,"span"),p.Ec(1," - "),p.Tb())}const S=function(t){return["/wares/",t]};function k(t,c){if(1&t&&(p.Ub(0,"span"),p.Ub(1,"a",20),p.Ec(2),p.Tb(),p.Tb()),2&t){const t=p.jc(3);p.Cb(1),p.pc("routerLink",p.sc(2,S,t.entity.product.id)),p.Cb(1),p.Fc(t.entity.product.name)}}function I(t,c){1&t&&(p.Ub(0,"span"),p.Ec(1," - "),p.Tb())}function M(t,c){if(1&t&&(p.Sb(0),p.Ub(1,"dt",11),p.Ec(2),p.Tb(),p.Ub(3,"dd",12),p.Ec(4),p.kc(5,"number"),p.Tb(),p.Rb()),2&t){const t=p.jc(3);p.Cb(2),p.Gc("Storage Capacity (",null==t.entity.cargo.type?null:t.entity.cargo.type.name,")"),p.Cb(2),p.Fc(p.lc(5,2,t.entity.cargo.max))}}function P(t,c){if(1&t&&(p.Ub(0,"span"),p.Ec(1),p.kc(2,"number"),p.Tb()),2&t){const t=p.jc(3);p.Cb(1),p.Fc(p.lc(2,1,t.entity.explosionDamage))}}function j(t,c){1&t&&(p.Ub(0,"span"),p.Ec(1," - "),p.Tb())}function R(t,c){if(1&t&&(p.Sb(0),p.Ub(1,"dt",11),p.Ec(2,"Workforce Needed"),p.Tb(),p.Ub(3,"dd",12),p.Ec(4),p.Tb(),p.Rb()),2&t){const t=p.jc(3);p.Cb(4),p.Fc(t.entity.workForce.max)}}function z(t,c){if(1&t&&(p.Sb(0),p.Ub(1,"dt",11),p.Ec(2,"Workforce Capacity"),p.Tb(),p.Ub(3,"dd",12),p.Ec(4),p.Tb(),p.Rb()),2&t){const t=p.jc(3);p.Cb(4),p.Fc(t.entity.workForce.capacity)}}const O=function(t){return["/factions/",t]};function Q(t,c){if(1&t&&(p.Ub(0,"li"),p.Ub(1,"a",20),p.Ec(2),p.Tb(),p.Tb()),2&t){const t=c.$implicit;p.Cb(1),p.pc("routerLink",p.sc(2,O,t.id)),p.Cb(1),p.Fc(t.name)}}function $(t,c){if(1&t&&(p.Ub(0,"tr"),p.Ub(1,"td"),p.Ec(2),p.Ub(3,"a",20),p.Ec(4),p.Tb(),p.Tb(),p.Ub(5,"td",30),p.Ec(6),p.kc(7,"number"),p.Tb(),p.Ub(8,"td",30),p.Ec(9),p.kc(10,"number"),p.Tb(),p.Ub(11,"td",30),p.Ec(12),p.kc(13,"number"),p.Tb(),p.Tb()),2&t){const t=c.$implicit;p.Cb(2),p.Gc(" ",t.amount," x "),p.Cb(1),p.pc("routerLink",p.sc(12,S,t.ware.id)),p.Cb(1),p.Fc(t.ware.name),p.Cb(2),p.Fc(p.lc(7,6,t.amount*t.ware.price.min)),p.Cb(3),p.Fc(p.lc(10,8,t.amount*t.ware.price.max)),p.Cb(3),p.Fc(p.lc(13,10,t.amount*t.ware.price.avg))}}function L(t,c){if(1&t&&(p.Ub(0,"div",9),p.Ub(1,"div",28),p.Ub(2,"h6"),p.Ec(3,"Requirements"),p.Tb(),p.Ub(4,"table",29),p.Ub(5,"thead"),p.Ub(6,"tr"),p.Ub(7,"th"),p.Ec(8,"Resource"),p.Tb(),p.Ub(9,"th",30),p.Ec(10,"Min"),p.Tb(),p.Ub(11,"th",30),p.Ec(12,"Max"),p.Tb(),p.Ub(13,"th",30),p.Ec(14,"Avg"),p.Tb(),p.Tb(),p.Tb(),p.Ub(15,"tbody"),p.Cc(16,$,14,14,"tr",15),p.Tb(),p.Ub(17,"tfoot"),p.Ub(18,"tr"),p.Ub(19,"th",30),p.Ec(20,"Total"),p.Tb(),p.Ub(21,"th",30),p.Ec(22),p.kc(23,"number"),p.Tb(),p.Ub(24,"th",30),p.Ec(25),p.kc(26,"number"),p.Tb(),p.Ub(27,"th",30),p.Ec(28),p.kc(29,"number"),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Tb()),2&t){const t=p.jc().$implicit,c=p.jc(4);p.Cb(16),p.pc("ngForOf",t.wares),p.Cb(6),p.Fc(p.lc(23,4,c.getTotalMin(t))),p.Cb(3),p.Fc(p.lc(26,6,c.getTotalMax(t))),p.Cb(3),p.Fc(p.lc(29,8,c.getTotalAvg(t)))}}function N(t,c){if(1&t&&(p.Ub(0,"div",23),p.Ub(1,"div",24),p.Ub(2,"div",25),p.Ec(3," Production: "),p.Ub(4,"em"),p.Ec(5),p.Tb(),p.Tb(),p.Ub(6,"div",26),p.Cc(7,L,30,10,"div",27),p.Ub(8,"div",9),p.Ub(9,"div",28),p.Ub(10,"h6"),p.Ec(11,"Production"),p.Tb(),p.Ub(12,"table",29),p.Ub(13,"tbody"),p.Ub(14,"tr"),p.Ub(15,"td"),p.Ec(16,"Time"),p.Tb(),p.Ub(17,"td",30),p.Ec(18),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Tb()),2&t){const t=c.$implicit,e=p.jc(4);p.Cb(5),p.Fc(t.name),p.Cb(2),p.pc("ngIf",t.wares.length),p.Cb(11),p.Fc(e.getProductionTime(t.time))}}function D(t,c){if(1&t&&(p.Ub(0,"div",21),p.Cc(1,N,19,3,"div",22),p.Tb()),2&t){const t=p.jc(3);p.Cb(1),p.pc("ngForOf",t.entityProduction)}}function B(t,c){if(1&t&&(p.Ub(0,"div",7),p.Cc(1,w,3,1,"div",8),p.Ub(2,"div",9),p.Ub(3,"div",10),p.Ub(4,"dl",9),p.Ub(5,"dt",11),p.Ec(6,"Race"),p.Tb(),p.Ub(7,"dd",12),p.Cc(8,h,3,4,"span",13),p.Cc(9,v,2,0,"span",13),p.Tb(),p.Ub(10,"dt",11),p.Ec(11,"Type"),p.Tb(),p.Ub(12,"dd",12),p.Cc(13,F,2,1,"span",13),p.Cc(14,x,2,0,"span",13),p.Tb(),p.Ub(15,"dt",11),p.Ec(16,"Product"),p.Tb(),p.Ub(17,"dd",12),p.Cc(18,k,3,4,"span",13),p.Cc(19,I,2,0,"span",13),p.Tb(),p.Cc(20,M,6,4,"ng-container",13),p.Ub(21,"dt",11),p.Ec(22,"Hull"),p.Tb(),p.Ub(23,"dd",12),p.Ec(24),p.kc(25,"number"),p.Tb(),p.Ub(26,"dt",11),p.Ec(27,"Explosion Damage"),p.Tb(),p.Ub(28,"dd",12),p.Cc(29,P,3,3,"span",13),p.Cc(30,j,2,0,"span",13),p.Tb(),p.Cc(31,R,5,1,"ng-container",13),p.Cc(32,z,5,1,"ng-container",13),p.Ub(33,"dt",11),p.Ec(34,"Owners"),p.Tb(),p.Ub(35,"dd",12),p.Ub(36,"ul",14),p.Cc(37,Q,3,4,"li",15),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Ub(38,"div",10),p.Ub(39,"div",16),p.Ub(40,"dl",9),p.Ub(41,"dt",11),p.Ec(42,"Turrets"),p.Tb(),p.Ub(43,"dd",12),p.Ec(44),p.Tb(),p.Ub(45,"dt",11),p.Ec(46,"Shields"),p.Tb(),p.Ub(47,"dd",12),p.Ec(48),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Tb(),p.Cc(49,D,2,1,"div",17),p.Tb()),2&t){const t=p.jc(2);p.Cb(1),p.pc("ngIf","No information available"!=t.entity.description),p.Cb(7),p.pc("ngIf",t.entity.makerRace),p.Cb(1),p.pc("ngIf",!t.entity.makerRace),p.Cb(4),p.pc("ngIf",t.entity.type),p.Cb(1),p.pc("ngIf",!t.entity.type),p.Cb(4),p.pc("ngIf",t.entity.product),p.Cb(1),p.pc("ngIf",!t.entity.product),p.Cb(1),p.pc("ngIf",t.entity.cargo),p.Cb(4),p.Fc(p.lc(25,17,t.entity.hull)),p.Cb(5),p.pc("ngIf",t.entity.explosionDamage),p.Cb(1),p.pc("ngIf",!t.entity.explosionDamage),p.Cb(1),p.pc("ngIf",null==t.entity.workForce?null:t.entity.workForce.max),p.Cb(1),p.pc("ngIf",null==t.entity.workForce?null:t.entity.workForce.capacity),p.Cb(5),p.pc("ngForOf",t.entity.owners),p.Cb(7),p.Fc(t.getSlotsStr(t.entity.turrets)),p.Cb(4),p.Fc(t.getSlotsStr(t.entity.shields)),p.Cb(1),p.pc("ngIf",t.entityProduction&&t.entityProduction.length)}}function V(t,c){if(1&t&&(p.Ub(0,"div",3),p.Ub(1,"div",4),p.Ub(2,"a",5),p.Ec(3,"Station Modules"),p.Tb(),p.Ec(4),p.Tb(),p.Cc(5,B,50,19,"div",6),p.Tb()),2&t){const t=p.jc();p.Cb(4),p.Gc(" - ",t.entity.name," "),p.Cb(1),p.pc("ngIf",t.entity)}}let Z=(()=>{class t extends y.a{constructor(t,c,e,n){super(c,e),this.wareService=t,this.titleService=n}ngOnInit(){this.titleService.setTitle(`${u.a} - Modules`),super.ngOnInit()}onEntityLoaded(t){this.titleService.setTitle(`${u.a} - Modules - ${this.entity.name}`),this.entityProduction=this.entity.production.map(t=>({amount:t.amount,effects:t.effects,method:t.method,name:t.name,time:t.time,wares:t.wares.map(t=>({ware:this.wareService.getEntity(t.ware),amount:t.amount}))}))}getTotalMin(t){let c=0;return t.wares.forEach(t=>{c+=t.amount*t.ware.price.min}),c}getTotalMax(t){let c=0;return t.wares.forEach(t=>{c+=t.amount*t.ware.price.max}),c}getTotalAvg(t){let c=0;return t.wares.forEach(t=>{c+=t.amount*t.ware.price.avg}),c}getProductionTime(t){const c=Math.trunc(t/60),e=t-60*c;let n="";return c>0&&(n+=c+(1===c?" minute":" minutes")),e>0&&(c>0&&(n+=" "),n+=e+(1===e?" second":" seconds")),n}getSlotsStr(t){const c=this.getSlots(t);return 0==c.length?"-":c.map(t=>`${t.capacity} x ${t.size}`).join(", ")}getSlots(t){if(!t)return[];const c=t.reduce((t,c)=>(t[c.size]=t[c.size]||0,t[c.size]+=c.capacity||1,t),{}),e=[];return Object.keys(c).forEach(t=>{e.push({size:t,capacity:c[t]})}),e}}return t.\u0275fac=function(c){return new(c||t)(p.Pb(g.a),p.Pb(a.a),p.Pb(i.a),p.Pb(m.c))},t.\u0275cmp=p.Jb({type:t,selectors:[["ng-component"]],features:[p.zb],decls:3,vars:1,consts:[[1,"row","content-row"],[1,"col-md-12"],["class","card shadow",4,"ngIf"],[1,"card","shadow"],[1,"card-header","shadow-sm"],["routerLink","/modules"],["class","card-body small",4,"ngIf"],[1,"card-body","small"],["class","form-group row",4,"ngIf"],[1,"row"],[1,"col-md-6","col-sm-12"],[1,"col-5"],[1,"col-7"],[4,"ngIf"],[1,"list-unstyled"],[4,"ngFor","ngForOf"],[1,"col-md-4","col-sm-12"],["class","row mt-2 mb-2",4,"ngIf"],[1,"form-group","row"],[1,"col","col-form-label","col-form-label-sm"],[3,"routerLink"],[1,"row","mt-2","mb-2"],["class","col-md-6 col-sm-6 col-lg-4",4,"ngFor","ngForOf"],[1,"col-md-6","col-sm-6","col-lg-4"],[1,"card","shadow-sm"],[1,"card-header"],[1,"card-body"],["class","row",4,"ngIf"],[1,"col"],[1,"table","table-sm"],[1,"text-right"]],template:function(t,c){1&t&&(p.Ub(0,"div",0),p.Ub(1,"div",1),p.Cc(2,V,6,2,"div",2),p.Tb(),p.Tb()),2&t&&(p.Cb(2),p.pc("ngIf",c.entity))},directives:[C.l,i.e,C.k],pipes:[C.d],encapsulation:2}),t})(),A=(()=>{class t{}return t.\u0275fac=function(c){return new(c||t)},t.\u0275mod=p.Nb({type:t}),t.\u0275inj=p.Mb({imports:[[i.f.forChild([{path:"",component:U},{path:":id",component:Z}])],i.f]}),t})(),J=(()=>{class t{}return t.\u0275fac=function(c){return new(c||t)},t.\u0275mod=p.Nb({type:t}),t.\u0275inj=p.Mb({imports:[[C.b,n.c,o.a,f.b,A]]}),t})()}}]);