!function(){var e,t,n,o,i,r,a,c,s,u,l,d,f,b,p,h,m,g,v,y,_,k,C,w,T,U,x,S,P,E,I,D,M,R,L,O,A,j,z,$,F,W,Y,B,N,G,H,V,Q,q,X,K,J,Z,ee,te,ne,oe;function ie(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=ae(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,a=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){c=!0,r=e},f:function(){try{a||null==n.return||n.return()}finally{if(c)throw r}}}}function re(e){return function(e){if(Array.isArray(e))return ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||ae(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){if(e){if("string"==typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(e,t):void 0}}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function se(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function ue(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var n,o=be(e);if(t){var i=be(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return fe(this,n)}}function fe(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function he(e,t,n){return t&&pe(e.prototype,t),n&&pe(e,n),e}function me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{Jclc:function(e,t,n){"use strict";var o=/([=:@$/])/g,i=/([&;/])/g,r=/[=:@$]/,a=/[&;]/;function c(e,t){return encodeURI(e.replace(t,"/$1"))}e.exports={stringify:function e(t,n){if(!n)return function(e){return"string"==typeof e?e.replace(/;+$/g,""):e}(e(t,!0));if("number"==typeof t||!0===t||!1===t||null===t)return":"+t;var r=[];if(t instanceof Array){for(var a=0;a<t.length;++a)r.push(void 0===t[a]?":null":e(t[a],!0));return"@"+r.join("&")+";"}if("object"==typeof t){for(var s in t){var u=e(t[s],!0);u&&r.push(c(s,o)+u)}return"$"+r.join("&")+";"}return void 0!==t?"="+c(t.toString(),i):void 0},parse:function(e){var t=0;function n(n){for(var o="";t!==e.length;++t){if("/"===e.charAt(t)){if((t+=1)===e.length){o+=";";break}}else if(e.charAt(t).match(n))break;o+=e.charAt(t)}return o}return e=decodeURI(e),function o(){var i,c=e.charAt(t++);if("="===c)return n(a);if(":"===c){var s=n(a);return"true"===s||"false"!==s&&(s=parseFloat(s),isNaN(s)?null:s)}if("@"===c){i=[];e:if(!(t>=e.length||";"===e.charAt(t)))for(;;){if(i.push(o()),t>=e.length||";"===e.charAt(t))break e;t+=1}return t+=1,i}if("$"===c){i={};e:if(!(t>=e.length||";"===e.charAt(t)))for(;;){if(i[n(r)]=o(),t>=e.length||";"===e.charAt(t))break e;t+=1}return t+=1,i}throw new Error("Unexpected char "+c)}()}}},KCRw:function(ae,ce,le){"use strict";le.r(ce),le.d(ce,"StationModule",function(){return Do});var fe,be,pe=le("fXoL"),ge=le("ofXK"),ve="undefined"!=typeof Intl&&Intl.v8BreakIterator,ye=((be=function e(t){me(this,e),this._platformId=t,this.isBrowser=this._platformId?Object(ge.z)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!ve)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}).\u0275fac=function(e){return new(e||be)(pe.dc(pe.D,8))},be.\u0275prov=pe.Lb({token:be,factory:be.\u0275fac,providedIn:"root"}),be.ngInjectableDef=Object(pe.U)({factory:function(){return new be(Object(pe.X)(pe.D,8))},token:be,providedIn:"root"}),be);function _e(e){return function(){if(null==fe&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){return fe=!0}}))}finally{fe=fe||!1}return fe}()?e:!!e.capture}var ke={NORMAL:0,NEGATED:1,INVERTED:2};ke[ke.NORMAL]="NORMAL",ke[ke.NEGATED]="NEGATED",ke[ke.INVERTED]="INVERTED";var Ce=le("XNiG"),we=le("quSY"),Te=le("HDdC");function Ue(e){return null!=e&&"false"!="".concat(e)}var xe=le("IzEk"),Se=le("JX91"),Pe=le("LRne"),Ee=le("xgIS");le("3N8a"),le("IjjT");var Ie=le("VRyK"),De=(le("/uUt"),le("D0XW")),Me=le("zx2A"),Re=function(){function e(t){me(this,e),this.durationSelector=t}return he(e,[{key:"call",value:function(e,t){return t.subscribe(new Le(e,this.durationSelector))}}]),e}(),Le=function(e){ue(n,e);var t=de(n);function n(e,o){var i;return me(this,n),(i=t.call(this,e)).durationSelector=o,i.hasValue=!1,i}return he(n,[{key:"_next",value:function(e){if(this.value=e,this.hasValue=!0,!this.throttled){var t;try{t=(0,this.durationSelector)(e)}catch(o){return this.destination.error(o)}var n=Object(Me.c)(t,new Me.a(this));!n||n.closed?this.clearThrottle():this.add(this.throttled=n)}}},{key:"clearThrottle",value:function(){var e=this.value,t=this.hasValue,n=this.throttled;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))}},{key:"notifyNext",value:function(){this.clearThrottle()}},{key:"notifyComplete",value:function(){this.clearThrottle()}}]),n}(Me.b),Oe=le("PqYM");le("pLZG");var Ae=le("1G5W");le("7o/Q"),le("eIep"),le("WMd4"),le("9ppp"),le("Ylt2");var je,ze,$e,Fe=new pe.s("cdk-dir-doc",{providedIn:"root",factory:function(){return Object(pe.X)(ge.c)}}),We=((ze=function(){function e(t){if(me(this,e),this.value="ltr",this.change=new pe.n,t){var n=t.documentElement?t.documentElement.dir:null,o=(t.body?t.body.dir:null)||n;this.value="ltr"===o||"rtl"===o?o:"ltr"}}return he(e,[{key:"ngOnDestroy",value:function(){this.change.complete()}}]),e}()).\u0275fac=function(e){return new(e||ze)(pe.dc(Fe,8))},ze.\u0275prov=pe.Lb({token:ze,factory:ze.\u0275fac,providedIn:"root"}),ze.ngInjectableDef=Object(pe.U)({factory:function(){return new ze(Object(pe.X)(Fe,8))},token:ze,providedIn:"root"}),ze),Ye=((je=function(){function e(t,n){var o=this;me(this,e),this._platform=t,n.runOutsideAngular(function(){o._change=t.isBrowser?Object(Ie.a)(Object(Ee.a)(window,"resize"),Object(Ee.a)(window,"orientationchange")):Object(Pe.a)(),o._invalidateCache=o.change().subscribe(function(){return o._updateViewportSize()})})}return he(e,[{key:"ngOnDestroy",value:function(){this._invalidateCache.unsubscribe()}},{key:"getViewportSize",value:function(){this._viewportSize||this._updateViewportSize();var e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}},{key:"getViewportRect",value:function(){var e=this.getViewportScrollPosition(),t=this.getViewportSize(),n=t.width,o=t.height;return{top:e.top,left:e.left,bottom:e.top+o,right:e.left+n,height:o,width:n}}},{key:"getViewportScrollPosition",value:function(){if(!this._platform.isBrowser)return{top:0,left:0};var e=document.documentElement,t=e.getBoundingClientRect();return{top:-t.top||document.body.scrollTop||window.scrollY||e.scrollTop||0,left:-t.left||document.body.scrollLeft||window.scrollX||e.scrollLeft||0}}},{key:"change",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;return e>0?this._change.pipe(function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:De.a;return t=function(){return Object(Oe.a)(e,n)},function(e){return e.lift(new Re(t))}}(e)):this._change}},{key:"_updateViewportSize",value:function(){this._viewportSize=this._platform.isBrowser?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0}}}]),e}()).\u0275fac=function(e){return new(e||je)(pe.dc(ye),pe.dc(pe.B))},je.\u0275prov=pe.Lb({token:je,factory:je.\u0275fac,providedIn:"root"}),je.ngInjectableDef=Object(pe.U)({factory:function(){return new je(Object(pe.X)(ye),Object(pe.X)(pe.B))},token:je,providedIn:"root"}),je),Be=_e({passive:!1,capture:!0}),Ne=(($e=function(){function e(t,n){var o=this;me(this,e),this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=new Set,this._globalListeners=new Map,this.pointerMove=new Ce.a,this.pointerUp=new Ce.a,this._preventScrollListener=function(e){o._activeDragInstances.size&&e.preventDefault()},this._document=n}return he(e,[{key:"registerDropContainer",value:function(e){if(!this._dropInstances.has(e)){if(this.getDropContainer(e.id))throw Error('Drop instance with id "'.concat(e.id,'" has already been registered.'));this._dropInstances.add(e)}}},{key:"registerDragItem",value:function(e){var t=this;this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(function(){t._document.addEventListener("touchmove",t._preventScrollListener,Be)})}},{key:"removeDropContainer",value:function(e){this._dropInstances.delete(e)}},{key:"removeDragItem",value:function(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._preventScrollListener,Be)}},{key:"startDragging",value:function(e,t){var n=this;if(this._activeDragInstances.add(e),1===this._activeDragInstances.size){var o=t.type.startsWith("touch"),i=o?"touchend":"mouseup";this._globalListeners.set(o?"touchmove":"mousemove",{handler:function(e){return n.pointerMove.next(e)},options:Be}).set(i,{handler:function(e){return n.pointerUp.next(e)},options:!0}),o||this._globalListeners.set("wheel",{handler:this._preventScrollListener,options:Be}),this._ngZone.runOutsideAngular(function(){n._globalListeners.forEach(function(e,t){n._document.addEventListener(t,e.handler,e.options)})})}}},{key:"stopDragging",value:function(e){this._activeDragInstances.delete(e),0===this._activeDragInstances.size&&this._clearGlobalListeners()}},{key:"isDragging",value:function(e){return this._activeDragInstances.has(e)}},{key:"getDropContainer",value:function(e){return Array.from(this._dropInstances).find(function(t){return t.id===e})}},{key:"ngOnDestroy",value:function(){var e=this;this._dragInstances.forEach(function(t){return e.removeDragItem(t)}),this._dropInstances.forEach(function(t){return e.removeDropContainer(t)}),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}},{key:"_clearGlobalListeners",value:function(){var e=this;this._globalListeners.forEach(function(t,n){e._document.removeEventListener(n,t.handler,t.options)}),this._globalListeners.clear()}}]),e}()).\u0275fac=function(e){return new(e||$e)(pe.dc(pe.B),pe.dc(ge.c))},$e.\u0275prov=pe.Lb({token:$e,factory:$e.\u0275fac,providedIn:"root"}),$e.ngInjectableDef=Object(pe.U)({factory:function(){return new $e(Object(pe.X)(pe.B),Object(pe.X)(ge.c))},token:$e,providedIn:"root"}),$e),Ge=new pe.s("CDK_DRAG_PARENT");function He(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Ve(e,t){var n=t?"":"none";He(e.style,{touchAction:t?"":"none",webkitUserDrag:t?"":"none",webkitTapHighlightColor:t?"":"transparent",userSelect:n,msUserSelect:n,webkitUserSelect:n,MozUserSelect:n})}var Qe,qe,Xe,Ke=((Xe=function(){function e(t,n){me(this,e),this.element=t,this._disabled=!1,this._parentDrag=n,Ve(t.nativeElement,!1)}return he(e,[{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=Ue(e)}}]),e}()).\u0275fac=function(e){return new(e||Xe)(pe.Pb(pe.l),pe.Pb(Ge,8))},Xe.\u0275dir=pe.Kb({type:Xe,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]}}),Xe),Je=((qe=function e(t){me(this,e),this.templateRef=t}).\u0275fac=function(e){return new(e||qe)(pe.Pb(pe.M))},qe.\u0275dir=pe.Kb({type:qe,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"}}),qe),Ze=((Qe=function e(t){me(this,e),this.templateRef=t}).\u0275fac=function(e){return new(e||Qe)(pe.Pb(pe.M))},Qe.\u0275dir=pe.Kb({type:Qe,selectors:[["ng-template","cdkDragPreview",""]],inputs:{data:"data"}}),Qe),et=new pe.s("CDK_DROP_LIST_CONTAINER");function tt(e){var t=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*t}function nt(e,t){return e.getPropertyValue(t).split(",").map(function(e){return e.trim()})}var ot,it=new pe.s("CDK_DRAG_CONFIG",{providedIn:"root",factory:function(){return{dragStartThreshold:5,pointerDirectionChangeThreshold:5}}}),rt=_e({passive:!0}),at=_e({passive:!1}),ct=((ot=function(){function e(t,n,o,i,r,a,c,s,u){var l=this;me(this,e),this.element=t,this.dropContainer=n,this._ngZone=i,this._viewContainerRef=r,this._viewportRuler=a,this._dragDropRegistry=c,this._config=s,this._dir=u,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new Ce.a,this._moveEventSubscriptions=0,this._pointerMoveSubscription=we.a.EMPTY,this._pointerUpSubscription=we.a.EMPTY,this._rootElementInitSubscription=we.a.EMPTY,this._disabled=!1,this.started=new pe.n,this.ended=new pe.n,this.entered=new pe.n,this.exited=new pe.n,this.dropped=new pe.n,this.moved=Te.a.create(function(e){var t=l._moveEvents.subscribe(e);return l._moveEventSubscriptions++,function(){t.unsubscribe(),l._moveEventSubscriptions--}}),this._pointerDown=function(e){var t=l.getChildHandles();if(t.length){var n=t.find(function(t){var n=t.element.nativeElement,o=e.target;return!!o&&(o===n||n.contains(o))});!n||n.disabled||l.disabled||l._initializeDragSequence(n.element.nativeElement,e)}else l.disabled||l._initializeDragSequence(l._rootElement,e)},this._pointerMove=function(e){var t=l._getConstrainedPointerPosition(e);if(l._hasStartedDragging){if(l._hasMoved=!0,e.preventDefault(),l._updatePointerDirectionDelta(t),l.dropContainer)l._updateActiveDropContainer(t);else{var n=l._activeTransform;n.x=t.x-l._pickupPositionOnPage.x+l._passiveTransform.x,n.y=t.y-l._pickupPositionOnPage.y+l._passiveTransform.y;var o=st(n.x,n.y);l._rootElement.style.transform=l._initialTransform?l._initialTransform+" "+o:o,"undefined"!=typeof SVGElement&&l._rootElement instanceof SVGElement&&l._rootElement.setAttribute("transform","translate(".concat(n.x," ").concat(n.y,")"))}l._moveEventSubscriptions>0&&l._ngZone.run(function(){l._moveEvents.next({source:l,pointerPosition:t,event:e,delta:l._pointerDirectionDelta})})}else Math.abs(t.x-l._pickupPositionOnPage.x)+Math.abs(t.y-l._pickupPositionOnPage.y)>=l._config.dragStartThreshold&&(l._hasStartedDragging=!0,l._ngZone.run(function(){return l._startDragSequence(e)}))},this._pointerUp=function(){if(l._isDragging()&&(l._removeSubscriptions(),l._dragDropRegistry.stopDragging(l),l._hasStartedDragging))return l.dropContainer?void l._animatePreviewToPlaceholder().then(function(){l._cleanupDragArtifacts(),l._dragDropRegistry.stopDragging(l)}):(l._passiveTransform.x=l._activeTransform.x,l._passiveTransform.y=l._activeTransform.y,l._ngZone.run(function(){return l.ended.emit({source:l})}),void l._dragDropRegistry.stopDragging(l))},this._document=o,c.registerDragItem(this)}return he(e,[{key:"disabled",get:function(){return this._disabled||this.dropContainer&&this.dropContainer.disabled},set:function(e){this._disabled=Ue(e)}},{key:"getPlaceholderElement",value:function(){return this._placeholder}},{key:"getRootElement",value:function(){return this._rootElement}},{key:"reset",value:function(){this._rootElement.style.transform="",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}},{key:"ngAfterViewInit",value:function(){var e=this;this._rootElementInitSubscription=this._ngZone.onStable.asObservable().pipe(Object(xe.a)(1)).subscribe(function(){var t=e._rootElement=e._getRootElement();t.addEventListener("mousedown",e._pointerDown,at),t.addEventListener("touchstart",e._pointerDown,rt),e._handles.changes.pipe(Object(Se.a)(null)).subscribe(function(){return Ve(t,e.getChildHandles().length>0)})})}},{key:"ngOnDestroy",value:function(){this._rootElement&&(this._rootElement.removeEventListener("mousedown",this._pointerDown,at),this._rootElement.removeEventListener("touchstart",this._pointerDown,rt),this._isDragging()&&this._removeElement(this._rootElement)),this._rootElementInitSubscription.unsubscribe(),this._destroyPreview(),this._destroyPlaceholder(),this._nextSibling=null,this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this._moveEvents.complete()}},{key:"_isDragging",value:function(){return this._dragDropRegistry.isDragging(this)}},{key:"getChildHandles",value:function(){var e=this;return this._handles.filter(function(t){return t._parentDrag===e})}},{key:"_initializeDragSequence",value:function(e,t){t.stopPropagation();var n=this._isDragging(),o=this._isTouchEvent(t),i=!o&&0!==t.button,r=!o&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(t.target&&t.target.draggable&&"mousedown"===t.type&&t.preventDefault(),!(n||i||r)){null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._hasStartedDragging=this._hasMoved=!1,this._initialContainer=this.dropContainer,this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollPosition=this._viewportRuler.getViewportScrollPosition(),this._pickupPositionInElement=this._previewTemplate?{x:0,y:0}:this._getPointerPositionInElement(e,t);var a=this._pickupPositionOnPage=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:a.x,y:a.y},this._dragDropRegistry.startDragging(this,t)}}},{key:"_startDragSequence",value:function(e){if(this.started.emit({source:this}),this._isTouchEvent(e)&&(this._lastTouchEventTime=Date.now()),this.dropContainer){var t=this._rootElement;this._nextSibling=t.nextSibling;var n=this._preview=this._createPreviewElement(),o=this._placeholder=this._createPlaceholderElement();t.style.display="none",this._document.body.appendChild(t.parentNode.replaceChild(o,t)),this._document.body.appendChild(n),this.dropContainer.start()}}},{key:"_cleanupDragArtifacts",value:function(){var e=this;this._rootElement.style.display="",this._nextSibling?this._nextSibling.parentNode.insertBefore(this._rootElement,this._nextSibling):this._initialContainer.element.nativeElement.appendChild(this._rootElement),this._destroyPreview(),this._destroyPlaceholder(),this._ngZone.run(function(){var t=e.dropContainer.getItemIndex(e);e.ended.emit({source:e}),e.dropped.emit({item:e,currentIndex:t,previousIndex:e._initialContainer.getItemIndex(e),container:e.dropContainer,previousContainer:e._initialContainer}),e.dropContainer.drop(e,t,e._initialContainer),e.dropContainer=e._initialContainer})}},{key:"_updateActiveDropContainer",value:function(e){var t=this,n=e.x,o=e.y,i=this.dropContainer._getSiblingContainerFromPosition(this,n,o);!i&&this.dropContainer!==this._initialContainer&&this._initialContainer._canReturnItem(n,o)&&(i=this._initialContainer),i&&this._ngZone.run(function(){t.exited.emit({item:t,container:t.dropContainer}),t.dropContainer.exit(t),t.entered.emit({item:t,container:i}),t.dropContainer=i,t.dropContainer.enter(t,n,o)}),this.dropContainer._sortItem(this,n,o,this._pointerDirectionDelta),this._preview.style.transform=st(n-this._pickupPositionInElement.x,o-this._pickupPositionInElement.y)}},{key:"_createPreviewElement",value:function(){var e;if(this._previewTemplate){var t=this._viewContainerRef.createEmbeddedView(this._previewTemplate.templateRef,this._previewTemplate.data);e=t.rootNodes[0],this._previewRef=t,e.style.transform=st(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{var n=this._rootElement,o=n.getBoundingClientRect();(e=ut(n)).style.width="".concat(o.width,"px"),e.style.height="".concat(o.height,"px"),e.style.transform=st(o.left,o.top)}return He(e.style,{position:"fixed",top:"0",left:"0",zIndex:"1000"}),e.classList.add("cdk-drag-preview"),e.setAttribute("dir",this._dir?this._dir.value:"ltr"),e}},{key:"_createPlaceholderElement",value:function(){var e;return this._placeholderTemplate?(this._placeholderRef=this._viewContainerRef.createEmbeddedView(this._placeholderTemplate.templateRef,this._placeholderTemplate.data),e=this._placeholderRef.rootNodes[0]):e=ut(this._rootElement),e.classList.add("cdk-drag-placeholder"),e}},{key:"_getPointerPositionInElement",value:function(e,t){var n=this._rootElement.getBoundingClientRect(),o=e===this._rootElement?null:e,i=o?o.getBoundingClientRect():n,r=this._isTouchEvent(t)?t.targetTouches[0]:t;return{x:i.left-n.left+(r.pageX-i.left-this._scrollPosition.left),y:i.top-n.top+(r.pageY-i.top-this._scrollPosition.top)}}},{key:"_animatePreviewToPlaceholder",value:function(){var e=this;if(!this._hasMoved)return Promise.resolve();var t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=st(t.left,t.top);var n=function(e){var t=getComputedStyle(e),n=nt(t,"transition-property"),o=n.find(function(e){return"transform"===e||"all"===e});if(!o)return 0;var i=n.indexOf(o),r=nt(t,"transition-duration"),a=nt(t,"transition-delay");return tt(r[i])+tt(a[i])}(this._preview);return 0===n?Promise.resolve():this._ngZone.runOutsideAngular(function(){return new Promise(function(t){var o=function n(o){(!o||o.target===e._preview&&"transform"===o.propertyName)&&(e._preview.removeEventListener("transitionend",n),t(),clearTimeout(i))},i=setTimeout(o,1.5*n);e._preview.addEventListener("transitionend",o)})})}},{key:"_removeElement",value:function(e){e&&e.parentNode&&e.parentNode.removeChild(e)}},{key:"_getPointerPositionOnPage",value:function(e){var t=this._isTouchEvent(e)?e.touches[0]:e;return{x:t.pageX-this._scrollPosition.left,y:t.pageY-this._scrollPosition.top}}},{key:"_getConstrainedPointerPosition",value:function(e){var t=this._getPointerPositionOnPage(e),n=this.dropContainer?this.dropContainer.lockAxis:null;return"x"===this.lockAxis||"x"===n?t.y=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==n||(t.x=this._pickupPositionOnPage.x),t}},{key:"_isTouchEvent",value:function(e){return e.type.startsWith("touch")}},{key:"_destroyPreview",value:function(){this._preview&&this._removeElement(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}},{key:"_destroyPlaceholder",value:function(){this._placeholder&&this._removeElement(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}},{key:"_updatePointerDirectionDelta",value:function(e){var t=e.x,n=e.y,o=this._pointerDirectionDelta,i=this._pointerPositionAtLastDirectionChange,r=Math.abs(t-i.x),a=Math.abs(n-i.y);return r>this._config.pointerDirectionChangeThreshold&&(o.x=t>i.x?1:-1,i.x=t),a>this._config.pointerDirectionChangeThreshold&&(o.y=n>i.y?1:-1,i.y=n),o}},{key:"_getRootElement",value:function(){if(this.rootElementSelector)for(var e=this.rootElementSelector,t=this.element.nativeElement.parentElement;t;){if(t.matches?t.matches(e):t.msMatchesSelector(e))return t;t=t.parentElement}return this.element.nativeElement}},{key:"_removeSubscriptions",value:function(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||ot)(pe.Pb(pe.l),pe.Pb(et,12),pe.Pb(ge.c),pe.Pb(pe.B),pe.Pb(pe.R),pe.Pb(Ye),pe.Pb(Ne),pe.Pb(it),pe.Pb(We,8))},ot.\u0275dir=pe.Kb({type:ot,selectors:[["","cdkDrag",""]],contentQueries:function(e,t,n){var o;1&e&&(pe.Ib(n,Ze,1),pe.Ib(n,Je,1),pe.Ib(n,Ke,1)),2&e&&(pe.vc(o=pe.ic())&&(t._previewTemplate=o.first),pe.vc(o=pe.ic())&&(t._placeholderTemplate=o.first),pe.vc(o=pe.ic())&&(t._handles=o))},hostAttrs:[1,"cdk-drag"],hostVars:2,hostBindings:function(e,t){2&e&&pe.Hb("cdk-drag-dragging",t._hasStartedDragging&&t._isDragging())},inputs:{disabled:["cdkDragDisabled","disabled"],data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"]},outputs:{started:"cdkDragStarted",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[pe.Bb([{provide:Ge,useExisting:ot}])]}),ot);function st(e,t){return"translate3d(".concat(Math.round(e),"px, ").concat(Math.round(t),"px, 0)")}function ut(e){var t=e.cloneNode(!0);return t.removeAttribute("id"),t}function lt(e,t,n){var o=dt(t,e.length-1),i=dt(n,e.length-1);if(o!==i){for(var r=e[o],a=i<o?-1:1,c=o;c!==i;c+=a)e[c]=e[c+a];e[i]=r}}function dt(e,t){return Math.max(0,Math.min(t,e))}var ft,bt,pt=((bt=function(){function e(){me(this,e),this._items=new Set}return he(e,[{key:"ngOnDestroy",value:function(){this._items.clear()}}]),e}()).\u0275fac=function(e){return new(e||bt)},bt.\u0275dir=pe.Kb({type:bt,selectors:[["","cdkDropListGroup",""]],exportAs:["cdkDropListGroup"]}),bt),ht=0,mt=((ft=function(){function e(t,n,o,i,r){me(this,e),this.element=t,this._dragDropRegistry=n,this._changeDetectorRef=o,this._dir=i,this._group=r,this.connectedTo=[],this.orientation="vertical",this.id="cdk-drop-list-"+ht++,this._disabled=!1,this.enterPredicate=function(){return!0},this.dropped=new pe.n,this.entered=new pe.n,this.exited=new pe.n,this.sorted=new pe.n,this._dragging=!1,this._positionCache={items:[],siblings:[],self:{}},this._previousSwap={drag:null,delta:0}}return he(e,[{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=Ue(e)}},{key:"ngOnInit",value:function(){this._dragDropRegistry.registerDropContainer(this),this._group&&this._group._items.add(this)}},{key:"ngOnDestroy",value:function(){this._dragDropRegistry.removeDropContainer(this),this._group&&this._group._items.delete(this)}},{key:"start",value:function(){this._dragging=!0,this._activeDraggables=this._draggables.toArray(),this._cachePositions(),this._changeDetectorRef.markForCheck()}},{key:"drop",value:function(e,t,n){this._reset(),this.dropped.emit({item:e,currentIndex:t,previousIndex:n.getItemIndex(e),container:this,previousContainer:n})}},{key:"enter",value:function(e,t,n){this.entered.emit({item:e,container:this}),this.start();var o=this._getItemIndexFromPointerPosition(e,t,n),i=this._activeDraggables.indexOf(e),r=this._activeDraggables[o],a=e.getPlaceholderElement();if(i>-1&&this._activeDraggables.splice(i,1),r&&!this._dragDropRegistry.isDragging(r)){var c=r.getRootElement();c.parentElement.insertBefore(a,c),this._activeDraggables.splice(o,0,e)}else this.element.nativeElement.appendChild(a),this._activeDraggables.push(e);a.style.transform="",this._cachePositions()}},{key:"exit",value:function(e){this._reset(),this.exited.emit({item:e,container:this})}},{key:"getItemIndex",value:function(e){return this._dragging?gt("horizontal"===this.orientation&&this._dir&&"rtl"===this._dir.value?this._positionCache.items.slice().reverse():this._positionCache.items,function(t){return t.drag===e}):this._draggables.toArray().indexOf(e)}},{key:"_sortItem",value:function(e,t,n,o){var i=this;if(this._isPointerNearDropContainer(t,n)){var r=this._positionCache.items,a=this._getItemIndexFromPointerPosition(e,t,n,o);if(!(-1===a&&r.length>0)){var c="horizontal"===this.orientation,s=gt(r,function(t){return t.drag===e}),u=r[a],l=r[s].clientRect,d=u.clientRect,f=s>a?1:-1;this._previousSwap.drag=u.drag,this._previousSwap.delta=c?o.x:o.y;var b=this._getItemOffsetPx(l,d,f),p=this._getSiblingOffsetPx(s,r,f),h=r.slice();lt(r,s,a),this.sorted.emit({previousIndex:s,currentIndex:a,container:this,item:e}),r.forEach(function(t,n){if(h[n]!==t){var o=t.drag===e,r=o?b:p,a=o?e.getPlaceholderElement():t.drag.getRootElement();t.offset+=r,c?(a.style.transform="translate3d(".concat(Math.round(t.offset),"px, 0, 0)"),i._adjustClientRect(t.clientRect,0,r)):(a.style.transform="translate3d(0, ".concat(Math.round(t.offset),"px, 0)"),i._adjustClientRect(t.clientRect,r,0))}})}}}},{key:"_getSiblingContainerFromPosition",value:function(e,t,n){var o=this._positionCache.siblings.find(function(e){return vt(e.clientRect,t,n)});return o&&o.drop.enterPredicate(e,o.drop)?o.drop:null}},{key:"_canReturnItem",value:function(e,t){return vt(this._positionCache.self,e,t)}},{key:"_cachePositions",value:function(){var e=this,t="horizontal"===this.orientation;this._positionCache.self=this.element.nativeElement.getBoundingClientRect(),this._positionCache.items=this._activeDraggables.map(function(t){var n=(e._dragDropRegistry.isDragging(t)?t.getPlaceholderElement():t.getRootElement()).getBoundingClientRect();return{drag:t,offset:0,clientRect:{top:n.top,right:n.right,bottom:n.bottom,left:n.left,width:n.width,height:n.height}}}).sort(function(e,n){return t?e.clientRect.left-n.clientRect.left:e.clientRect.top-n.clientRect.top}),this._positionCache.siblings=this._getConnectedLists().map(function(e){return{drop:e,clientRect:e.element.nativeElement.getBoundingClientRect()}})}},{key:"_reset",value:function(){this._dragging=!1,this._activeDraggables.forEach(function(e){return e.getRootElement().style.transform=""}),this._activeDraggables=[],this._positionCache.items=[],this._positionCache.siblings=[],this._previousSwap.drag=null,this._previousSwap.delta=0}},{key:"_adjustClientRect",value:function(e,t,n){e.top+=t,e.bottom=e.top+e.height,e.left+=n,e.right=e.left+e.width}},{key:"_getItemIndexFromPointerPosition",value:function(e,t,n,o){var i=this,r="horizontal"===this.orientation;return gt(this._positionCache.items,function(a,c,s){var u=a.drag,l=a.clientRect;if(u===e)return s.length<2;if(o){var d=r?o.x:o.y;if(u===i._previousSwap.drag&&d===i._previousSwap.delta)return!1}return r?t>=Math.floor(l.left)&&t<=Math.floor(l.right):n>=Math.floor(l.top)&&n<=Math.floor(l.bottom)})}},{key:"_isPointerNearDropContainer",value:function(e,t){var n=this._positionCache.self,o=n.top,i=n.right,r=n.bottom,a=n.left,c=.05*n.width,s=.05*n.height;return t>o-s&&t<r+s&&e>a-c&&e<i+c}},{key:"_getItemOffsetPx",value:function(e,t,n){var o="horizontal"===this.orientation,i=o?t.left-e.left:t.top-e.top;return-1===n&&(i+=o?t.width-e.width:t.height-e.height),i}},{key:"_getSiblingOffsetPx",value:function(e,t,n){var o="horizontal"===this.orientation,i=t[e].clientRect,r=t[e+-1*n],a=i[o?"width":"height"]*n;if(r){var c=o?"left":"top",s=o?"right":"bottom";-1===n?a-=r.clientRect[c]-i[s]:a+=i[c]-r.clientRect[s]}return a}},{key:"_getConnectedLists",value:function(){var e,t=this,n=(e=this.connectedTo,Array.isArray(e)?e:[e]).map(function(e){return"string"==typeof e?t._dragDropRegistry.getDropContainer(e):e});return this._group&&this._group._items.forEach(function(e){-1===n.indexOf(e)&&n.push(e)}),n.filter(function(e){return e&&e!==t})}}]),e}()).\u0275fac=function(e){return new(e||ft)(pe.Pb(pe.l),pe.Pb(Ne),pe.Pb(pe.h),pe.Pb(We,8),pe.Pb(pt,12))},ft.\u0275dir=pe.Kb({type:ft,selectors:[["","cdkDropList",""],["cdk-drop-list"]],contentQueries:function(e,t,n){var o;1&e&&pe.Ib(n,ct,0),2&e&&pe.vc(o=pe.ic())&&(t._draggables=o)},hostAttrs:[1,"cdk-drop-list"],hostVars:3,hostBindings:function(e,t){2&e&&(pe.Xb("id",t.id),pe.Hb("cdk-drop-list-dragging",t._dragging))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],orientation:["cdkDropListOrientation","orientation"],id:"id",enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],disabled:["cdkDropListDisabled","disabled"],data:["cdkDropListData","data"],lockAxis:["cdkDropListLockAxis","lockAxis"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[pe.Bb([{provide:pt,useValue:void 0},{provide:et,useExisting:ft}])]}),ft);function gt(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return n;return-1}function vt(e,t,n){var o=e.top,i=e.bottom,r=e.left,a=e.right;return n>=o&&n<=i&&t>=r&&t<=a}var yt,_t,kt,Ct,wt=((yt=function e(){me(this,e)}).\u0275fac=function(e){return new(e||yt)},yt.\u0275mod=pe.Nb({type:yt}),yt.\u0275inj=pe.Mb({}),yt),Tt=le("3Pt+"),Ut=le("1kSV"),xt=le("PCNd"),St=le("UYTb"),Pt=le("kuWu"),Et=((_t=function(){function e(){me(this,e)}return he(e,[{key:"getLayouts",value:function(t){return t.map(function(t){return{name:t.name,config:t.config.map(function(t){return{moduleId:e.map[t.moduleId].moduleId,count:t.count}})}})}},{key:"getSaveData",value:function(e){return null}}]),e}()).map={1:{moduleId:Pt.b.module_gen_prod_energycells_01.id},2:{moduleId:Pt.b.module_gen_prod_water_01.id},3:{moduleId:Pt.b.module_arg_prod_meat_01.id},4:{moduleId:Pt.b.module_par_prod_majasnails_01.id},5:{moduleId:Pt.b.module_gen_prod_spices_01.id},6:{moduleId:Pt.b.module_arg_prod_wheat_01.id},7:{moduleId:Pt.b.module_par_prod_sojabeans_01.id},8:{moduleId:Pt.b.module_tel_prod_sunriseflowers_01.id},9:{moduleId:Pt.b.module_tel_prod_swampplant_01.id},10:{moduleId:Pt.b.module_arg_prod_medicalsupplies_01.id},11:{moduleId:Pt.b.module_tel_prod_medicalsupplies_01.id},12:{moduleId:Pt.b.module_par_prod_medicalsupplies_01.id},13:{moduleId:Pt.b.module_arg_prod_foodrations_01.id},14:{moduleId:Pt.b.module_par_prod_sojahusk_01.id},15:{moduleId:Pt.b.module_tel_prod_nostropoil_01.id},16:{moduleId:Pt.b.module_arg_prod_spacefuel_01.id},17:{moduleId:Pt.b.module_tel_prod_spaceweed_01.id},18:{moduleId:Pt.b.module_par_prod_majadust_01.id},19:{moduleId:Pt.b.module_gen_prod_refinedmetals_01.id},20:{moduleId:Pt.b.module_gen_prod_siliconwafers_01.id},21:{moduleId:Pt.b.module_gen_prod_antimattercells_01.id},22:{moduleId:Pt.b.module_gen_prod_graphene_01.id},23:{moduleId:Pt.b.module_gen_prod_superfluidcoolant_01.id},24:{moduleId:Pt.b.module_gen_prod_microchips_01.id},25:{moduleId:Pt.b.module_gen_prod_scanningarrays_01.id},26:{moduleId:Pt.b.module_gen_prod_hullparts_01},27:{moduleId:Pt.b.module_gen_prod_advancedcomposites_01.id},28:{moduleId:Pt.b.module_gen_prod_engineparts_01.id},29:{moduleId:Pt.b.module_gen_prod_plasmaconductors_01.id},30:{moduleId:Pt.b.module_gen_prod_quantumtubes_01.id},31:{moduleId:Pt.b.module_gen_prod_advancedelectronics_01.id},32:{moduleId:Pt.b.module_gen_prod_antimatterconverters_01.id},33:{moduleId:Pt.b.module_gen_prod_claytronics_01.id},34:{moduleId:Pt.b.module_gen_prod_dronecomponents_01.id},35:{moduleId:Pt.b.module_gen_prod_missilecomponents_01.id},36:{moduleId:Pt.b.module_gen_prod_shieldcomponents_01.id},37:{moduleId:Pt.b.module_gen_prod_turretcomponents_01.id},38:{moduleId:Pt.b.module_gen_prod_weaponcomponents_01.id},39:{moduleId:Pt.b.module_gen_prod_smartchips_01.id},40:{moduleId:Pt.b.module_gen_prod_fieldcoils_01.id}},_t),It=function(){function e(t){me(this,e),this.moduleService=t}return he(e,[{key:"findModule",value:function(e,t){return this.moduleService.getModuleByWare(e,t)}},{key:"getLayouts",value:function(e){var t=this,n=e.layouts;return n?n.map(function(e){return{name:e.name,config:e.config.map(function(e){var n=t.findModule(e.moduleId,e.productionId);return{count:e.count,moduleId:n?n.id:null}}).filter(function(e){return null!=e.moduleId})}}):[]}},{key:"getSaveData",value:function(e){return{layouts:e}}}]),e}(),Dt=function(){function e(){me(this,e)}return he(e,[{key:"getLayouts",value:function(e){return e.layouts}},{key:"getSaveData",value:function(e){return{layouts:e}}}]),e}(),Mt=le("ZXMZ"),Rt=le("zFYr"),Lt=((kt=function(){function e(t,n,o){me(this,e),this.storageService=t,this.moduleService=n,this.analytics=o,this.services=[new Et,new It(n),new Dt]}return he(e,[{key:"getCurrentService",value:function(){return this.services[e.version]}},{key:"getLayouts",value:function(){var t=this.storageService.get(e.storageKey)||{version:e.version};return this.services[t.version||0].getLayouts(t)||[]}},{key:"getLayout",value:function(e){return this.analytics.event({label:e,category:"Layouts",action:"Load Layout"}),this.getLayouts().find(function(t){return t.name===e})}},{key:"saveLayout",value:function(e){var t=this.getLayouts(),n=t.findIndex(function(t){return t.name.toLowerCase()===e.name.toLowerCase()});n>=0?t[n]=e:t.push(e),this.analytics.event({label:e.name,category:"Layouts",action:"Save Layout"}),this.saveLayoutsInternal(t)}},{key:"deleteLayout",value:function(e){this.analytics.event({label:e,category:"Layouts",action:"Delete Layout"});var t=this.getLayouts(),n=t.findIndex(function(t){return t.name.toLowerCase()===e.toLowerCase()});n>=0&&t.splice(n,1),this.saveLayoutsInternal(t)}},{key:"saveLayoutsInternal",value:function(t){var n=this.getCurrentService().getSaveData(t);this.storageService.add(e.storageKey,Object.assign(Object.assign({},n),{version:e.version}))}}]),e}()).version=2,kt.storageKey="layouts",kt.\u0275fac=function(e){return new(e||kt)(pe.dc(St.a),pe.dc(Mt.a),pe.dc(Rt.a))},kt.\u0275prov=pe.Lb({token:kt,factory:kt.\u0275fac}),kt),Ot=le("tyNb"),At=le("Jclc"),jt=le("dXtl"),zt=function(){var e=function e(){me(this,e)};return e.primary="primary",e.secondary="secondary",e.success="success",e.danger="danger",e.warning="warning",e.info="info",e}(),$t=le("Lswn"),Ft=((Ct=function e(t){me(this,e),this.activeModal=t}).\u0275fac=function(e){return new(e||Ct)(pe.Pb(Ut.a))},Ct.\u0275cmp=pe.Jb({type:Ct,selectors:[["ng-component"]],inputs:{title:"title",message:"message"},decls:13,vars:2,consts:function(){return[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"innerHTML"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],$localize(e||(e=se([":@@yes\u241f4f20f2d5a6882190892e58b85f6ccbedfa737952\u241f2807800733729323332:Yes"]))),$localize(t||(t=se([":@@no\u241f3d3ae7deebc5949b0c1c78b9847886a94321d9fd\u241f3542042671420335679:No"])))]},template:function(e,t){1&e&&(pe.Ub(0,"div",0),pe.Ub(1,"h4",1),pe.Ec(2),pe.Tb(),pe.Ub(3,"button",2),pe.hc("click",function(){return t.activeModal.dismiss()}),pe.Ub(4,"span",3),pe.Ec(5,"\xd7"),pe.Tb(),pe.Tb(),pe.Tb(),pe.Ub(6,"div",4),pe.Qb(7,"p",5),pe.Tb(),pe.Ub(8,"div",6),pe.Ub(9,"button",7),pe.hc("click",function(){return t.activeModal.close(!0)}),pe.Yb(10,8),pe.Tb(),pe.Ub(11,"button",7),pe.hc("click",function(){return t.activeModal.close(!1)}),pe.Yb(12,9),pe.Tb(),pe.Tb()),2&e&&(pe.Cb(2),pe.Fc(t.title),pe.Cb(5),pe.pc("innerHTML",t.message,pe.yc))},encapsulation:2}),Ct);function Wt(e,t){if(1&e){var n=pe.Vb();pe.Ub(0,"a",11),pe.hc("click",function(e){pe.xc(n);var o=t.$implicit;return pe.jc().loadLayout(e,o)}),pe.Ub(1,"div"),pe.Ub(2,"strong"),pe.Ec(3),pe.Tb(),pe.Ub(4,"div",12),pe.Ub(5,"a",13),pe.hc("click",function(e){pe.xc(n);var o=t.$implicit;return pe.jc().loadLayout(e,o)}),pe.Yb(6,14),pe.Tb(),pe.Ec(7," | "),pe.Ub(8,"a",15),pe.hc("click",function(e){pe.xc(n);var o=t.$implicit;return pe.jc().addLayout(e,o)}),pe.Yb(9,16),pe.Tb(),pe.Ec(10," | "),pe.Ub(11,"a",17),pe.hc("click",function(e){pe.xc(n);var o=t.$implicit;return pe.jc().deleteLayout(e,o)}),pe.Yb(12,18),pe.Tb(),pe.Tb(),pe.Tb(),pe.Ub(13,"div",19),pe.Ec(14),pe.Tb(),pe.Tb()}if(2&e){var o=t.$implicit,i=pe.jc();pe.Cb(3),pe.Fc(o.name),pe.Cb(11),pe.Gc(" ",i.getModules(o)," ")}}var Yt,Bt,Nt,Gt,Ht=function(e){return e[e.load=0]="load",e[e.add=1]="add",e}({}),Vt=((Nt=function(e){ue(n,e);var t=de(n);function n(e,o,i,r){var a;return me(this,n),(a=t.call(this)).activeModal=e,a.modal=o,a.layoutService=i,a.moduleService=r,a}return he(n,[{key:"ngOnInit",value:function(){var e=this;this.entities=this.layoutService.getLayouts().map(function(t){return{name:t.name,modules:t.config.map(function(t){return{count:t.count,module:e.moduleService.getEntity(t.moduleId)}})}})}},{key:"getModules",value:function(e){return e.modules.map(function(e){return e.count+" x "+(null==e.module?"":e.module.name)}).join(", ")}},{key:"loadLayout",value:function(e,t){e.preventDefault(),e.stopPropagation(),this.activeModal.close({layoutName:t.name,type:Ht.load})}},{key:"addLayout",value:function(e,t){e.preventDefault(),e.stopPropagation(),this.activeModal.close({layoutName:t.name,type:Ht.add})}},{key:"deleteLayout",value:function(e,t){var n=this;e.preventDefault(),e.stopPropagation();var o=this.modal.open(Ft);o.componentInstance.title="Confirm Delete",o.componentInstance.message="Are you sure you want to delete <strong>".concat(t.name,"</strong>?"),o.result.then(function(e){e&&(n.layoutService.deleteLayout(t.name),n.ngOnInit())})}}]),n}(jt.a)).\u0275fac=function(e){return new(e||Nt)(pe.Pb(Ut.a),pe.Pb(Ut.c),pe.Pb(Lt),pe.Pb(Mt.a))},Nt.\u0275cmp=pe.Jb({type:Nt,selectors:[["ng-component"]],features:[pe.zb],decls:12,vars:1,consts:function(){return[[1,"modal-header"],[1,"modal-title"],$localize(n||(n=se([":@@loadLayout\u241fa4a48028fd8fd9629d60f4e0c6b8c8b13218e394\u241f8030604597468533658:Load Layout"]))),["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"list-group"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],$localize(o||(o=se([":@@cancel\u241fd7b35c384aecd25a516200d6921836374613dfe7\u241f2159130950882492111:Cancel"]))),[1,"list-group-item","list-group-item-action",3,"click"],[1,"float-right","small"],[1,"hover","text-primary",3,"click"],$localize(i||(i=se([":@@load\u241fa4a48028fd8fd9629d60f4e0c6b8c8b13218e394\u241f8030604597468533658:Load Layout"]))),[1,"hover","text-secondary",3,"click"],$localize(r||(r=se([":@@load\u241f9b1fd5113d203b680aa9b75bfb383e4f44906546\u241f1851573252212447256:Add Modules"]))),[1,"hover","text-danger",3,"click"],$localize(a||(a=se([":@@delete\u241f554e76bab16d9b9561199346a44e79a61a856554\u241f3641097457677886540:Delete Layout"]))),[1,"small"]]},template:function(e,t){1&e&&(pe.Ub(0,"div",0),pe.Ub(1,"h4",1),pe.Yb(2,2),pe.Tb(),pe.Ub(3,"button",3),pe.hc("click",function(){return t.activeModal.close()}),pe.Ub(4,"span",4),pe.Ec(5,"\xd7"),pe.Tb(),pe.Tb(),pe.Tb(),pe.Ub(6,"div",5),pe.Ub(7,"div",6),pe.Cc(8,Wt,15,2,"a",7),pe.Tb(),pe.Tb(),pe.Ub(9,"div",8),pe.Ub(10,"button",9),pe.hc("click",function(){return t.activeModal.close()}),pe.Yb(11,10),pe.Tb(),pe.Tb()),2&e&&(pe.Cb(8),pe.pc("ngForOf",t.entities))},directives:[ge.k],encapsulation:2}),Nt),Qt=((Bt=function(){function e(t,n,o){me(this,e),this.activeModal=t,this.modal=n,this.layoutService=o}return he(e,[{key:"canSave",value:function(){return this.name}},{key:"saveLayout",value:function(){var e=this;if(this.layoutService.getLayout(this.name)){var t=this.modal.open(Ft);t.componentInstance.title="Confirm Save",t.componentInstance.message="<strong>".concat(this.name,"</strong> already exists. Confirm overwrite?"),t.result.then(function(t){t&&e.activeModal.close(e.name)})}else this.activeModal.close(this.name)}}]),e}()).\u0275fac=function(e){return new(e||Bt)(pe.Pb(Ut.a),pe.Pb(Ut.c),pe.Pb(Lt))},Bt.\u0275cmp=pe.Jb({type:Bt,selectors:[["ng-component"]],decls:14,vars:2,consts:function(){return[[1,"modal-header"],[1,"modal-title"],$localize(c||(c=se([":@@saveLayout\u241f0e0d7b46d2a1f1738f5ae445085ce991f7d77b5c\u241f645214547829891254:Save Layout"]))),["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group"],[1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"disabled","click"],$localize(s||(s=se([":@@save\u241f52c9a103b812f258bcddc3d90a6e3f46871d25fe\u241f3768927257183755959:Save"]))),["type","button",1,"btn","btn-secondary",3,"click"],$localize(u||(u=se([":@@cancel\u241fd7b35c384aecd25a516200d6921836374613dfe7\u241f2159130950882492111:Cancel"])))]},template:function(e,t){1&e&&(pe.Ub(0,"div",0),pe.Ub(1,"h4",1),pe.Yb(2,2),pe.Tb(),pe.Ub(3,"button",3),pe.hc("click",function(){return t.activeModal.close()}),pe.Ub(4,"span",4),pe.Ec(5,"\xd7"),pe.Tb(),pe.Tb(),pe.Tb(),pe.Ub(6,"div",5),pe.Ub(7,"div",6),pe.Ub(8,"input",7),pe.hc("ngModelChange",function(e){return t.name=e}),pe.Tb(),pe.Tb(),pe.Tb(),pe.Ub(9,"div",8),pe.Ub(10,"button",9),pe.hc("click",function(){return t.saveLayout()}),pe.Yb(11,10),pe.Tb(),pe.Ub(12,"button",11),pe.hc("click",function(){return t.activeModal.close()}),pe.Yb(13,12),pe.Tb(),pe.Tb()),2&e&&(pe.Cb(8),pe.pc("ngModel",t.name),pe.Cb(2),pe.pc("disabled",!t.canSave()))},directives:[Tt.b,Tt.f,Tt.g],encapsulation:2}),Bt),qt=((Yt=function(){function e(t){me(this,e),this.activeModal=t}return he(e,[{key:"copy",value:function(e){e.select(),document.execCommand("copy")}}]),e}()).\u0275fac=function(e){return new(e||Yt)(pe.Pb(Ut.a))},Yt.\u0275cmp=pe.Jb({type:Yt,selectors:[["app-share-layout"]],inputs:{url:"url"},decls:16,vars:1,consts:function(){return[[1,"modal-header"],[1,"modal-title"],$localize(l||(l=se([":@@shareLayout\u241fb5a961d39bc348277bf18f5c11910cfb00de1649\u241f3989562479710642543:Share Layout"]))),["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"input-group"],["readonly","",1,"form-control",3,"value"],["urlInput",""],[1,"input-group-append"],["type","button",1,"btn","btn-sm","btn-outline-secondary",3,"click"],$localize(d||(d=se([":@@copy\u241f1979da7460819153e11d2078244645d94291b69c\u241f4323470180912194028:Copy"]))),[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],$localize(f||(f=se([":@@ok\u241fbe5c752b58791dd799bc5d5482d4351e06f18673\u241f8720977247725652816:Ok"])))]},template:function(e,t){if(1&e){var n=pe.Vb();pe.Ub(0,"div",0),pe.Ub(1,"h4",1),pe.Yb(2,2),pe.Tb(),pe.Ub(3,"button",3),pe.hc("click",function(){return t.activeModal.dismiss()}),pe.Ub(4,"span",4),pe.Ec(5,"\xd7"),pe.Tb(),pe.Tb(),pe.Tb(),pe.Ub(6,"div",5),pe.Ub(7,"div",6),pe.Qb(8,"input",7,8),pe.Ub(10,"div",9),pe.Ub(11,"button",10),pe.hc("click",function(){pe.xc(n);var e=pe.wc(9);return t.copy(e)}),pe.Yb(12,11),pe.Tb(),pe.Tb(),pe.Tb(),pe.Tb(),pe.Ub(13,"div",12),pe.Ub(14,"button",13),pe.hc("click",function(){return t.activeModal.close()}),pe.Yb(15,14),pe.Tb(),pe.Tb()}2&e&&(pe.Cb(8),pe.pc("value",t.url))},encapsulation:2}),Yt),Xt=le("o+DB"),Kt=function(){var e=function e(){me(this,e)};return e.default="default",e.argon="argon",e.teladi="teladi",e.paranid="paranid",e}(),Jt=le("iPnF"),Zt=le("0jqB"),en={argon:{race:Jt.a.argon,amount:400,consumption:[{ware:Zt.b.foodrations,amount:450},{ware:Zt.b.medicalsupplies,amount:270}]},teladi:{race:Jt.a.teladi,amount:400,consumption:[{ware:Zt.b.nostropoil,amount:228},{ware:Zt.b.medicalsupplies,amount:270}]},paranid:{race:Jt.a.paranid,amount:400,consumption:[{ware:Zt.b.sojahusk,amount:286},{ware:Zt.b.medicalsupplies,amount:270}]},split:{race:Jt.a.split,amount:400,consumption:[{ware:Zt.b.cheltmeat,amount:100},{ware:Zt.b.scruffinfruits,amount:140},{ware:Zt.b.medicalsupplies,amount:270}]},terran:{race:Jt.a.split,amount:400,consumption:[{ware:Zt.b.terranmre,amount:255},{ware:Zt.b.medicalsupplies,amount:270}]},get:function(e){return en[e]||en.argon}},tn=le("vmnB"),nn=function(){function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;me(this,e),this.wareService=t,this.moduleService=n,this.moduleId=o,this.count=i}return he(e,[{key:"moduleId",get:function(){return this._moduleId},set:function(e){e!=this._moduleId&&(this._moduleId=e,this.update())}},{key:"count",get:function(){return this._count},set:function(e){e!=this._count&&(this._count=e,this.update())}},{key:"update",value:function(){var e=this;if(this._moduleId){if(this.module=this.moduleService.getEntity(this.moduleId),this.needs=[],this.production=null,this.module.type==Xt.a.production){var t,n=this.module.product,o=3600/(t=null==this.module.makerRace?n.production.find(function(e){return e.method==Kt.default}):n.production.find(function(t){return t.method==e.module.makerRace.id})||n.production.find(function(e){return e.method==Kt.default})).time;this.production={amount:t.amount*o,ware:n,value:t},t.wares.forEach(function(t){var n=e.wareService.getEntity(t.ware);e.needs.push({amount:t.amount*o,ware:n})})}else if(this.module.type==Xt.a.habitation){var i=this.module.workForce.capacity,r=en.get(this.module.workForce.race.id);r.consumption.forEach(function(t){e.needs.push({amount:t.amount*i/r.amount,ware:t.ware})})}}else this.module=null,this.production=null,this.needs=[]}}]),e}(),on=function(){function e(){me(this,e)}return he(e,null,[{key:"calculate",value:function(e,t,n){var o=0==n||0==t?0:n/t;o>1&&(o=1);var i={};e.length>0&&(i=e.map(function(e){var t=e.needs.map(function(t){return{ware:t.ware,count:e.count,amount:-t.amount,efficiency:100,name:e.module.name,total:e.count*-t.amount}});if(e.production){var n=e.production.value.effects?e.production.value.effects.find(function(e){return e.type==tn.a.work}):null,i=null==n?1:1+n.product*o;t.push({ware:e.production.ware,count:e.count,amount:e.production.amount,efficiency:100*i,name:e.module.name,total:e.count*e.production.amount*i})}return t}).reduce(function(e,t){return e.concat(t)}).reduce(function(e,t){return e[t.ware.id]=e[t.ware.id]||[],e[t.ware.id].push(t),e},{}));var r=[];for(var a in i)if(i.hasOwnProperty(a)){var c=i[a],s=0;c.forEach(function(e){s+=e.total}),r.push({ware:c[0].ware,amount:s,items:c})}return r}}]),e}(),rn=le("9PR/"),an=function(e){return e[e.expense=0]="expense",e[e.product=1]="product",e}({}),cn=function(){function e(t,n,o,i,r){me(this,e),this.item=t,this.component=n,this.minPrice=o,this.maxPrice=i,this.items=r}return he(e,[{key:"module",get:function(){return this.item.module}},{key:"count",get:function(){return this.item.count}},{key:"price",get:function(){return this.item.count*(this.minPrice+(this.maxPrice-this.minPrice)*this.component.modulesResourcesPrice/100)}}]),e}(),sn=function(){function e(t,n,o){me(this,e),this.ware=t,this.amount=n,this.component=o}return he(e,[{key:"price",get:function(){return this.amount*(this.ware.price.min+(this.ware.price.max-this.ware.price.min)*this.component.modulesResourcesPrice/100)}}]),e}(),un=function(){function e(t,n,o){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;me(this,e),this.model=t,this.pricePercentage=n,this.priceType=o,this.warePrice=i}return he(e,[{key:"name",get:function(){return this.model.ware.name}},{key:"amount",get:function(){return this.model.amount}},{key:"price",get:function(){return null!=this.warePrice?0:this.model.ware.price.min+(this.model.ware.price.max-this.model.ware.price.min)*(this.priceType==an.expense?this.pricePercentage.resourcesPrice:this.pricePercentage.productsPrice)/100}}]),e}(),ln=((Gt=function(){function e(){me(this,e),this.partialWorkforceChanged=new Ce.a,this.partialWorkforce=0}return he(e,[{key:"setPartialWorkforce",value:function(e){this.partialWorkforce=e,this.partialWorkforceChanged.next(this.partialWorkforce)}},{key:"$partialWorkforce",get:function(){return this.partialWorkforce}}]),e}()).\u0275fac=function(e){return new(e||Gt)},Gt.\u0275prov=pe.Lb({token:Gt,factory:Gt.\u0275fac,providedIn:"root"}),Gt);function dn(e,t){1&e&&pe.Qb(0,"i",55)}function fn(e,t){1&e&&pe.Qb(0,"i",56)}function bn(e,t){if(1&e&&(pe.Ub(0,"tr",59),pe.Ub(1,"td",60),pe.Ec(2),pe.Tb(),pe.Ub(3,"td",11),pe.Ec(4),pe.kc(5,"number"),pe.Tb(),pe.Tb()),2&e){var n=t.$implicit;pe.Cb(2),pe.Hc("",n.count," x ",n.name,""),pe.Cb(2),pe.Gc("-",pe.mc(5,3,n.amount*n.count,"1.0-0"),"")}}function pn(e,t){1&e&&(pe.Ub(0,"tr",59),pe.Ub(1,"td",60),pe.Ec(2," 1 x Unknown Module "),pe.Tb(),pe.Ub(3,"td",11),pe.Ec(4,"-200"),pe.Tb(),pe.Tb())}function hn(e,t){if(1&e&&(pe.Sb(0),pe.Cc(1,bn,6,6,"tr",57),pe.Cc(2,pn,5,0,"tr",58),pe.Rb()),2&e){var n=pe.jc();pe.Cb(1),pe.pc("ngForOf",n.workforceNeeded),pe.Cb(1),pe.pc("ngIf",n.isHq)}}function mn(e,t){1&e&&pe.Qb(0,"i",55)}function gn(e,t){1&e&&pe.Qb(0,"i",56)}function vn(e,t){if(1&e&&(pe.Ub(0,"tr",30),pe.Ub(1,"td",60),pe.Ec(2),pe.Tb(),pe.Ub(3,"td",11),pe.Ec(4),pe.kc(5,"number"),pe.Tb(),pe.Tb()),2&e){var n=t.$implicit;pe.Cb(2),pe.Hc("",n.count," x ",n.name,""),pe.Cb(2),pe.Gc("+",pe.mc(5,3,n.amount*n.count,"1.0-0"),"")}}function yn(e,t){if(1&e&&(pe.Sb(0),pe.Cc(1,vn,6,6,"tr",61),pe.Rb()),2&e){var n=pe.jc();pe.Cb(1),pe.pc("ngForOf",n.workforceCapacity)}}function _n(e,t){1&e&&pe.Qb(0,"i",55)}function kn(e,t){1&e&&pe.Qb(0,"i",56)}var Cn=function(e,t){return{"text-danger":e,"text-warning":t}};function wn(e,t){if(1&e&&(pe.Ub(0,"tr",9),pe.Ub(1,"td",63),pe.Ec(2),pe.kc(3,"number"),pe.Tb(),pe.Ub(4,"td",11),pe.Ec(5),pe.kc(6,"number"),pe.Tb(),pe.Tb()),2&e){var n=t.$implicit;pe.pc("ngClass",pe.tc(10,Cn,n.price>0,0==n.price)),pe.Cb(2),pe.Hc("",pe.mc(3,4,n.amount,"1.0-0")," x ",n.name,""),pe.Cb(3),pe.Gc(" ",pe.mc(6,7,n.amount*n.price,"1.0-0")," ")}}function Tn(e,t){if(1&e&&(pe.Sb(0),pe.Cc(1,wn,7,13,"tr",62),pe.Rb()),2&e){var n=pe.jc();pe.Cb(1),pe.pc("ngForOf",n.resourcesNeeded)}}function Un(e,t){1&e&&pe.Qb(0,"i",55)}function xn(e,t){1&e&&pe.Qb(0,"i",56)}function Sn(e,t){if(1&e&&(pe.Ub(0,"tr",65),pe.Ub(1,"td",63),pe.Ec(2),pe.kc(3,"number"),pe.Tb(),pe.Ub(4,"td",11),pe.Ec(5),pe.kc(6,"number"),pe.Tb(),pe.Tb()),2&e){var n=t.$implicit;pe.Cb(2),pe.Hc("",pe.mc(3,3,n.amount,"1.0-0")," x ",n.name,""),pe.Cb(3),pe.Gc("+",pe.mc(6,6,n.amount*n.price,"1.0-0"),"")}}function Pn(e,t){if(1&e&&(pe.Sb(0),pe.Cc(1,Sn,7,9,"tr",64),pe.Rb()),2&e){var n=pe.jc();pe.Cb(1),pe.pc("ngForOf",n.resourcesProduced)}}function En(e,t){1&e&&(pe.Sb(0),pe.Ub(1,"span"),pe.Yb(2,66),pe.Tb(),pe.Rb())}function In(e,t){1&e&&(pe.Sb(0),pe.Ub(1,"span"),pe.Yb(2,67),pe.Tb(),pe.Rb())}function Dn(e,t){1&e&&(pe.Sb(0),pe.Ub(1,"span"),pe.Yb(2,68),pe.Tb(),pe.Rb())}function Mn(e,t){if(1&e&&(pe.Sb(0),pe.Ec(1),pe.Rb()),2&e){var n=pe.jc();pe.Cb(1),pe.Gc("",n.resourcesPrice,"%")}}function Rn(e,t){1&e&&(pe.Sb(0),pe.Ub(1,"span"),pe.Yb(2,69),pe.Tb(),pe.Rb())}function Ln(e,t){1&e&&(pe.Sb(0),pe.Ub(1,"span"),pe.Yb(2,70),pe.Tb(),pe.Rb())}function On(e,t){1&e&&(pe.Sb(0),pe.Ub(1,"span"),pe.Yb(2,71),pe.Tb(),pe.Rb())}function An(e,t){if(1&e&&(pe.Sb(0),pe.Ec(1),pe.Rb()),2&e){var n=pe.jc();pe.Cb(1),pe.Gc("",n.productsPrice,"%")}}function jn(e,t){1&e&&pe.Qb(0,"i",55)}function zn(e,t){1&e&&pe.Qb(0,"i",56)}function $n(e,t){if(1&e&&(pe.Ub(0,"tr"),pe.Ub(1,"td",63),pe.Ec(2),pe.Tb(),pe.Ub(3,"td",11),pe.Ec(4),pe.kc(5,"number"),pe.Tb(),pe.Tb()),2&e){var n=t.$implicit,o=pe.jc(2).$implicit;pe.Cb(2),pe.Hc("",o.count*n.amount," x ",n.ware.name,""),pe.Cb(2),pe.Gc(" ",pe.mc(5,3,o.count*n.price,"1.0-0")," ")}}function Fn(e,t){if(1&e&&(pe.Sb(0),pe.Cc(1,$n,6,6,"tr",50),pe.Rb()),2&e){var n=pe.jc().$implicit;pe.Cb(1),pe.pc("ngForOf",n.items)}}function Wn(e,t){if(1&e){var n=pe.Vb();pe.Sb(0),pe.Ub(1,"tr",6),pe.hc("click",function(){pe.xc(n);var e=t.$implicit;return pe.jc().toggleExpanded(e.module.id)}),pe.Ub(2,"td"),pe.Cc(3,jn,1,0,"i",7),pe.Cc(4,zn,1,0,"i",8),pe.Ec(5),pe.Tb(),pe.Ub(6,"td",11),pe.Ec(7),pe.kc(8,"number"),pe.Tb(),pe.Tb(),pe.Cc(9,Fn,2,1,"ng-container",12),pe.Rb()}if(2&e){var o=t.$implicit,i=pe.jc();pe.Cb(3),pe.pc("ngIf",!i.expandState[o.module.id]),pe.Cb(1),pe.pc("ngIf",i.expandState[o.module.id]),pe.Cb(1),pe.Hc(" ",o.count," x ",o.module.name," "),pe.Cb(2),pe.Gc(" ",pe.mc(8,6,o.price,"1.0-0")," "),pe.Cb(2),pe.pc("ngIf",i.expandState[o.module.id])}}function Yn(e,t){if(1&e&&(pe.Ub(0,"tr"),pe.Ub(1,"td",11),pe.Ec(2),pe.Tb(),pe.Ub(3,"td",11),pe.Ec(4),pe.kc(5,"number"),pe.Tb(),pe.Tb()),2&e){var n=t.$implicit;pe.Cb(2),pe.Fc(n.ware.name),pe.Cb(2),pe.Fc(pe.mc(5,2,n.value,"1.0-0"))}}function Bn(e,t){1&e&&(pe.Sb(0),pe.Ub(1,"span"),pe.Yb(2,72),pe.Tb(),pe.Rb())}function Nn(e,t){1&e&&(pe.Sb(0),pe.Ub(1,"span"),pe.Yb(2,73),pe.Tb(),pe.Rb())}function Gn(e,t){1&e&&(pe.Sb(0),pe.Ub(1,"span"),pe.Yb(2,74),pe.Tb(),pe.Rb())}function Hn(e,t){if(1&e&&(pe.Sb(0),pe.Ec(1),pe.Rb()),2&e){var n=pe.jc();pe.Cb(1),pe.Gc("",n.modulesResourcesPrice,"%")}}var Vn,Qn=function(e,t){return{"text-danger":e,"text-success":t}},qn=((Vn=function(){function e(t,n){me(this,e),this.wareService=t,this.stationSummaryService=n,this.expandState={},this.provideBasicResources=!1,this.provideAllResources=!1,this.isHq=!1,this.resourcesPrice=50,this.productsPrice=50,this.modulesResourcesPrice=50,this._totalWorkforce=0,this.totalWorkforceCapacity=0,this.partialWorkforce=0,this.workforceNeeded=[],this.workforceCapacity=[],this.resourcesNeeded=[],this.resourcesProduced=[],this.totalModuleResourceCosts=[],this.change=new pe.n}return he(e,[{key:"modules",get:function(){return this._modules},set:function(e){this._modules=e,this.update()}},{key:"totalWorkforce",get:function(){return this._totalWorkforce+(this.isHq?200:0)}},{key:"onChange",value:function(){this.update(),this.change.emit()}},{key:"update",value:function(){var t=this;if(this._totalWorkforce=0,this.workforceNeeded=[],this.workforceCapacity=[],this.resourcesNeeded=[],this.resourcesProduced=[],this.moduleCosts=[],null!=this.modules){this.modules.forEach(function(e){if(null!=e.module&&null!=e.module.workForce&&(null!=e.module.workForce.max&&(t._totalWorkforce+=e.count*e.module.workForce.max,t.workforceNeeded.push({amount:e.module.workForce.max,name:e.module.name,count:e.count})),null!=e.module.workForce.capacity&&t.workforceCapacity.push({amount:e.module.workForce.capacity,name:e.module.name,count:e.count})),null!=e.module){var n=t.getModuleCost(e);null!=n&&t.moduleCosts.push(n)}});var n=this.modules.reduce(function(e,t){return t.module&&t.module.workForce&&t.module.workForce.capacity?e+t.count*t.module.workForce.capacity:e},0);this.totalWorkforceCapacity!=n&&(this.totalWorkforceCapacity=n,this.partialWorkforce=n),this.stationSummaryService.setPartialWorkforce(this.partialWorkforce);var o=on.calculate(this.modules,this._totalWorkforce,this.partialWorkforce);o.sort(function(e,n){return t.wareService.compareWares(e.ware,n.ware)}),o.forEach(function(n){if(n.amount<0){var o=null;(t.provideAllResources||t.provideBasicResources&&e.basicResources.indexOf(n.ware.group)>=0)&&(o=0);var i=new un(n,t,an.expense,o);t.resourcesNeeded.push(i)}else if(n.amount>0){var r=new un(n,t,an.product);t.resourcesProduced.push(r)}}),this.totalModuleResourceCosts=[],this.moduleCosts.forEach(function(e){e.items.forEach(function(n){var o=t.totalModuleResourceCosts.find(function(e){return e.ware.id==n.ware.id});null==o?(o={ware:n.ware,value:e.count*n.amount},t.totalModuleResourceCosts.push(o)):o.value+=e.count*n.amount})})}}},{key:"totalExpenses",get:function(){var e=0;return this.resourcesNeeded.forEach(function(t){e+=t.amount*t.price}),e}},{key:"totalProfits",get:function(){var e=0;return this.resourcesProduced.forEach(function(t){e+=t.amount*t.price}),e}},{key:"totalModuleCost",get:function(){var e=0;return this.moduleCosts.forEach(function(t){e+=t.price}),e}},{key:"getModuleCost",value:function(e){var t=this,n=e.module.production[0];if(!n)return null;var o=0,i=0,r=[];return n.wares.forEach(function(e){var n=t.wareService.getEntity(e.ware);o+=n.price.min*e.amount,i+=n.price.max*e.amount,r.push(new sn(n,e.amount,t))}),new cn(e,this,o,i,r)}},{key:"toggleExpanded",value:function(e){this.expandState[e]=!this.expandState[e]}}]),e}()).basicResources=[rn.a.gases,rn.a.minerals,rn.a.ice],Vn.\u0275fac=function(e){return new(e||Vn)(pe.Pb($t.a),pe.Pb(ln))},Vn.\u0275cmp=pe.Jb({type:Vn,selectors:[["app-station-summary"]],inputs:{modules:"modules"},outputs:{change:"change"},decls:149,vars:67,consts:function(){return[[1,"table","table-sm","small","table-hover"],[1,"bg-light"],["scope","col"],$localize(b||(b=se([":@@workforce\u241f01587c6ea6d4de84678bb79ca36a98e5b2035a69\u241f8629714743305369533:Workforce"]))),["scope","col",1,"text-right"],$localize(p||(p=se([":@@value\u241f5049e204c14c648691ac775a64fb504467aeb549\u241f6555318547274416232:Value"]))),[1,"hover",3,"click"],["class","fa fa-angle-double-down",4,"ngIf"],["class","fa fa-angle-double-up",4,"ngIf"],[3,"ngClass"],$localize(h||(h=se([":@@neededWorkforce\u241fde4e36127e6ba50375480462b127a82b9a283f52\u241f8949269492548556387: Needed Workforce "]))),[1,"text-right"],[4,"ngIf"],$localize(m||(m=se([":@@workforceCapacity\u241fe748798c6cc9162c1874eeb9a0438b44fb321a28\u241f4450125586797900986: Workforce Capacity "]))),["colspan","2"],[1,"form-check"],["type","checkbox","id","is-hq",1,"form-check-input",3,"ngModel","ngModelChange"],["for","is-hq",1,"form-check-label"],$localize(g||(g=se([":@@isHeadquarters\u241fcbcbf5392150ff0aca9d5550a90b15bce99f72c4\u241f2674413591253327227:Headquarters (The HQ needs 200 workers for some reason)"]))),[1,"row"],[1,"form-group","col"],["for","workforce-slider"],$localize(v||(v=se([":@@actualWorkforce\u241fa8ac08e20bca1f38d1601def7b210b5eb6c05218\u241f7090424968850798877:Actual Workforce:"]))),["type","range","id","workforce-slider","min","0","step","1",1,"form-control-range","small",3,"max","ngModel","ngModelChange"],$localize(y||(y=se([":@@productionPerHour\u241f168e82fbbb21c0d8c5d5fcbda7f57c0b0561b8fb\u241f2159000720808656354:Production Per Hour"]))),$localize(_||(_=se([":@@amount\u241fdfc2fb58e2a04ed944a4bd80f0a2087775134068\u241f6533918067030990396:Amount"]))),[1,"hover","text-danger",3,"click"],$localize(k||(k=se([":@@expenses\u241f935174cb0d7a7607a0d8d587bfc133dabc0a3e5f\u241f3274702092887675568: Expenses"]))),[1,"hover","text-primary",3,"click"],$localize(C||(C=se([":@@production\u241f0f0ef5f1bb14e77852720f5e3bb8acbc48ff3155\u241f5052335382418789339: Production"]))),[1,"text-success"],[1,"fa","fa-line-chart"],$localize(w||(w=se([":@@profit\u241f8928d22ff8cfee2287d5682a2d091128f2b2555b\u241f2775162648346514817: Profit"]))),["type","checkbox","id","basic-resources",1,"form-check-input",3,"ngModel","ngModelChange"],["for","basic-resources",1,"form-check-label"],$localize(T||(T=se([":@@minersProvideBasicResources\u241f0c66bebfec7b7b9a1e8f9f095bebd9099a60aa5b\u241f6102675801466902911:Miners provide basic resources"]))),["type","checkbox","id","all-resources",1,"form-check-input",3,"ngModel","ngModelChange"],["for","all-resources",1,"form-check-label"],$localize(U||(U=se([":@@rovideAllResources\u241ff218655003d463664dc8a862a6167dd1a4854bdc\u241f8130704121672385920:Resources are provided by other stations"]))),["for","resources-price"],$localize(x||(x=se([":@@resourcePrice\u241fdf8a8f7573cffa06e6c48c72fdee089eea3a6971\u241f6120421684213850873:Resources Price:"]))),[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["type","range","id","resources-price","min","0","max","100","step","5",1,"form-control-range","small",3,"ngModel","ngModelChange"],["for","products-price"],$localize(S||(S=se([":@@productsPrice\u241f6e8b9812913e4903a1cb99fe61d145bafc0117d9\u241f2147362910958557897:Products Price:"]))),["type","range","id","products-price","min","0","max","100","step","5",1,"form-control-range","small",3,"ngModel","ngModelChange"],$localize(P||(P=se([":@@stationCosts\u241f1b27238e050fb724d4f9960b1960fbc70f943dad\u241f6689280018176731215:Station Costs"]))),$localize(E||(E=se([":@@amount\u241fdfc2fb58e2a04ed944a4bd80f0a2087775134068\u241f6533918067030990396:Amount"]))),[4,"ngFor","ngForOf"],$localize(I||(I=se([":@@total\u241fe657507a4e9ff27ce501080e9e0b93cf6811a185\u241f7349530031233006058:Total:"]))),["for","modules-resources-price"],$localize(D||(D=se([":@@resourcesPrice\u241fdf8a8f7573cffa06e6c48c72fdee089eea3a6971\u241f6120421684213850873:Resources Price:"]))),["type","range","id","modules-resources-price","min","0","max","100","step","5",1,"form-control-range","small",3,"ngModel","ngModelChange"],[1,"fa","fa-angle-double-down"],[1,"fa","fa-angle-double-up"],["class","text-danger",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"pl-4"],["class","text-success",4,"ngFor","ngForOf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"pl-5"],["class","text-primary",4,"ngFor","ngForOf"],[1,"text-primary"],$localize(M||(M=se([":@@min\u241f9abcd7c82643d60c22733470463f74e4a54bc069\u241f4912803901980915876:Min"]))),$localize(R||(R=se([":@@average\u241f578f3696ab5ffb8fc85da042cb38d898c9ca894b\u241f6685892931357659955:Average"]))),$localize(L||(L=se([":@@max\u241fc3ced4d162a0a55ee233a187ce7208ba5e922418\u241f3667949571823271511:Max"]))),$localize(O||(O=se([":@@min\u241f9abcd7c82643d60c22733470463f74e4a54bc069\u241f4912803901980915876:Min"]))),$localize(A||(A=se([":@@average\u241f578f3696ab5ffb8fc85da042cb38d898c9ca894b\u241f6685892931357659955:Average"]))),$localize(j||(j=se([":@@max\u241fc3ced4d162a0a55ee233a187ce7208ba5e922418\u241f3667949571823271511:Max"]))),$localize(z||(z=se([":@@min\u241f9abcd7c82643d60c22733470463f74e4a54bc069\u241f4912803901980915876:Min"]))),$localize($||($=se([":@@average\u241f578f3696ab5ffb8fc85da042cb38d898c9ca894b\u241f6685892931357659955:Average"]))),$localize(F||(F=se([":@@max\u241fc3ced4d162a0a55ee233a187ce7208ba5e922418\u241f3667949571823271511:Max"])))]},template:function(e,t){1&e&&(pe.Ub(0,"table",0),pe.Ub(1,"thead"),pe.Ub(2,"tr",1),pe.Ub(3,"th",2),pe.Yb(4,3),pe.Tb(),pe.Ub(5,"th",4),pe.Yb(6,5),pe.Tb(),pe.Tb(),pe.Tb(),pe.Ub(7,"tbody"),pe.Ub(8,"tr",6),pe.hc("click",function(){return t.toggleExpanded("totalWorkforce")}),pe.Ub(9,"td"),pe.Cc(10,dn,1,0,"i",7),pe.Cc(11,fn,1,0,"i",8),pe.Ub(12,"span",9),pe.Yb(13,10),pe.Tb(),pe.Tb(),pe.Ub(14,"td",11),pe.Ec(15),pe.kc(16,"number"),pe.Tb(),pe.Tb(),pe.Cc(17,hn,3,2,"ng-container",12),pe.Ub(18,"tr",6),pe.hc("click",function(){return t.toggleExpanded("totalWorkforceCapacity")}),pe.Ub(19,"td"),pe.Cc(20,mn,1,0,"i",7),pe.Cc(21,gn,1,0,"i",8),pe.Ub(22,"span",9),pe.Yb(23,13),pe.Tb(),pe.Tb(),pe.Ub(24,"td",11),pe.Ec(25),pe.kc(26,"number"),pe.Tb(),pe.Tb(),pe.Cc(27,yn,2,1,"ng-container",12),pe.Ub(28,"tr"),pe.Ub(29,"td",14),pe.Ub(30,"div",15),pe.Ub(31,"input",16),pe.hc("ngModelChange",function(e){return t.isHq=e})("ngModelChange",function(){return t.onChange()}),pe.Tb(),pe.Ub(32,"label",17),pe.Yb(33,18),pe.Tb(),pe.Tb(),pe.Tb(),pe.Tb(),pe.Ub(34,"tr"),pe.Ub(35,"td",14),pe.Ub(36,"div",19),pe.Ub(37,"div",20),pe.Ub(38,"label",21),pe.Ub(39,"span"),pe.Yb(40,22),pe.Tb(),pe.Ec(41,"\xa0"),pe.Ub(42,"strong"),pe.Ec(43),pe.Tb(),pe.Tb(),pe.Ub(44,"input",23),pe.hc("ngModelChange",function(e){return t.partialWorkforce=e})("ngModelChange",function(){return t.onChange()}),pe.Tb(),pe.Tb(),pe.Tb(),pe.Tb(),pe.Tb(),pe.Tb(),pe.Tb(),pe.Ub(45,"table",0),pe.Ub(46,"thead"),pe.Ub(47,"tr",1),pe.Ub(48,"th",2),pe.Yb(49,24),pe.Tb(),pe.Ub(50,"th",4),pe.Yb(51,25),pe.Tb(),pe.Tb(),pe.Tb(),pe.Ub(52,"tbody"),pe.Ub(53,"tr",26),pe.hc("click",function(){return t.toggleExpanded("totalExpenses")}),pe.Ub(54,"td"),pe.Cc(55,_n,1,0,"i",7),pe.Cc(56,kn,1,0,"i",8),pe.Ub(57,"span"),pe.Yb(58,27),pe.Tb(),pe.Tb(),pe.Ub(59,"td",11),pe.Ec(60),pe.kc(61,"number"),pe.Tb(),pe.Tb(),pe.Cc(62,Tn,2,1,"ng-container",12),pe.Ub(63,"tr",28),pe.hc("click",function(){return t.toggleExpanded("totalProfits")}),pe.Ub(64,"td"),pe.Cc(65,Un,1,0,"i",7),pe.Cc(66,xn,1,0,"i",8),pe.Ub(67,"span"),pe.Yb(68,29),pe.Tb(),pe.Tb(),pe.Ub(69,"td",11),pe.Ec(70),pe.kc(71,"number"),pe.Tb(),pe.Tb(),pe.Cc(72,Pn,2,1,"ng-container",12),pe.Ub(73,"tr",30),pe.Ub(74,"td"),pe.Qb(75,"i",31),pe.Ub(76,"strong"),pe.Yb(77,32),pe.Tb(),pe.Tb(),pe.Ub(78,"td",11),pe.Ub(79,"strong"),pe.Ec(80),pe.kc(81,"number"),pe.Tb(),pe.Tb(),pe.Tb(),pe.Ub(82,"tr"),pe.Ub(83,"td",14),pe.Ub(84,"div",15),pe.Ub(85,"input",33),pe.hc("ngModelChange",function(e){return t.provideBasicResources=e})("ngModelChange",function(){return t.onChange()}),pe.Tb(),pe.Ub(86,"label",34),pe.Yb(87,35),pe.Tb(),pe.Tb(),pe.Tb(),pe.Tb(),pe.Ub(88,"tr"),pe.Ub(89,"td",14),pe.Ub(90,"div",15),pe.Ub(91,"input",36),pe.hc("ngModelChange",function(e){return t.provideAllResources=e})("ngModelChange",function(){return t.onChange()}),pe.Tb(),pe.Ub(92,"label",37),pe.Yb(93,38),pe.Tb(),pe.Tb(),pe.Tb(),pe.Tb(),pe.Ub(94,"tr"),pe.Ub(95,"td",14),pe.Ub(96,"div",19),pe.Ub(97,"div",20),pe.Ub(98,"label",39),pe.Ub(99,"span"),pe.Yb(100,40),pe.Tb(),pe.Ec(101,"\xa0 "),pe.Ub(102,"strong",41),pe.Cc(103,En,3,0,"ng-container",42),pe.Cc(104,In,3,0,"ng-container",42),pe.Cc(105,Dn,3,0,"ng-container",42),pe.Cc(106,Mn,2,1,"ng-container",43),pe.Tb(),pe.Tb(),pe.Ub(107,"input",44),pe.hc("ngModelChange",function(e){return t.resourcesPrice=e})("ngModelChange",function(){return t.onChange()}),pe.Tb(),pe.Tb(),pe.Ub(108,"div",20),pe.Ub(109,"label",45),pe.Ub(110,"span"),pe.Yb(111,46),pe.Tb(),pe.Ec(112,"\xa0 "),pe.Ub(113,"strong",41),pe.Cc(114,Rn,3,0,"ng-container",42),pe.Cc(115,Ln,3,0,"ng-container",42),pe.Cc(116,On,3,0,"ng-container",42),pe.Cc(117,An,2,1,"ng-container",43),pe.Tb(),pe.Tb(),pe.Ub(118,"input",47),pe.hc("ngModelChange",function(e){return t.productsPrice=e})("ngModelChange",function(){return t.onChange()}),pe.Tb(),pe.Tb(),pe.Tb(),pe.Tb(),pe.Tb(),pe.Tb(),pe.Tb(),pe.Ub(119,"table",0),pe.Ub(120,"thead"),pe.Ub(121,"tr",1),pe.Ub(122,"th",2),pe.Yb(123,48),pe.Tb(),pe.Ub(124,"th",4),pe.Yb(125,49),pe.Tb(),pe.Tb(),pe.Tb(),pe.Ub(126,"tbody"),pe.Cc(127,Wn,10,9,"ng-container",50),pe.Ub(128,"tr"),pe.Ub(129,"th",11),pe.Yb(130,51),pe.Tb(),pe.Ub(131,"th",11),pe.Ec(132),pe.kc(133,"number"),pe.Tb(),pe.Tb(),pe.Cc(134,Yn,6,5,"tr",50),pe.Ub(135,"tr"),pe.Ub(136,"td",14),pe.Ub(137,"div",19),pe.Ub(138,"div",20),pe.Ub(139,"label",52),pe.Ub(140,"span"),pe.Yb(141,53),pe.Tb(),pe.Ec(142,"\xa0 "),pe.Ub(143,"strong",41),pe.Cc(144,Bn,3,0,"ng-container",42),pe.Cc(145,Nn,3,0,"ng-container",42),pe.Cc(146,Gn,3,0,"ng-container",42),pe.Cc(147,Hn,2,1,"ng-container",43),pe.Tb(),pe.Tb(),pe.Ub(148,"input",54),pe.hc("ngModelChange",function(e){return t.modulesResourcesPrice=e})("ngModelChange",function(){return t.onChange()}),pe.Tb(),pe.Tb(),pe.Tb(),pe.Tb(),pe.Tb(),pe.Tb(),pe.Tb()),2&e&&(pe.Cb(10),pe.pc("ngIf",!t.expandState.totalWorkforce),pe.Cb(1),pe.pc("ngIf",t.expandState.totalWorkforce),pe.Cb(1),pe.pc("ngClass",pe.tc(61,Qn,t.totalWorkforce>t.totalWorkforceCapacity,t.totalWorkforce<=t.totalWorkforceCapacity)),pe.Cb(3),pe.Fc(pe.mc(16,43,t.totalWorkforce,"1.0-0")),pe.Cb(2),pe.pc("ngIf",t.expandState.totalWorkforce),pe.Cb(3),pe.pc("ngIf",!t.expandState.totalWorkforceCapacity),pe.Cb(1),pe.pc("ngIf",t.expandState.totalWorkforceCapacity),pe.Cb(1),pe.pc("ngClass",pe.tc(64,Qn,t.totalWorkforce>t.totalWorkforceCapacity,t.totalWorkforce<=t.totalWorkforceCapacity)),pe.Cb(3),pe.Gc(" ",pe.mc(26,46,t.totalWorkforceCapacity,"1.0-0")," "),pe.Cb(2),pe.pc("ngIf",t.expandState.totalWorkforceCapacity),pe.Cb(4),pe.pc("ngModel",t.isHq),pe.Cb(12),pe.Fc(t.partialWorkforce),pe.Cb(1),pe.pc("max",t.totalWorkforceCapacity)("ngModel",t.partialWorkforce),pe.Cb(11),pe.pc("ngIf",!t.expandState.totalExpenses),pe.Cb(1),pe.pc("ngIf",t.expandState.totalExpenses),pe.Cb(4),pe.Fc(pe.mc(61,49,t.totalExpenses,"1.0-0")),pe.Cb(2),pe.pc("ngIf",t.expandState.totalExpenses),pe.Cb(3),pe.pc("ngIf",!t.expandState.totalProfits),pe.Cb(1),pe.pc("ngIf",t.expandState.totalProfits),pe.Cb(4),pe.Fc(pe.mc(71,52,t.totalProfits,"1.0-0")),pe.Cb(2),pe.pc("ngIf",t.expandState.totalProfits),pe.Cb(8),pe.Fc(pe.mc(81,55,t.totalProfits+t.totalExpenses,"1.0-0")),pe.Cb(5),pe.pc("ngModel",t.provideBasicResources),pe.Cb(6),pe.pc("ngModel",t.provideAllResources),pe.Cb(11),pe.pc("ngSwitch",t.resourcesPrice),pe.Cb(1),pe.pc("ngSwitchCase",0),pe.Cb(1),pe.pc("ngSwitchCase",50),pe.Cb(1),pe.pc("ngSwitchCase",100),pe.Cb(2),pe.pc("ngModel",t.resourcesPrice),pe.Cb(6),pe.pc("ngSwitch",t.productsPrice),pe.Cb(1),pe.pc("ngSwitchCase",0),pe.Cb(1),pe.pc("ngSwitchCase",50),pe.Cb(1),pe.pc("ngSwitchCase",100),pe.Cb(2),pe.pc("ngModel",t.productsPrice),pe.Cb(9),pe.pc("ngForOf",t.moduleCosts),pe.Cb(5),pe.Fc(pe.mc(133,58,t.totalModuleCost,"1.0-0")),pe.Cb(2),pe.pc("ngForOf",t.totalModuleResourceCosts),pe.Cb(9),pe.pc("ngSwitch",t.modulesResourcesPrice),pe.Cb(1),pe.pc("ngSwitchCase",0),pe.Cb(1),pe.pc("ngSwitchCase",50),pe.Cb(1),pe.pc("ngSwitchCase",100),pe.Cb(2),pe.pc("ngModel",t.modulesResourcesPrice))},directives:[ge.l,ge.j,Tt.a,Tt.f,Tt.g,Tt.j,Tt.b,ge.m,ge.n,ge.o,ge.k],pipes:[ge.d],encapsulation:2}),Vn),Xn=le("9QbX"),Kn=le("jhN1");function Jn(e,t){if(1&e){var n=pe.Vb();pe.Ub(0,"div",9),pe.hc("click",function(){pe.xc(n);var e=t.$implicit;return pe.jc(4).onClick(e)}),pe.Ub(1,"label"),pe.Ec(2),pe.Tb(),pe.Tb()}if(2&e){var o=t.$implicit;pe.Cb(2),pe.Fc(o.name)}}function Zn(e,t){if(1&e&&(pe.Ub(0,"div",6),pe.Ub(1,"label",7),pe.Ub(2,"b"),pe.Ec(3),pe.Tb(),pe.Tb(),pe.Cc(4,Jn,3,1,"div",8),pe.Tb()),2&e){var n=pe.jc().$implicit;pe.Cb(3),pe.Fc(n.name),pe.Cb(1),pe.pc("ngForOf",n.modules)}}function eo(e,t){if(1&e&&(pe.Sb(0),pe.Cc(1,Zn,5,2,"div",5),pe.Rb()),2&e){var n=t.$implicit;pe.Cb(1),pe.pc("ngIf",n.modules.length>0)}}function to(e,t){if(1&e){var n=pe.Vb();pe.Ub(0,"div",3),pe.hc("focus",function(){return pe.xc(n),pe.jc().onFocus()})("blur",function(){return pe.xc(n),pe.jc().onBlur()}),pe.Cc(1,eo,2,1,"ng-container",4),pe.Tb()}if(2&e){var o=pe.jc();pe.Cb(1),pe.pc("ngForOf",o.filteredGroups)}}var no,oo=((no=function(){function e(){me(this,e),this.id=null,this.groups=[],this.filteredGroups=[],this.selectModule=new pe.n,this.inputString="",this.visible=!1}return he(e,[{key:"ngOnInit",value:function(){this.filteredGroups=this.groups.map(function(e){return Object.assign({},e)}),this.setName()}},{key:"filterModules",value:function(e){for(var t=0;t<this.groups.length;t++)this.filteredGroups[t].modules=re(this.groups[t].modules.filter(function(t){return t.name.trim().toLowerCase().includes(e.trim().toLowerCase())}))}},{key:"changed",value:function(e){e?this.filterModules(e):this.filteredGroups=this.groups.map(function(e){return Object.assign({},e)})}},{key:"onFocus",value:function(){clearTimeout(this.timeout),this.filterModules(this.inputString),this.visible=!0}},{key:"onBlur",value:function(){var e=this;this.timeout=setTimeout(function(){e.setName(),e.visible=!1},100)}},{key:"onClick",value:function(e){this.inputString=e.name,this.filterModules(this.inputString),this.selectModule.emit(e.id),this.visible=!1}},{key:"setName",value:function(){var e=this;this.id&&this.groups.forEach(function(t){var n=t.modules.filter(function(t){return t.id===e.id})[0];n&&(e.inputString=n.name)})}}]),e}()).\u0275fac=function(e){return new(e||no)},no.\u0275cmp=pe.Jb({type:no,selectors:[["app-autocomplete"]],inputs:{id:"id",groups:"groups"},outputs:{selectModule:"selectModule"},decls:3,vars:2,consts:function(){return[[1,"autocomplete-container"],["type","search","placeholder",$localize(W||(W=se([":@@select\u241fd8b6e86ac30baad6123c1bc904f7b1c7553b6913\u241f3229851246134324776:( Select )"]))),1,"form-control","form-control-sm",3,"ngModel","ngModelChange","focus","blur"],["tabindex","0","class","autocomplete",3,"focus","blur",4,"ngIf"],["tabindex","0",1,"autocomplete",3,"focus","blur"],[4,"ngFor","ngForOf"],["class","autocomplete__group-container",4,"ngIf"],[1,"autocomplete__group-container"],[1,"autocomplete__group-title"],["class","autocomplete__group-item",3,"click",4,"ngFor","ngForOf"],[1,"autocomplete__group-item",3,"click"]]},template:function(e,t){1&e&&(pe.Ub(0,"div",0),pe.Ub(1,"input",1),pe.hc("ngModelChange",function(e){return t.inputString=e})("ngModelChange",function(e){return t.changed(e)})("focus",function(){return t.onFocus()})("blur",function(){return t.onBlur()}),pe.Tb(),pe.Cc(2,to,2,1,"div",2),pe.Tb()),2&e&&(pe.Cb(1),pe.pc("ngModel",t.inputString),pe.Cb(1),pe.pc("ngIf",t.visible))},directives:[Tt.b,Tt.f,Tt.g,ge.l,ge.k],styles:[".autocomplete-container[_ngcontent-%COMP%]{position:relative}.autocomplete[_ngcontent-%COMP%]{max-height:40vh;overflow:hidden;overflow-y:scroll;position:absolute;background-color:#fff;border-radius:.2rem;border:1px solid #ced4da;z-index:1}.autocomplete__group-title[_ngcontent-%COMP%]{color:rgba(0,0,0,.7);font-size:1.15em;padding-left:10px}.autocomplete__group-item[_ngcontent-%COMP%]{font-size:1.1em;padding-left:20px;padding-right:10px}.autocomplete__group-item[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.2);cursor:pointer}.autocomplete__group-item[_ngcontent-%COMP%]:hover   label[_ngcontent-%COMP%]{cursor:pointer}label[_ngcontent-%COMP%]{margin:0}input[type=search][_ngcontent-%COMP%]::-webkit-search-cancel-button{-webkit-appearance:searchfield-cancel-button}"]}),no);function io(e,t){if(1&e&&(pe.Ub(0,"div"),pe.Ec(1),pe.Tb()),2&e){var n=pe.jc().$implicit;pe.Cb(1),pe.Gc(" ",n.module.name," ")}}function ro(e,t){if(1&e){var n=pe.Vb();pe.Ub(0,"tr",15),pe.Ub(1,"td"),pe.Cc(2,io,2,1,"div",16),pe.Ub(3,"div",17),pe.Ub(4,"app-autocomplete",18),pe.hc("selectModule",function(e){pe.xc(n);var o=t.$implicit;return pe.jc().onSelectModule(e,o)}),pe.Tb(),pe.Tb(),pe.Tb(),pe.Ub(5,"td"),pe.Ub(6,"div",17),pe.Ub(7,"input",19),pe.hc("ngModelChange",function(e){return t.$implicit.count=e})("ngModelChange",function(){return pe.xc(n),pe.jc().onChange()}),pe.Tb(),pe.Tb(),pe.Tb(),pe.Ub(8,"td"),pe.Qb(9,"i",20),pe.Tb(),pe.Ub(10,"td"),pe.Ub(11,"i",21),pe.hc("click",function(){pe.xc(n);var e=t.$implicit;return pe.jc().removeModule(e)}),pe.Tb(),pe.Tb(),pe.Tb()}if(2&e){var o=t.$implicit,i=pe.jc();pe.Cb(4),pe.pc("id",o.moduleId)("groups",i.wareGroups),pe.Cb(3),pe.pc("ngModel",o.count)}}var ao,co=((ao=function(){function e(t,n){me(this,e),this.moduleService=t,this.wareService=n,this.change=new pe.n}return he(e,[{key:"modules",get:function(){return this._modules},set:function(e){this._modules=e}},{key:"ngOnInit",value:function(){var e=this,t=this.moduleService.getModulesByType(Xt.a.production).reduce(function(e,t){return e[t.product.group.id]=e[t.product.group.id]||{name:t.product.group.name,group:t.product.group,modules:[]},e[t.product.group.id].modules.push(t),e},[]);this.wareGroups=Object.keys(t).map(function(e){return t[e]}).sort(function(t,n){return e.wareService.compareGroups(t.group,n.group)}),this.wareGroups.push({name:Xt.a.habitation,modules:this.moduleService.getModulesByType(Xt.a.habitation)}),this.wareGroups.push({name:Xt.a.buildmodule,modules:this.moduleService.getModulesByType(Xt.a.buildmodule)}),this.wareGroups.push({name:Xt.a.dockarea,modules:this.moduleService.getModulesByType(Xt.a.dockarea)}),this.wareGroups.push({name:Xt.a.pier,modules:this.moduleService.getModulesByType(Xt.a.pier)}),this.wareGroups.push({name:Xt.a.storage,modules:this.moduleService.getModulesByType(Xt.a.storage)}),this.wareGroups.push({name:Xt.a.defencemodule,modules:this.moduleService.getModulesByType(Xt.a.defencemodule)})}},{key:"removeModule",value:function(e){var t=this.modules.indexOf(e);t>=0&&(this.modules.splice(t,1),this.onChange())}},{key:"addModule",value:function(){this.modules.push(new nn(this.wareService,this.moduleService))}},{key:"onChange",value:function(){this.change.emit()}},{key:"backfillModules",value:function(){for(var e=this;;){var t,n=on.calculate(this.modules,0,0),o=!1,i=this.modules,r=ie(n);try{var a=function(){var n=t.value;if(n.amount>=0)return"continue";var r=e.moduleService.getModuleByWare(n.ware.id);if(null==r)return"continue";o=!0;var a=r.product.production.find(function(e){return"default"==e.method}),c=Math.ceil(-n.amount/(a.amount*(3600/a.time))),s=i.find(function(e){var t;return(null===(t=e.module)||void 0===t?void 0:t.id)==r.id});null==s?i.push(new nn(e.wareService,e.moduleService,r.id,c)):s.count+=c};for(r.s();!(t=r.n()).done;)a()}catch(c){r.e(c)}finally{r.f()}if(!o)break}this.onChange()}},{key:"onSelectModule",value:function(e,t){this.modules[this.modules.indexOf(t)].moduleId=e,this.onChange()}},{key:"drop",value:function(e){lt(this._modules,e.previousIndex,e.currentIndex)}}]),e}()).\u0275fac=function(e){return new(e||ao)(pe.Pb(Mt.a),pe.Pb($t.a))},ao.\u0275cmp=pe.Jb({type:ao,selectors:[["app-station-modules"]],inputs:{modules:"modules"},outputs:{change:"change"},decls:25,vars:1,consts:function(){return[[1,"table","table-sm","table-hover","small"],[1,"bg-light"],["scope","col"],$localize(Y||(Y=se([":@@module\u241fc10deee5463bd5458eca86cc2e4a2b87daf41bf1\u241f1867992058937397585:Module"]))),$localize(B||(B=se([":@@count\u241f06412bce0f4fe4311193e9763666089bf9d980da\u241f8177873832400820695:Count"]))),["aria-hidden","true",1,"fa","fa-ellipsis-v"],["aria-hidden","true",1,"fa","fa-trash"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","","cdkDragBoundary",".table",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],$localize(N||(N=se([":@@addModule\u241f599b7dcf22f4392a9f07d49c0d53b783c302f5df\u241f6979330132409506308:",":START_ITALIC_TEXT:",":CLOSE_ITALIC_TEXT:\xa0Add Module "])),"\ufffd#18\ufffd","\ufffd/#18\ufffd"),[1,"fa","fa-plus-square"],["type","button",1,"btn","btn-sm","btn-info",3,"click"],[1,"fa","fa-list"],$localize(G||(G=se([":@@backfillModules\u241f0e3c397fdfb60cabff4cfed415f583c55745074c\u241f2269073296993820107:Autofill Modules"]))),["cdkDrag","","cdkDragBoundary",".table"],[4,"cdkDragPreview"],[1,"form-group"],[3,"id","groups","selectModule"],["type","number","placeholder","Module Count","min","0",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["cdkDragHandle","",1,"fa","fa-ellipsis-v","move"],["aria-hidden","true",1,"fa","fa-trash","hover",3,"click"]]},template:function(e,t){1&e&&(pe.Ub(0,"table",0),pe.Ub(1,"thead"),pe.Ub(2,"tr",1),pe.Ub(3,"th",2),pe.Yb(4,3),pe.Tb(),pe.Ub(5,"th",2),pe.Yb(6,4),pe.Tb(),pe.Ub(7,"th",2),pe.Qb(8,"i",5),pe.Tb(),pe.Ub(9,"th",2),pe.Qb(10,"i",6),pe.Tb(),pe.Tb(),pe.Tb(),pe.Ub(11,"tbody",7),pe.hc("cdkDropListDropped",function(e){return t.drop(e)}),pe.Cc(12,ro,12,3,"tr",8),pe.Tb(),pe.Ub(13,"tfoot"),pe.Ub(14,"tr"),pe.Ub(15,"th"),pe.Ub(16,"button",9),pe.hc("click",function(){return t.addModule()}),pe.cc(17,10),pe.Qb(18,"i",11),pe.ac(),pe.Tb(),pe.Ec(19,"\xa0 "),pe.Ub(20,"button",12),pe.hc("click",function(){return t.backfillModules()}),pe.Qb(21,"i",13),pe.Ec(22,"\xa0"),pe.Ub(23,"span"),pe.Yb(24,14),pe.Tb(),pe.Tb(),pe.Tb(),pe.Tb(),pe.Tb(),pe.Tb()),2&e&&(pe.Cb(12),pe.pc("ngForOf",t.modules))},directives:[mt,ge.k,ct,Ze,oo,Tt.i,Tt.b,Tt.f,Tt.g,Ke],styles:[".cdk-drag-preview[_ngcontent-%COMP%]{background-color:#fff;padding:20px;box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.move[_ngcontent-%COMP%]{cursor:move}"]}),ao);function so(e,t){1&e&&pe.Qb(0,"i",13)}function uo(e,t){1&e&&pe.Qb(0,"i",14)}function lo(e,t){if(1&e&&(pe.Sb(0),pe.Ub(1,"span"),pe.Yb(2,18),pe.Tb(),pe.Ec(3,"\xa0"),pe.Ub(4,"strong"),pe.Ec(5),pe.kc(6,"number"),pe.Tb(),pe.Ec(7,"\xa0"),pe.Ub(8,"span"),pe.Yb(9,19),pe.Tb(),pe.Rb()),2&e){var n=pe.jc().$implicit;pe.Cb(5),pe.Gc("",pe.mc(6,1,n.efficiency,"1.0-0"),"%")}}var fo=function(e,t){return{"text-danger":e,"text-success":t}};function bo(e,t){if(1&e&&(pe.Ub(0,"tr",10),pe.Ub(1,"td",16),pe.Ub(2,"strong"),pe.Ec(3),pe.Tb(),pe.Ec(4," x "),pe.Ub(5,"strong"),pe.Ec(6),pe.Tb(),pe.Cc(7,lo,10,4,"ng-container",12),pe.Tb(),pe.Ub(8,"td",17),pe.Ec(9),pe.kc(10,"number"),pe.Tb(),pe.Tb()),2&e){var n=t.$implicit;pe.pc("ngClass",pe.tc(8,fo,n.total<0,n.total>0)),pe.Cb(3),pe.Fc(n.count),pe.Cb(3),pe.Fc(n.name),pe.Cb(1),pe.pc("ngIf",n.total>0),pe.Cb(2),pe.Fc(pe.mc(10,5,n.total,"1.0-0"))}}function po(e,t){if(1&e&&(pe.Sb(0),pe.Cc(1,bo,11,11,"tr",15),pe.Rb()),2&e){var n=pe.jc().$implicit;pe.Cb(1),pe.pc("ngForOf",n.items)}}function ho(e,t){if(1&e){var n=pe.Vb();pe.Sb(0),pe.Ub(1,"tr",7),pe.hc("click",function(){pe.xc(n);var e=t.$implicit;return pe.jc().toggleExpanded(e)}),pe.Ub(2,"td"),pe.Cc(3,so,1,0,"i",8),pe.Cc(4,uo,1,0,"i",9),pe.Ub(5,"span",10),pe.Ec(6),pe.Tb(),pe.Tb(),pe.Ub(7,"td",11),pe.Ec(8),pe.kc(9,"number"),pe.Tb(),pe.Tb(),pe.Cc(10,po,2,1,"ng-container",12),pe.Rb()}if(2&e){var o=t.$implicit;pe.Cb(3),pe.pc("ngIf",!o.expanded),pe.Cb(1),pe.pc("ngIf",o.expanded),pe.Cb(1),pe.pc("ngClass",pe.tc(10,fo,o.amount<0,o.amount>0)),pe.Cb(1),pe.Gc(" ",o.ware.name,""),pe.Cb(1),pe.pc("ngClass",pe.tc(13,fo,o.amount<0,o.amount>0)),pe.Cb(1),pe.Fc(pe.mc(9,7,o.amount,"1.0-0")),pe.Cb(2),pe.pc("ngIf",o.expanded)}}var mo,go=((mo=function(){function e(t,n){var o=this;me(this,e),this.wareService=t,this.stationSummaryService=n,this.expandState={},this.totalWorkforce=0,this.totalWorkforceCapacity=0,this.partialWorkforce=0,this.resources=[],this.workforceSubscription=this.stationSummaryService.partialWorkforceChanged.subscribe(function(e){o.partialWorkforce=e,o.update()})}return he(e,[{key:"modules",get:function(){return this._modules},set:function(e){this._modules=e,this.update()}},{key:"ngOnInit",value:function(){}},{key:"toggleExpanded",value:function(e){e.expanded=!e.expanded,this.expandState[e.ware.id]=e.expanded}},{key:"update",value:function(){var e=this;if(this.totalWorkforce=0,null!=this.modules){this.totalWorkforce=this.modules.reduce(function(e,t){return t.module&&t.module.workForce&&t.module.workForce.max?e+t.count*t.module.workForce.max:e},0);var t=this.modules.reduce(function(e,t){return t.module&&t.module.workForce&&t.module.workForce.capacity?e+t.count*t.module.workForce.capacity:e},0);this.totalWorkforceCapacity!=t&&(this.totalWorkforceCapacity=t,this.partialWorkforce=t),this.resources=on.calculate(this.modules,this.totalWorkforce,this.partialWorkforce),this.resources.forEach(function(t){t.expanded=e.expandState[t.items[0].ware.id]}),this.resources.sort(function(t,n){return e.wareService.compareWares(t.ware,n.ware)})}}},{key:"ngOnDestroy",value:function(){this.workforceSubscription.unsubscribe()}}]),e}()).\u0275fac=function(e){return new(e||mo)(pe.Pb($t.a),pe.Pb(ln))},mo.\u0275cmp=pe.Jb({type:mo,selectors:[["app-station-resources"]],inputs:{modules:"modules"},decls:9,vars:1,consts:function(){return[[1,"table","table-sm","small"],[1,"bg-light"],["scope","col"],$localize(H||(H=se([":@@resources\u241fffde342dc48f0b074d3dbcbb2f665216a2dd3deb\u241f1664620352147673062:Resource"]))),["scope","col",1,"text-right"],$localize(V||(V=se([":@@amount\u241fdfc2fb58e2a04ed944a4bd80f0a2087775134068\u241f6533918067030990396:Amount"]))),[4,"ngFor","ngForOf"],[1,"hover",3,"click"],["class","fa fa-angle-double-down",4,"ngIf"],["class","fa fa-angle-double-up",4,"ngIf"],[3,"ngClass"],[1,"text-right",3,"ngClass"],[4,"ngIf"],[1,"fa","fa-angle-double-down"],[1,"fa","fa-angle-double-up"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"pl-4"],[1,"text-right"],$localize(Q||(Q=se([":@@at\u241f100f1176cd594389e97bb60c1b909d45f6f585e9\u241f6900612748392196790: at"]))),$localize(q||(q=se([":@@efficiency\u241f72deae4afe0bd3bf2443477fe56a76c5eb05c8b2\u241f8891644733531320653:efficiency"])))]},template:function(e,t){1&e&&(pe.Ub(0,"table",0),pe.Ub(1,"thead"),pe.Ub(2,"tr",1),pe.Ub(3,"th",2),pe.Yb(4,3),pe.Tb(),pe.Ub(5,"th",4),pe.Yb(6,5),pe.Tb(),pe.Tb(),pe.Tb(),pe.Ub(7,"tbody"),pe.Cc(8,ho,11,16,"ng-container",6),pe.Tb(),pe.Tb()),2&e&&(pe.Cb(8),pe.pc("ngForOf",t.resources))},directives:[ge.k,ge.l,ge.j],pipes:[ge.d],encapsulation:2}),mo);function vo(e,t){if(1&e){var n=pe.Vb();pe.Ub(0,"div"),pe.Qb(1,"span",2),pe.Ub(2,"button",3),pe.hc("click",function(){pe.xc(n);var e=t.$implicit;return pe.jc(2).close(e)}),pe.Ub(3,"span",4),pe.Ec(4,"\xd7"),pe.Tb(),pe.Tb(),pe.Tb()}if(2&e){var o=t.$implicit;pe.Fb("alert alert-",o.type,""),pe.Cb(1),pe.pc("innerHTML",o.content,pe.yc)}}function yo(e,t){if(1&e&&(pe.Ub(0,"div"),pe.Cc(1,vo,5,4,"div",1),pe.Tb()),2&e){var n=pe.jc();pe.Cb(1),pe.pc("ngForOf",n.messages)}}var _o,ko=((_o=function(){function e(){me(this,e)}return he(e,[{key:"close",value:function(e){var t=this.messages.indexOf(e);t>=0&&this.messages.splice(t,1)}}]),e}()).\u0275fac=function(e){return new(e||_o)},_o.\u0275cmp=pe.Jb({type:_o,selectors:[["app-messages"]],inputs:{messages:"messages"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"class",4,"ngFor","ngForOf"],[3,"innerHTML"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"]],template:function(e,t){1&e&&pe.Cc(0,yo,2,1,"div",0),2&e&&pe.pc("ngIf",t.messages&&t.messages.length)},directives:[ge.l,ge.k],encapsulation:2}),_o),Co=["stationResources","stationSummary"];function wo(e,t){if(1&e&&(pe.Ub(0,"div",18),pe.Ub(1,"div",29),pe.Qb(2,"app-messages",30),pe.Tb(),pe.Tb()),2&e){var n=pe.jc();pe.Cb(2),pe.pc("messages",n.messages)}}function To(e,t){1&e&&(pe.Ub(0,"span"),pe.Yb(1,31),pe.Tb())}function Uo(e,t){if(1&e&&(pe.Ub(0,"span",32),pe.Ec(1),pe.Tb()),2&e){var n=pe.jc();pe.Cb(1),pe.Fc(n.layout.name)}}var xo,So,Po,Eo=((Po=function(e){ue(n,e);var t=de(n);function n(e,o,i,r,a,c){var s;return me(this,n),(s=t.call(this)).modal=e,s.route=o,s.layoutService=i,s.titleService=r,s.wareService=a,s.moduleService=c,s.messages=[],s.modules=[],s}return he(n,[{key:"ngOnInit",value:function(){var e=this;this.titleService.setTitle("".concat(Xn.a," - Station Calculator")),this.route.queryParams.pipe(Object(Ae.a)(this.onDestroy)).subscribe(function(t){if(t.l)try{var n=t.l.replace(/-/g,"=").replace(/,/g,"&"),o=At.parse(n);e.modules=o.map(function(t){return new nn(e.wareService,e.moduleService,t.module,t.count)})}catch(i){console.log(i)}}),0===this.modules.length&&this.modules.push(new nn(this.wareService,this.moduleService))}},{key:"onChange",value:function(){this.components.forEach(function(e){e.update()})}},{key:"shareLayout",value:function(){var e=this.modal.open(qt),t=this.modules.filter(function(e){return e.count>0&&e.moduleId}).map(function(e){return{module:e.moduleId,count:e.count}}),n=At.stringify(t).replace(/=/g,"-").replace(/&/g,","),o=window.location.href.split("?")[0];e.componentInstance.url="".concat(o,"?l=").concat(n)}},{key:"saveLayoutAs",value:function(){var e=this;this.modal.open(Qt).result.then(function(t){t&&(e.layout={name:t,resourcesPrice:e.summaryComponent.resourcesPrice,productsPrice:e.summaryComponent.productsPrice,modulesResourcesPrice:e.summaryComponent.modulesResourcesPrice,provideBasicResources:e.summaryComponent.provideBasicResources,provideAllResources:e.summaryComponent.provideAllResources,isHeadquarters:e.summaryComponent.isHq,config:e.getModuleConfig()},e.layoutService.saveLayout(e.layout),e.messages.push({type:zt.success,content:"<strong>".concat(t,"</strong> successfully saved.")}))})}},{key:"saveLayout",value:function(){this.layout&&this.layout.name?(this.layout.config=this.getModuleConfig(),this.layout.resourcesPrice=this.summaryComponent.resourcesPrice,this.layout.productsPrice=this.summaryComponent.productsPrice,this.layout.modulesResourcesPrice=this.summaryComponent.modulesResourcesPrice,this.layout.provideBasicResources=this.summaryComponent.provideBasicResources,this.layout.provideAllResources=this.summaryComponent.provideAllResources,this.layout.isHeadquarters=this.summaryComponent.isHq,this.layoutService.saveLayout(this.layout),this.messages.push({type:zt.success,content:"<strong>".concat(this.layout.name,"</strong> successfully saved.")})):this.saveLayoutAs()}},{key:"newLayout",value:function(){this.layout={name:null,config:[{moduleId:"",count:1}]},this.loadLayoutInternal(this.layout)}},{key:"loadLayout",value:function(){var e=this;this.modal.open(Vt).result.then(function(t){if(t){var n=e.layoutService.getLayout(t.layoutName);if(n)if(t.type==Ht.load)e.layout=n,e.loadLayoutInternal(n);else if(t.type==Ht.add){var o=e.modules.concat([]);e.getModules(n.config).forEach(function(e){var t=o.find(function(t){return t.moduleId==e.moduleId});null==t?o.push(e):t.count+=e.count}),e.modules=o}}})}},{key:"loadLayoutInternal",value:function(e){this.modules=this.getModules(e.config),this.summaryComponent.productsPrice=null==e.productsPrice?50:e.productsPrice,this.summaryComponent.modulesResourcesPrice=null==e.modulesResourcesPrice?50:e.modulesResourcesPrice,this.summaryComponent.resourcesPrice=null==e.resourcesPrice?50:e.resourcesPrice,this.summaryComponent.provideBasicResources=e.provideBasicResources,this.summaryComponent.provideAllResources=e.provideAllResources,this.summaryComponent.isHq=e.isHeadquarters}},{key:"getModuleConfig",value:function(){return this.modules.map(function(e){return{moduleId:e.moduleId,count:e.count}})}},{key:"getModules",value:function(e){var t=this;return e.map(function(e){return new nn(t.wareService,t.moduleService,e.moduleId,e.count)})}}]),n}(jt.a)).\u0275fac=function(e){return new(e||Po)(pe.Pb(Ut.c),pe.Pb(Ot.a),pe.Pb(Lt),pe.Pb(Kn.c),pe.Pb($t.a),pe.Pb(Mt.a))},Po.\u0275cmp=pe.Jb({type:Po,selectors:[["app-station-calculator"]],viewQuery:function(e,t){var n;1&e&&(pe.Ic(qn,3),pe.Ic(Co,1)),2&e&&(pe.vc(n=pe.ic())&&(t.summaryComponent=n.first),pe.vc(n=pe.ic())&&(t.components=n))},features:[pe.zb],decls:51,vars:6,consts:function(){return[[1,"row","content-row"],[1,"col-md-12"],[1,"card","shadow"],[1,"card-header","shadow-sm"],["type","button",1,"btn","btn-sm","btn-info",3,"click"],[1,"fa","fa-file"],$localize(X||(X=se([":@@newLayout\u241fd81f00c85d3b507f3e3d78bfc617a2c66e028391\u241f5280218112746407598:New"]))),["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-save"],$localize(K||(K=se([":@@save\u241f52c9a103b812f258bcddc3d90a6e3f46871d25fe\u241f3768927257183755959:Save"]))),$localize(J||(J=se([":@@saveAs\u241ff66cea314d7187ef5537d0509308d585f17e35b2\u241f2939714947607368087:Save As"]))),[1,"fa","fa-folder-open"],$localize(Z||(Z=se([":@@load\u241f8d7fb36ea2bff6fd8a53c1676d45e63ab624ad16\u241f9131913350495870905:Load"]))),["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fa","fa-share-square"],$localize(ee||(ee=se([":@@share\u241f0bd8b27f60a1f098a53e06328426d818e3508ff9\u241f7419704019640008953:Share"]))),[1,"card-body"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-4","col-sm-12"],[1,"card-title"],[4,"ngIf"],["class","text-primary",4,"ngIf"],[3,"modules","change"],$localize(te||(te=se([":@@stationResources\u241fbc00e11a84862a27908d979767db65037ae21c85\u241f5419514625105285324:Station Resources"]))),[3,"modules"],["stationResources",""],$localize(ne||(ne=se([":@@stationSummary\u241fd9e2fdc810ccea9a7b3aa8808ea989b83dc6c241\u241f7444405062965257311:Station Summary"]))),["stationSummary",""],[1,"col"],[3,"messages"],$localize(oe||(oe=se([":@@stationModules\u241fd2ac665afaeba38e930d32fd4af6e10aebdc6bb7\u241f9207116553076891214:Station Modules"]))),[1,"text-primary"]]},template:function(e,t){1&e&&(pe.Ub(0,"div",0),pe.Ub(1,"div",1),pe.Ub(2,"div",2),pe.Ub(3,"div",3),pe.Ub(4,"button",4),pe.hc("click",function(){return t.newLayout()}),pe.Qb(5,"i",5),pe.Ec(6,"\xa0"),pe.Ub(7,"span"),pe.Yb(8,6),pe.Tb(),pe.Tb(),pe.Ec(9,"\xa0 "),pe.Ub(10,"button",7),pe.hc("click",function(){return t.saveLayout()}),pe.Qb(11,"i",8),pe.Ec(12,"\xa0"),pe.Ub(13,"span"),pe.Yb(14,9),pe.Tb(),pe.Tb(),pe.Ec(15,"\xa0 "),pe.Ub(16,"button",7),pe.hc("click",function(){return t.saveLayoutAs()}),pe.Qb(17,"i",8),pe.Ec(18,"\xa0"),pe.Ub(19,"span"),pe.Yb(20,10),pe.Tb(),pe.Tb(),pe.Ec(21,"\xa0 "),pe.Ub(22,"button",4),pe.hc("click",function(){return t.loadLayout()}),pe.Qb(23,"i",11),pe.Ec(24,"\xa0"),pe.Ub(25,"span"),pe.Yb(26,12),pe.Tb(),pe.Tb(),pe.Ec(27,"\xa0 "),pe.Ub(28,"button",13),pe.hc("click",function(){return t.shareLayout()}),pe.Qb(29,"i",14),pe.Ec(30,"\xa0"),pe.Ub(31,"span"),pe.Yb(32,15),pe.Tb(),pe.Tb(),pe.Tb(),pe.Ub(33,"div",16),pe.Cc(34,wo,3,1,"div",17),pe.Ub(35,"div",18),pe.Ub(36,"div",19),pe.Ub(37,"h6",20),pe.Cc(38,To,2,0,"span",21),pe.Cc(39,Uo,2,1,"span",22),pe.Tb(),pe.Ub(40,"app-station-modules",23),pe.hc("change",function(){return t.onChange()}),pe.Tb(),pe.Tb(),pe.Ub(41,"div",19),pe.Ub(42,"h6",20),pe.Yb(43,24),pe.Tb(),pe.Qb(44,"app-station-resources",25,26),pe.Tb(),pe.Ub(46,"div",19),pe.Ub(47,"h6",20),pe.Yb(48,27),pe.Tb(),pe.Qb(49,"app-station-summary",25,28),pe.Tb(),pe.Tb(),pe.Tb(),pe.Tb(),pe.Tb(),pe.Tb()),2&e&&(pe.Cb(34),pe.pc("ngIf",t.messages.length),pe.Cb(4),pe.pc("ngIf",!t.layout),pe.Cb(1),pe.pc("ngIf",t.layout),pe.Cb(1),pe.pc("modules",t.modules),pe.Cb(4),pe.pc("modules",t.modules),pe.Cb(5),pe.pc("modules",t.modules))},directives:[ge.l,co,go,qn,ko],encapsulation:2}),Po),Io=((So=function e(){me(this,e)}).\u0275fac=function(e){return new(e||So)},So.\u0275mod=pe.Nb({type:So}),So.\u0275inj=pe.Mb({imports:[[Ot.f.forChild([{path:"",component:Eo}])],Ot.f]}),So),Do=((xo=function e(){me(this,e)}).\u0275fac=function(e){return new(e||xo)},xo.\u0275mod=pe.Nb({type:xo}),xo.\u0275inj=pe.Mb({providers:[Lt],imports:[[Ut.d,ge.b,Tt.c,xt.a,Io,wt]]}),xo)}}])}();