(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{Jclc:function(e,t,o){"use strict";var i=/([=:@$/])/g,n=/([&;/])/g,r=/[=:@$]/,s=/[&;]/;function c(e,t){return encodeURI(e.replace(t,"/$1"))}e.exports={stringify:function e(t,o){if(!o)return function(e){return"string"==typeof e?e.replace(/;+$/g,""):e}(e(t,!0));if("number"==typeof t||!0===t||!1===t||null===t)return":"+t;var r=[];if(t instanceof Array){for(var s=0;s<t.length;++s)r.push(void 0===t[s]?":null":e(t[s],!0));return"@"+r.join("&")+";"}if("object"==typeof t){for(var a in t){var l=e(t[a],!0);l&&r.push(c(a,i)+l)}return"$"+r.join("&")+";"}return void 0!==t?"="+c(t.toString(),n):void 0},parse:function(e){var t=0;function o(o){for(var i="";t!==e.length;++t){if("/"===e.charAt(t)){if((t+=1)===e.length){i+=";";break}}else if(e.charAt(t).match(o))break;i+=e.charAt(t)}return i}return e=decodeURI(e),function i(){var n,c=e.charAt(t++);if("="===c)return o(s);if(":"===c){var a=o(s);return"true"===a||"false"!==a&&(a=parseFloat(a),isNaN(a)?null:a)}if("@"===c){n=[];e:if(!(t>=e.length||";"===e.charAt(t)))for(;;){if(n.push(i()),t>=e.length||";"===e.charAt(t))break e;t+=1}return t+=1,n}if("$"===c){n={};e:if(!(t>=e.length||";"===e.charAt(t)))for(;;){if(n[o(r)]=i(),t>=e.length||";"===e.charAt(t))break e;t+=1}return t+=1,n}throw new Error("Unexpected char "+c)}()}}},KCRw:function(e,t,o){"use strict";o.r(t),o.d(t,"StationModule",function(){return Ht});var i=o("fXoL"),n=o("ofXK");const r="undefined"!=typeof Intl&&Intl.v8BreakIterator;let s,c=(()=>{class e{constructor(e){this._platformId=e,this.isBrowser=this._platformId?Object(n.z)(this._platformId):"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!r)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return e.\u0275fac=function(t){return new(t||e)(i.dc(i.D,8))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(i.U)({factory:function(){return new e(Object(i.X)(i.D,8))},token:e,providedIn:"root"}),e})();function a(e){return function(){if(null==s&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>s=!0}))}finally{s=s||!1}return s}()?e:!!e.capture}const l={NORMAL:0,NEGATED:1,INVERTED:2};l[l.NORMAL]="NORMAL",l[l.NEGATED]="NEGATED",l[l.INVERTED]="INVERTED";var d=o("XNiG"),u=o("quSY"),h=o("HDdC");function b(e){return null!=e&&"false"!=`${e}`}var p=o("IzEk"),m=o("JX91"),f=o("LRne"),g=o("xgIS");o("3N8a"),o("IjjT");var _=o("VRyK"),v=(o("/uUt"),o("D0XW")),C=o("zx2A");class y{constructor(e){this.durationSelector=e}call(e,t){return t.subscribe(new w(e,this.durationSelector))}}class w extends C.b{constructor(e,t){super(e),this.durationSelector=t,this.hasValue=!1}_next(e){if(this.value=e,this.hasValue=!0,!this.throttled){let o;try{const{durationSelector:t}=this;o=t(e)}catch(t){return this.destination.error(t)}const i=Object(C.c)(o,new C.a(this));!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:e,hasValue:t,throttled:o}=this;o&&(this.remove(o),this.throttled=void 0,o.unsubscribe()),t&&(this.value=void 0,this.hasValue=!1,this.destination.next(e))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}var T=o("PqYM");o("pLZG");var k=o("1G5W");o("7o/Q"),o("eIep"),o("WMd4"),o("9ppp"),o("Ylt2");const U=new i.s("cdk-dir-doc",{providedIn:"root",factory:function(){return Object(i.X)(n.c)}});let x=(()=>{class e{constructor(e){if(this.value="ltr",this.change=new i.n,e){const t=e.documentElement?e.documentElement.dir:null,o=(e.body?e.body.dir:null)||t;this.value="ltr"===o||"rtl"===o?o:"ltr"}}ngOnDestroy(){this.change.complete()}}return e.\u0275fac=function(t){return new(t||e)(i.dc(U,8))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(i.U)({factory:function(){return new e(Object(i.X)(U,8))},token:e,providedIn:"root"}),e})(),S=(()=>{class e{constructor(e,t){this._platform=e,t.runOutsideAngular(()=>{this._change=e.isBrowser?Object(_.a)(Object(g.a)(window,"resize"),Object(g.a)(window,"orientationchange")):Object(f.a)(),this._invalidateCache=this.change().subscribe(()=>this._updateViewportSize())})}ngOnDestroy(){this._invalidateCache.unsubscribe()}getViewportSize(){this._viewportSize||this._updateViewportSize();const e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){const e=this.getViewportScrollPosition(),{width:t,height:o}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+o,right:e.left+t,height:o,width:t}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const e=document.documentElement,t=e.getBoundingClientRect();return{top:-t.top||document.body.scrollTop||window.scrollY||e.scrollTop||0,left:-t.left||document.body.scrollLeft||window.scrollX||e.scrollLeft||0}}change(e=20){return e>0?this._change.pipe(function(e,t=v.a){return o=()=>Object(T.a)(e,t),function(e){return e.lift(new y(o))};var o}(e)):this._change}_updateViewportSize(){this._viewportSize=this._platform.isBrowser?{width:window.innerWidth,height:window.innerHeight}:{width:0,height:0}}}return e.\u0275fac=function(t){return new(t||e)(i.dc(c),i.dc(i.B))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(i.U)({factory:function(){return new e(Object(i.X)(c),Object(i.X)(i.B))},token:e,providedIn:"root"}),e})();const E=a({passive:!1,capture:!0});let P=(()=>{class e{constructor(e,t){this._ngZone=e,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=new Set,this._globalListeners=new Map,this.pointerMove=new d.a,this.pointerUp=new d.a,this._preventScrollListener=e=>{this._activeDragInstances.size&&e.preventDefault()},this._document=t}registerDropContainer(e){if(!this._dropInstances.has(e)){if(this.getDropContainer(e.id))throw Error(`Drop instance with id "${e.id}" has already been registered.`);this._dropInstances.add(e)}}registerDragItem(e){this._dragInstances.add(e),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._preventScrollListener,E)})}removeDropContainer(e){this._dropInstances.delete(e)}removeDragItem(e){this._dragInstances.delete(e),this.stopDragging(e),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._preventScrollListener,E)}startDragging(e,t){if(this._activeDragInstances.add(e),1===this._activeDragInstances.size){const e=t.type.startsWith("touch"),o=e?"touchend":"mouseup";this._globalListeners.set(e?"touchmove":"mousemove",{handler:e=>this.pointerMove.next(e),options:E}).set(o,{handler:e=>this.pointerUp.next(e),options:!0}),e||this._globalListeners.set("wheel",{handler:this._preventScrollListener,options:E}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((e,t)=>{this._document.addEventListener(t,e.handler,e.options)})})}}stopDragging(e){this._activeDragInstances.delete(e),0===this._activeDragInstances.size&&this._clearGlobalListeners()}isDragging(e){return this._activeDragInstances.has(e)}getDropContainer(e){return Array.from(this._dropInstances).find(t=>t.id===e)}ngOnDestroy(){this._dragInstances.forEach(e=>this.removeDragItem(e)),this._dropInstances.forEach(e=>this.removeDropContainer(e)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((e,t)=>{this._document.removeEventListener(t,e.handler,e.options)}),this._globalListeners.clear()}}return e.\u0275fac=function(t){return new(t||e)(i.dc(i.B),i.dc(n.c))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e.ngInjectableDef=Object(i.U)({factory:function(){return new e(Object(i.X)(i.B),Object(i.X)(n.c))},token:e,providedIn:"root"}),e})();const I=new i.s("CDK_DRAG_PARENT");function D(e,t){for(let o in t)t.hasOwnProperty(o)&&(e[o]=t[o]);return e}function M(e,t){const o=t?"":"none";D(e.style,{touchAction:t?"":"none",webkitUserDrag:t?"":"none",webkitTapHighlightColor:t?"":"transparent",userSelect:o,msUserSelect:o,webkitUserSelect:o,MozUserSelect:o})}let R=(()=>{class e{constructor(e,t){this.element=e,this._disabled=!1,this._parentDrag=t,M(e.nativeElement,!1)}get disabled(){return this._disabled}set disabled(e){this._disabled=b(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(i.l),i.Pb(I,8))},e.\u0275dir=i.Kb({type:e,selectors:[["","cdkDragHandle",""]],hostAttrs:[1,"cdk-drag-handle"],inputs:{disabled:["cdkDragHandleDisabled","disabled"]}}),e})(),L=(()=>{class e{constructor(e){this.templateRef=e}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(i.M))},e.\u0275dir=i.Kb({type:e,selectors:[["ng-template","cdkDragPlaceholder",""]],inputs:{data:"data"}}),e})(),O=(()=>{class e{constructor(e){this.templateRef=e}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(i.M))},e.\u0275dir=i.Kb({type:e,selectors:[["ng-template","cdkDragPreview",""]],inputs:{data:"data"}}),e})();const $=new i.s("CDK_DROP_LIST_CONTAINER");function z(e){const t=e.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(e)*t}function A(e,t){return e.getPropertyValue(t).split(",").map(e=>e.trim())}const F=new i.s("CDK_DRAG_CONFIG",{providedIn:"root",factory:function(){return{dragStartThreshold:5,pointerDirectionChangeThreshold:5}}}),j=a({passive:!0}),W=a({passive:!1});let Y=(()=>{class e{constructor(e,t,o,n,r,s,c,a,l){this.element=e,this.dropContainer=t,this._ngZone=n,this._viewContainerRef=r,this._viewportRuler=s,this._dragDropRegistry=c,this._config=a,this._dir=l,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new d.a,this._moveEventSubscriptions=0,this._pointerMoveSubscription=u.a.EMPTY,this._pointerUpSubscription=u.a.EMPTY,this._rootElementInitSubscription=u.a.EMPTY,this._disabled=!1,this.started=new i.n,this.ended=new i.n,this.entered=new i.n,this.exited=new i.n,this.dropped=new i.n,this.moved=h.a.create(e=>{const t=this._moveEvents.subscribe(e);return this._moveEventSubscriptions++,()=>{t.unsubscribe(),this._moveEventSubscriptions--}}),this._pointerDown=e=>{const t=this.getChildHandles();if(t.length){const o=t.find(t=>{const o=t.element.nativeElement,i=e.target;return!!i&&(i===o||o.contains(i))});!o||o.disabled||this.disabled||this._initializeDragSequence(o.element.nativeElement,e)}else this.disabled||this._initializeDragSequence(this._rootElement,e)},this._pointerMove=e=>{const t=this._getConstrainedPointerPosition(e);if(this._hasStartedDragging){if(this._hasMoved=!0,e.preventDefault(),this._updatePointerDirectionDelta(t),this.dropContainer)this._updateActiveDropContainer(t);else{const e=this._activeTransform;e.x=t.x-this._pickupPositionOnPage.x+this._passiveTransform.x,e.y=t.y-this._pickupPositionOnPage.y+this._passiveTransform.y;const o=B(e.x,e.y);this._rootElement.style.transform=this._initialTransform?this._initialTransform+" "+o:o,"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&this._rootElement.setAttribute("transform",`translate(${e.x} ${e.y})`)}this._moveEventSubscriptions>0&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:t,event:e,delta:this._pointerDirectionDelta})})}else Math.abs(t.x-this._pickupPositionOnPage.x)+Math.abs(t.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold&&(this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(e)))},this._pointerUp=()=>{if(this._isDragging()&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._hasStartedDragging))return this.dropContainer?void this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(),this._dragDropRegistry.stopDragging(this)}):(this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>this.ended.emit({source:this})),void this._dragDropRegistry.stopDragging(this))},this._document=o,c.registerDragItem(this)}get disabled(){return this._disabled||this.dropContainer&&this.dropContainer.disabled}set disabled(e){this._disabled=b(e)}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}reset(){this._rootElement.style.transform="",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}ngAfterViewInit(){this._rootElementInitSubscription=this._ngZone.onStable.asObservable().pipe(Object(p.a)(1)).subscribe(()=>{const e=this._rootElement=this._getRootElement();e.addEventListener("mousedown",this._pointerDown,W),e.addEventListener("touchstart",this._pointerDown,j),this._handles.changes.pipe(Object(m.a)(null)).subscribe(()=>M(e,this.getChildHandles().length>0))})}ngOnDestroy(){this._rootElement&&(this._rootElement.removeEventListener("mousedown",this._pointerDown,W),this._rootElement.removeEventListener("touchstart",this._pointerDown,j),this._isDragging()&&this._removeElement(this._rootElement)),this._rootElementInitSubscription.unsubscribe(),this._destroyPreview(),this._destroyPlaceholder(),this._nextSibling=null,this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this._moveEvents.complete()}_isDragging(){return this._dragDropRegistry.isDragging(this)}getChildHandles(){return this._handles.filter(e=>e._parentDrag===this)}_initializeDragSequence(e,t){t.stopPropagation();const o=this._isDragging(),i=this._isTouchEvent(t),n=!i&&0!==t.button,r=!i&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(t.target&&t.target.draggable&&"mousedown"===t.type&&t.preventDefault(),o||n||r)return;null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._hasStartedDragging=this._hasMoved=!1,this._initialContainer=this.dropContainer,this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollPosition=this._viewportRuler.getViewportScrollPosition(),this._pickupPositionInElement=this._previewTemplate?{x:0,y:0}:this._getPointerPositionInElement(e,t);const s=this._pickupPositionOnPage=this._getPointerPositionOnPage(t);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:s.x,y:s.y},this._dragDropRegistry.startDragging(this,t)}_startDragSequence(e){if(this.started.emit({source:this}),this._isTouchEvent(e)&&(this._lastTouchEventTime=Date.now()),this.dropContainer){const e=this._rootElement;this._nextSibling=e.nextSibling;const t=this._preview=this._createPreviewElement(),o=this._placeholder=this._createPlaceholderElement();e.style.display="none",this._document.body.appendChild(e.parentNode.replaceChild(o,e)),this._document.body.appendChild(t),this.dropContainer.start()}}_cleanupDragArtifacts(){this._rootElement.style.display="",this._nextSibling?this._nextSibling.parentNode.insertBefore(this._rootElement,this._nextSibling):this._initialContainer.element.nativeElement.appendChild(this._rootElement),this._destroyPreview(),this._destroyPlaceholder(),this._ngZone.run(()=>{const e=this.dropContainer.getItemIndex(this);this.ended.emit({source:this}),this.dropped.emit({item:this,currentIndex:e,previousIndex:this._initialContainer.getItemIndex(this),container:this.dropContainer,previousContainer:this._initialContainer}),this.dropContainer.drop(this,e,this._initialContainer),this.dropContainer=this._initialContainer})}_updateActiveDropContainer({x:e,y:t}){let o=this.dropContainer._getSiblingContainerFromPosition(this,e,t);!o&&this.dropContainer!==this._initialContainer&&this._initialContainer._canReturnItem(e,t)&&(o=this._initialContainer),o&&this._ngZone.run(()=>{this.exited.emit({item:this,container:this.dropContainer}),this.dropContainer.exit(this),this.entered.emit({item:this,container:o}),this.dropContainer=o,this.dropContainer.enter(this,e,t)}),this.dropContainer._sortItem(this,e,t,this._pointerDirectionDelta),this._preview.style.transform=B(e-this._pickupPositionInElement.x,t-this._pickupPositionInElement.y)}_createPreviewElement(){let e;if(this._previewTemplate){const t=this._viewContainerRef.createEmbeddedView(this._previewTemplate.templateRef,this._previewTemplate.data);e=t.rootNodes[0],this._previewRef=t,e.style.transform=B(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const t=this._rootElement,o=t.getBoundingClientRect();e=N(t),e.style.width=`${o.width}px`,e.style.height=`${o.height}px`,e.style.transform=B(o.left,o.top)}return D(e.style,{position:"fixed",top:"0",left:"0",zIndex:"1000"}),e.classList.add("cdk-drag-preview"),e.setAttribute("dir",this._dir?this._dir.value:"ltr"),e}_createPlaceholderElement(){let e;return this._placeholderTemplate?(this._placeholderRef=this._viewContainerRef.createEmbeddedView(this._placeholderTemplate.templateRef,this._placeholderTemplate.data),e=this._placeholderRef.rootNodes[0]):e=N(this._rootElement),e.classList.add("cdk-drag-placeholder"),e}_getPointerPositionInElement(e,t){const o=this._rootElement.getBoundingClientRect(),i=e===this._rootElement?null:e,n=i?i.getBoundingClientRect():o,r=this._isTouchEvent(t)?t.targetTouches[0]:t;return{x:n.left-o.left+(r.pageX-n.left-this._scrollPosition.left),y:n.top-o.top+(r.pageY-n.top-this._scrollPosition.top)}}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const e=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=B(e.left,e.top);const t=function(e){const t=getComputedStyle(e),o=A(t,"transition-property"),i=o.find(e=>"transform"===e||"all"===e);if(!i)return 0;const n=o.indexOf(i),r=A(t,"transition-duration"),s=A(t,"transition-delay");return z(r[n])+z(s[n])}(this._preview);return 0===t?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(e=>{const o=t=>{(!t||t.target===this._preview&&"transform"===t.propertyName)&&(this._preview.removeEventListener("transitionend",o),e(),clearTimeout(i))},i=setTimeout(o,1.5*t);this._preview.addEventListener("transitionend",o)}))}_removeElement(e){e&&e.parentNode&&e.parentNode.removeChild(e)}_getPointerPositionOnPage(e){const t=this._isTouchEvent(e)?e.touches[0]:e;return{x:t.pageX-this._scrollPosition.left,y:t.pageY-this._scrollPosition.top}}_getConstrainedPointerPosition(e){const t=this._getPointerPositionOnPage(e),o=this.dropContainer?this.dropContainer.lockAxis:null;return"x"===this.lockAxis||"x"===o?t.y=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==o||(t.x=this._pickupPositionOnPage.x),t}_isTouchEvent(e){return e.type.startsWith("touch")}_destroyPreview(){this._preview&&this._removeElement(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder&&this._removeElement(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}_updatePointerDirectionDelta(e){const{x:t,y:o}=e,i=this._pointerDirectionDelta,n=this._pointerPositionAtLastDirectionChange,r=Math.abs(t-n.x),s=Math.abs(o-n.y);return r>this._config.pointerDirectionChangeThreshold&&(i.x=t>n.x?1:-1,n.x=t),s>this._config.pointerDirectionChangeThreshold&&(i.y=o>n.y?1:-1,n.y=o),i}_getRootElement(){if(this.rootElementSelector){const e=this.rootElementSelector;let t=this.element.nativeElement.parentElement;for(;t;){if(t.matches?t.matches(e):t.msMatchesSelector(e))return t;t=t.parentElement}}return this.element.nativeElement}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(i.l),i.Pb($,12),i.Pb(n.c),i.Pb(i.B),i.Pb(i.R),i.Pb(S),i.Pb(P),i.Pb(F),i.Pb(x,8))},e.\u0275dir=i.Kb({type:e,selectors:[["","cdkDrag",""]],contentQueries:function(e,t,o){if(1&e&&(i.Ib(o,O,1),i.Ib(o,L,1),i.Ib(o,R,1)),2&e){let e;i.vc(e=i.ic())&&(t._previewTemplate=e.first),i.vc(e=i.ic())&&(t._placeholderTemplate=e.first),i.vc(e=i.ic())&&(t._handles=e)}},hostAttrs:[1,"cdk-drag"],hostVars:2,hostBindings:function(e,t){2&e&&i.Hb("cdk-drag-dragging",t._hasStartedDragging&&t._isDragging())},inputs:{disabled:["cdkDragDisabled","disabled"],data:["cdkDragData","data"],lockAxis:["cdkDragLockAxis","lockAxis"],rootElementSelector:["cdkDragRootElement","rootElementSelector"]},outputs:{started:"cdkDragStarted",ended:"cdkDragEnded",entered:"cdkDragEntered",exited:"cdkDragExited",dropped:"cdkDragDropped",moved:"cdkDragMoved"},exportAs:["cdkDrag"],features:[i.Bb([{provide:I,useExisting:e}])]}),e})();function B(e,t){return`translate3d(${Math.round(e)}px, ${Math.round(t)}px, 0)`}function N(e){const t=e.cloneNode(!0);return t.removeAttribute("id"),t}function G(e,t,o){const i=H(t,e.length-1),n=H(o,e.length-1);if(i===n)return;const r=e[i],s=n<i?-1:1;for(let c=i;c!==n;c+=s)e[c]=e[c+s];e[n]=r}function H(e,t){return Math.max(0,Math.min(t,e))}let V=(()=>{class e{constructor(){this._items=new Set}ngOnDestroy(){this._items.clear()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=i.Kb({type:e,selectors:[["","cdkDropListGroup",""]],exportAs:["cdkDropListGroup"]}),e})(),Q=0,q=(()=>{class e{constructor(e,t,o,n,r){this.element=e,this._dragDropRegistry=t,this._changeDetectorRef=o,this._dir=n,this._group=r,this.connectedTo=[],this.orientation="vertical",this.id="cdk-drop-list-"+Q++,this._disabled=!1,this.enterPredicate=()=>!0,this.dropped=new i.n,this.entered=new i.n,this.exited=new i.n,this.sorted=new i.n,this._dragging=!1,this._positionCache={items:[],siblings:[],self:{}},this._previousSwap={drag:null,delta:0}}get disabled(){return this._disabled}set disabled(e){this._disabled=b(e)}ngOnInit(){this._dragDropRegistry.registerDropContainer(this),this._group&&this._group._items.add(this)}ngOnDestroy(){this._dragDropRegistry.removeDropContainer(this),this._group&&this._group._items.delete(this)}start(){this._dragging=!0,this._activeDraggables=this._draggables.toArray(),this._cachePositions(),this._changeDetectorRef.markForCheck()}drop(e,t,o){this._reset(),this.dropped.emit({item:e,currentIndex:t,previousIndex:o.getItemIndex(e),container:this,previousContainer:o})}enter(e,t,o){this.entered.emit({item:e,container:this}),this.start();const i=this._getItemIndexFromPointerPosition(e,t,o),n=this._activeDraggables.indexOf(e),r=this._activeDraggables[i],s=e.getPlaceholderElement();if(n>-1&&this._activeDraggables.splice(n,1),r&&!this._dragDropRegistry.isDragging(r)){const t=r.getRootElement();t.parentElement.insertBefore(s,t),this._activeDraggables.splice(i,0,e)}else this.element.nativeElement.appendChild(s),this._activeDraggables.push(e);s.style.transform="",this._cachePositions()}exit(e){this._reset(),this.exited.emit({item:e,container:this})}getItemIndex(e){return this._dragging?X("horizontal"===this.orientation&&this._dir&&"rtl"===this._dir.value?this._positionCache.items.slice().reverse():this._positionCache.items,t=>t.drag===e):this._draggables.toArray().indexOf(e)}_sortItem(e,t,o,i){if(!this._isPointerNearDropContainer(t,o))return;const n=this._positionCache.items,r=this._getItemIndexFromPointerPosition(e,t,o,i);if(-1===r&&n.length>0)return;const s="horizontal"===this.orientation,c=X(n,t=>t.drag===e),a=n[r],l=n[c].clientRect,d=a.clientRect,u=c>r?1:-1;this._previousSwap.drag=a.drag,this._previousSwap.delta=s?i.x:i.y;const h=this._getItemOffsetPx(l,d,u),b=this._getSiblingOffsetPx(c,n,u),p=n.slice();G(n,c,r),this.sorted.emit({previousIndex:c,currentIndex:r,container:this,item:e}),n.forEach((t,o)=>{if(p[o]===t)return;const i=t.drag===e,n=i?h:b,r=i?e.getPlaceholderElement():t.drag.getRootElement();t.offset+=n,s?(r.style.transform=`translate3d(${Math.round(t.offset)}px, 0, 0)`,this._adjustClientRect(t.clientRect,0,n)):(r.style.transform=`translate3d(0, ${Math.round(t.offset)}px, 0)`,this._adjustClientRect(t.clientRect,n,0))})}_getSiblingContainerFromPosition(e,t,o){const i=this._positionCache.siblings.find(e=>K(e.clientRect,t,o));return i&&i.drop.enterPredicate(e,i.drop)?i.drop:null}_canReturnItem(e,t){return K(this._positionCache.self,e,t)}_cachePositions(){const e="horizontal"===this.orientation;this._positionCache.self=this.element.nativeElement.getBoundingClientRect(),this._positionCache.items=this._activeDraggables.map(e=>{const t=(this._dragDropRegistry.isDragging(e)?e.getPlaceholderElement():e.getRootElement()).getBoundingClientRect();return{drag:e,offset:0,clientRect:{top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}}}).sort((t,o)=>e?t.clientRect.left-o.clientRect.left:t.clientRect.top-o.clientRect.top),this._positionCache.siblings=this._getConnectedLists().map(e=>({drop:e,clientRect:e.element.nativeElement.getBoundingClientRect()}))}_reset(){this._dragging=!1,this._activeDraggables.forEach(e=>e.getRootElement().style.transform=""),this._activeDraggables=[],this._positionCache.items=[],this._positionCache.siblings=[],this._previousSwap.drag=null,this._previousSwap.delta=0}_adjustClientRect(e,t,o){e.top+=t,e.bottom=e.top+e.height,e.left+=o,e.right=e.left+e.width}_getItemIndexFromPointerPosition(e,t,o,i){const n="horizontal"===this.orientation;return X(this._positionCache.items,({drag:r,clientRect:s},c,a)=>{if(r===e)return a.length<2;if(i){const e=n?i.x:i.y;if(r===this._previousSwap.drag&&e===this._previousSwap.delta)return!1}return n?t>=Math.floor(s.left)&&t<=Math.floor(s.right):o>=Math.floor(s.top)&&o<=Math.floor(s.bottom)})}_isPointerNearDropContainer(e,t){const{top:o,right:i,bottom:n,left:r,width:s,height:c}=this._positionCache.self,a=.05*s,l=.05*c;return t>o-l&&t<n+l&&e>r-a&&e<i+a}_getItemOffsetPx(e,t,o){const i="horizontal"===this.orientation;let n=i?t.left-e.left:t.top-e.top;return-1===o&&(n+=i?t.width-e.width:t.height-e.height),n}_getSiblingOffsetPx(e,t,o){const i="horizontal"===this.orientation,n=t[e].clientRect,r=t[e+-1*o];let s=n[i?"width":"height"]*o;if(r){const e=i?"left":"top",t=i?"right":"bottom";-1===o?s-=r.clientRect[e]-n[t]:s+=n[e]-r.clientRect[t]}return s}_getConnectedLists(){const e=(t=this.connectedTo,Array.isArray(t)?t:[t]).map(e=>"string"==typeof e?this._dragDropRegistry.getDropContainer(e):e);var t;return this._group&&this._group._items.forEach(t=>{-1===e.indexOf(t)&&e.push(t)}),e.filter(e=>e&&e!==this)}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(i.l),i.Pb(P),i.Pb(i.h),i.Pb(x,8),i.Pb(V,12))},e.\u0275dir=i.Kb({type:e,selectors:[["","cdkDropList",""],["cdk-drop-list"]],contentQueries:function(e,t,o){if(1&e&&i.Ib(o,Y,0),2&e){let e;i.vc(e=i.ic())&&(t._draggables=e)}},hostAttrs:[1,"cdk-drop-list"],hostVars:3,hostBindings:function(e,t){2&e&&(i.Xb("id",t.id),i.Hb("cdk-drop-list-dragging",t._dragging))},inputs:{connectedTo:["cdkDropListConnectedTo","connectedTo"],orientation:["cdkDropListOrientation","orientation"],id:"id",enterPredicate:["cdkDropListEnterPredicate","enterPredicate"],disabled:["cdkDropListDisabled","disabled"],data:["cdkDropListData","data"],lockAxis:["cdkDropListLockAxis","lockAxis"]},outputs:{dropped:"cdkDropListDropped",entered:"cdkDropListEntered",exited:"cdkDropListExited",sorted:"cdkDropListSorted"},exportAs:["cdkDropList"],features:[i.Bb([{provide:V,useValue:void 0},{provide:$,useExisting:e}])]}),e})();function X(e,t){for(let o=0;o<e.length;o++)if(t(e[o],o,e))return o;return-1}function K(e,t,o){const{top:i,bottom:n,left:r,right:s}=e;return o>=i&&o<=n&&t>=r&&t<=s}let J=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({}),e})();var Z=o("3Pt+"),ee=o("1kSV"),te=o("PCNd"),oe=o("UYTb"),ie=o("kuWu");let ne=(()=>{class e{getLayouts(t){return t.map(t=>({name:t.name,config:t.config.map(t=>({moduleId:e.map[t.moduleId].moduleId,count:t.count}))}))}getSaveData(e){return null}}return e.map={1:{moduleId:ie.b.module_gen_prod_energycells_01.id},2:{moduleId:ie.b.module_gen_prod_water_01.id},3:{moduleId:ie.b.module_arg_prod_meat_01.id},4:{moduleId:ie.b.module_par_prod_majasnails_01.id},5:{moduleId:ie.b.module_gen_prod_spices_01.id},6:{moduleId:ie.b.module_arg_prod_wheat_01.id},7:{moduleId:ie.b.module_par_prod_sojabeans_01.id},8:{moduleId:ie.b.module_tel_prod_sunriseflowers_01.id},9:{moduleId:ie.b.module_tel_prod_swampplant_01.id},10:{moduleId:ie.b.module_arg_prod_medicalsupplies_01.id},11:{moduleId:ie.b.module_tel_prod_medicalsupplies_01.id},12:{moduleId:ie.b.module_par_prod_medicalsupplies_01.id},13:{moduleId:ie.b.module_arg_prod_foodrations_01.id},14:{moduleId:ie.b.module_par_prod_sojahusk_01.id},15:{moduleId:ie.b.module_tel_prod_nostropoil_01.id},16:{moduleId:ie.b.module_arg_prod_spacefuel_01.id},17:{moduleId:ie.b.module_tel_prod_spaceweed_01.id},18:{moduleId:ie.b.module_par_prod_majadust_01.id},19:{moduleId:ie.b.module_gen_prod_refinedmetals_01.id},20:{moduleId:ie.b.module_gen_prod_siliconwafers_01.id},21:{moduleId:ie.b.module_gen_prod_antimattercells_01.id},22:{moduleId:ie.b.module_gen_prod_graphene_01.id},23:{moduleId:ie.b.module_gen_prod_superfluidcoolant_01.id},24:{moduleId:ie.b.module_gen_prod_microchips_01.id},25:{moduleId:ie.b.module_gen_prod_scanningarrays_01.id},26:{moduleId:ie.b.module_gen_prod_hullparts_01},27:{moduleId:ie.b.module_gen_prod_advancedcomposites_01.id},28:{moduleId:ie.b.module_gen_prod_engineparts_01.id},29:{moduleId:ie.b.module_gen_prod_plasmaconductors_01.id},30:{moduleId:ie.b.module_gen_prod_quantumtubes_01.id},31:{moduleId:ie.b.module_gen_prod_advancedelectronics_01.id},32:{moduleId:ie.b.module_gen_prod_antimatterconverters_01.id},33:{moduleId:ie.b.module_gen_prod_claytronics_01.id},34:{moduleId:ie.b.module_gen_prod_dronecomponents_01.id},35:{moduleId:ie.b.module_gen_prod_missilecomponents_01.id},36:{moduleId:ie.b.module_gen_prod_shieldcomponents_01.id},37:{moduleId:ie.b.module_gen_prod_turretcomponents_01.id},38:{moduleId:ie.b.module_gen_prod_weaponcomponents_01.id},39:{moduleId:ie.b.module_gen_prod_smartchips_01.id},40:{moduleId:ie.b.module_gen_prod_fieldcoils_01.id}},e})();class re{constructor(e){this.moduleService=e}findModule(e,t){return this.moduleService.getModuleByWare(e,t)}getLayouts(e){const t=e.layouts;return t?t.map(e=>({name:e.name,config:e.config.map(e=>{const t=this.findModule(e.moduleId,e.productionId);return{count:e.count,moduleId:t?t.id:null}}).filter(e=>null!=e.moduleId)})):[]}getSaveData(e){return{layouts:e}}}class se{getLayouts(e){return e.layouts}getSaveData(e){return{layouts:e}}}var ce=o("ZXMZ"),ae=o("zFYr");let le=(()=>{class e{constructor(e,t,o){this.storageService=e,this.moduleService=t,this.analytics=o,this.services=[new ne,new re(t),new se]}getCurrentService(){return this.services[e.version]}getLayouts(){const t=this.storageService.get(e.storageKey)||{version:e.version};return this.services[t.version||0].getLayouts(t)||[]}getLayout(e){return this.analytics.event({label:e,category:"Layouts",action:"Load Layout"}),this.getLayouts().find(t=>t.name===e)}saveLayout(e){const t=this.getLayouts(),o=t.findIndex(t=>t.name.toLowerCase()===e.name.toLowerCase());o>=0?t[o]=e:t.push(e),this.analytics.event({label:e.name,category:"Layouts",action:"Save Layout"}),this.saveLayoutsInternal(t)}deleteLayout(e){this.analytics.event({label:e,category:"Layouts",action:"Delete Layout"});const t=this.getLayouts(),o=t.findIndex(t=>t.name.toLowerCase()===e.toLowerCase());o>=0&&t.splice(o,1),this.saveLayoutsInternal(t)}saveLayoutsInternal(t){const o=this.getCurrentService().getSaveData(t);this.storageService.add(e.storageKey,Object.assign(Object.assign({},o),{version:e.version}))}}return e.version=2,e.storageKey="layouts",e.\u0275fac=function(t){return new(t||e)(i.dc(oe.a),i.dc(ce.a),i.dc(ae.a))},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac}),e})();var de=o("tyNb"),ue=o("Jclc"),he=o("dXtl");let be=(()=>{class e{}return e.primary="primary",e.secondary="secondary",e.success="success",e.danger="danger",e.warning="warning",e.info="info",e})();var pe=o("Lswn");let me=(()=>{class e{constructor(e){this.activeModal=e}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(ee.a))},e.\u0275cmp=i.Jb({type:e,selectors:[["ng-component"]],inputs:{title:"title",message:"message"},decls:13,vars:2,consts:function(){let e,t;return e=$localize`:@@yes␟4f20f2d5a6882190892e58b85f6ccbedfa737952␟2807800733729323332:Yes`,t=$localize`:@@no␟3d3ae7deebc5949b0c1c78b9847886a94321d9fd␟3542042671420335679:No`,[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[3,"innerHTML"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],e,t]},template:function(e,t){1&e&&(i.Ub(0,"div",0),i.Ub(1,"h4",1),i.Ec(2),i.Tb(),i.Ub(3,"button",2),i.hc("click",function(){return t.activeModal.dismiss()}),i.Ub(4,"span",3),i.Ec(5,"\xd7"),i.Tb(),i.Tb(),i.Tb(),i.Ub(6,"div",4),i.Qb(7,"p",5),i.Tb(),i.Ub(8,"div",6),i.Ub(9,"button",7),i.hc("click",function(){return t.activeModal.close(!0)}),i.Yb(10,8),i.Tb(),i.Ub(11,"button",7),i.hc("click",function(){return t.activeModal.close(!1)}),i.Yb(12,9),i.Tb(),i.Tb()),2&e&&(i.Cb(2),i.Fc(t.title),i.Cb(5),i.pc("innerHTML",t.message,i.yc))},encapsulation:2}),e})();function fe(e,t){if(1&e){const e=i.Vb();i.Ub(0,"a",11),i.hc("click",function(o){i.xc(e);const n=t.$implicit;return i.jc().loadLayout(o,n)}),i.Ub(1,"div"),i.Ub(2,"strong"),i.Ec(3),i.Tb(),i.Ub(4,"div",12),i.Ub(5,"a",13),i.hc("click",function(o){i.xc(e);const n=t.$implicit;return i.jc().loadLayout(o,n)}),i.Yb(6,14),i.Tb(),i.Ec(7," | "),i.Ub(8,"a",15),i.hc("click",function(o){i.xc(e);const n=t.$implicit;return i.jc().addLayout(o,n)}),i.Yb(9,16),i.Tb(),i.Ec(10," | "),i.Ub(11,"a",17),i.hc("click",function(o){i.xc(e);const n=t.$implicit;return i.jc().deleteLayout(o,n)}),i.Yb(12,18),i.Tb(),i.Tb(),i.Tb(),i.Ub(13,"div",19),i.Ec(14),i.Tb(),i.Tb()}if(2&e){const e=t.$implicit,o=i.jc();i.Cb(3),i.Fc(e.name),i.Cb(11),i.Gc(" ",o.getModules(e)," ")}}var ge=function(e){return e[e.load=0]="load",e[e.add=1]="add",e}({});let _e=(()=>{class e extends he.a{constructor(e,t,o,i){super(),this.activeModal=e,this.modal=t,this.layoutService=o,this.moduleService=i}ngOnInit(){this.entities=this.layoutService.getLayouts().map(e=>({name:e.name,modules:e.config.map(e=>({count:e.count,module:this.moduleService.getEntity(e.moduleId)}))}))}getModules(e){return e.modules.map(e=>e.count+" x "+(null==e.module?"":e.module.name)).join(", ")}loadLayout(e,t){e.preventDefault(),e.stopPropagation(),this.activeModal.close({layoutName:t.name,type:ge.load})}addLayout(e,t){e.preventDefault(),e.stopPropagation(),this.activeModal.close({layoutName:t.name,type:ge.add})}deleteLayout(e,t){e.preventDefault(),e.stopPropagation();const o=this.modal.open(me);o.componentInstance.title="Confirm Delete",o.componentInstance.message=`Are you sure you want to delete <strong>${t.name}</strong>?`,o.result.then(e=>{e&&(this.layoutService.deleteLayout(t.name),this.ngOnInit())})}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(ee.a),i.Pb(ee.c),i.Pb(le),i.Pb(ce.a))},e.\u0275cmp=i.Jb({type:e,selectors:[["ng-component"]],features:[i.zb],decls:12,vars:1,consts:function(){let e,t,o,i,n;return e=$localize`:@@loadLayout␟a4a48028fd8fd9629d60f4e0c6b8c8b13218e394␟8030604597468533658:Load Layout`,t=$localize`:@@cancel␟d7b35c384aecd25a516200d6921836374613dfe7␟2159130950882492111:Cancel`,o=$localize`:@@load␟a4a48028fd8fd9629d60f4e0c6b8c8b13218e394␟8030604597468533658:Load Layout`,i=$localize`:@@load␟9b1fd5113d203b680aa9b75bfb383e4f44906546␟1851573252212447256:Add Modules`,n=$localize`:@@delete␟554e76bab16d9b9561199346a44e79a61a856554␟3641097457677886540:Delete Layout`,[[1,"modal-header"],[1,"modal-title"],e,["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"list-group"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],t,[1,"list-group-item","list-group-item-action",3,"click"],[1,"float-right","small"],[1,"hover","text-primary",3,"click"],o,[1,"hover","text-secondary",3,"click"],i,[1,"hover","text-danger",3,"click"],n,[1,"small"]]},template:function(e,t){1&e&&(i.Ub(0,"div",0),i.Ub(1,"h4",1),i.Yb(2,2),i.Tb(),i.Ub(3,"button",3),i.hc("click",function(){return t.activeModal.close()}),i.Ub(4,"span",4),i.Ec(5,"\xd7"),i.Tb(),i.Tb(),i.Tb(),i.Ub(6,"div",5),i.Ub(7,"div",6),i.Cc(8,fe,15,2,"a",7),i.Tb(),i.Tb(),i.Ub(9,"div",8),i.Ub(10,"button",9),i.hc("click",function(){return t.activeModal.close()}),i.Yb(11,10),i.Tb(),i.Tb()),2&e&&(i.Cb(8),i.pc("ngForOf",t.entities))},directives:[n.k],encapsulation:2}),e})(),ve=(()=>{class e{constructor(e,t,o){this.activeModal=e,this.modal=t,this.layoutService=o}canSave(){return this.name}saveLayout(){if(this.layoutService.getLayout(this.name)){const e=this.modal.open(me);e.componentInstance.title="Confirm Save",e.componentInstance.message=`<strong>${this.name}</strong> already exists. Confirm overwrite?`,e.result.then(e=>{e&&this.activeModal.close(this.name)})}else this.activeModal.close(this.name)}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(ee.a),i.Pb(ee.c),i.Pb(le))},e.\u0275cmp=i.Jb({type:e,selectors:[["ng-component"]],decls:14,vars:2,consts:function(){let e,t,o;return e=$localize`:@@saveLayout␟0e0d7b46d2a1f1738f5ae445085ce991f7d77b5c␟645214547829891254:Save Layout`,t=$localize`:@@save␟52c9a103b812f258bcddc3d90a6e3f46871d25fe␟3768927257183755959:Save`,o=$localize`:@@cancel␟d7b35c384aecd25a516200d6921836374613dfe7␟2159130950882492111:Cancel`,[[1,"modal-header"],[1,"modal-title"],e,["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group"],[1,"form-control",3,"ngModel","ngModelChange"],[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"disabled","click"],t,["type","button",1,"btn","btn-secondary",3,"click"],o]},template:function(e,t){1&e&&(i.Ub(0,"div",0),i.Ub(1,"h4",1),i.Yb(2,2),i.Tb(),i.Ub(3,"button",3),i.hc("click",function(){return t.activeModal.close()}),i.Ub(4,"span",4),i.Ec(5,"\xd7"),i.Tb(),i.Tb(),i.Tb(),i.Ub(6,"div",5),i.Ub(7,"div",6),i.Ub(8,"input",7),i.hc("ngModelChange",function(e){return t.name=e}),i.Tb(),i.Tb(),i.Tb(),i.Ub(9,"div",8),i.Ub(10,"button",9),i.hc("click",function(){return t.saveLayout()}),i.Yb(11,10),i.Tb(),i.Ub(12,"button",11),i.hc("click",function(){return t.activeModal.close()}),i.Yb(13,12),i.Tb(),i.Tb()),2&e&&(i.Cb(8),i.pc("ngModel",t.name),i.Cb(2),i.pc("disabled",!t.canSave()))},directives:[Z.b,Z.f,Z.g],encapsulation:2}),e})(),Ce=(()=>{class e{constructor(e){this.activeModal=e}copy(e){e.select(),document.execCommand("copy")}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(ee.a))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-share-layout"]],inputs:{url:"url"},decls:16,vars:1,consts:function(){let e,t,o;return e=$localize`:@@shareLayout␟b5a961d39bc348277bf18f5c11910cfb00de1649␟3989562479710642543:Share Layout`,t=$localize`:@@copy␟1979da7460819153e11d2078244645d94291b69c␟4323470180912194028:Copy`,o=$localize`:@@ok␟be5c752b58791dd799bc5d5482d4351e06f18673␟8720977247725652816:Ok`,[[1,"modal-header"],[1,"modal-title"],e,["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"input-group"],["readonly","",1,"form-control",3,"value"],["urlInput",""],[1,"input-group-append"],["type","button",1,"btn","btn-sm","btn-outline-secondary",3,"click"],t,[1,"modal-footer"],["type","button",1,"btn","btn-success",3,"click"],o]},template:function(e,t){if(1&e){const e=i.Vb();i.Ub(0,"div",0),i.Ub(1,"h4",1),i.Yb(2,2),i.Tb(),i.Ub(3,"button",3),i.hc("click",function(){return t.activeModal.dismiss()}),i.Ub(4,"span",4),i.Ec(5,"\xd7"),i.Tb(),i.Tb(),i.Tb(),i.Ub(6,"div",5),i.Ub(7,"div",6),i.Qb(8,"input",7,8),i.Ub(10,"div",9),i.Ub(11,"button",10),i.hc("click",function(){i.xc(e);const o=i.wc(9);return t.copy(o)}),i.Yb(12,11),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Ub(13,"div",12),i.Ub(14,"button",13),i.hc("click",function(){return t.activeModal.close()}),i.Yb(15,14),i.Tb(),i.Tb()}2&e&&(i.Cb(8),i.pc("value",t.url))},encapsulation:2}),e})();var ye=o("o+DB");let we=(()=>{class e{}return e.default="default",e.argon="argon",e.teladi="teladi",e.paranid="paranid",e})();var Te=o("iPnF"),ke=o("0jqB");const Ue={argon:{race:Te.a.argon,amount:400,consumption:[{ware:ke.b.foodrations,amount:450},{ware:ke.b.medicalsupplies,amount:270}]},teladi:{race:Te.a.teladi,amount:400,consumption:[{ware:ke.b.nostropoil,amount:228},{ware:ke.b.medicalsupplies,amount:270}]},paranid:{race:Te.a.paranid,amount:400,consumption:[{ware:ke.b.sojahusk,amount:286},{ware:ke.b.medicalsupplies,amount:270}]},split:{race:Te.a.split,amount:400,consumption:[{ware:ke.b.cheltmeat,amount:100},{ware:ke.b.scruffinfruits,amount:140},{ware:ke.b.medicalsupplies,amount:270}]},terran:{race:Te.a.split,amount:400,consumption:[{ware:ke.b.terranmre,amount:255},{ware:ke.b.medicalsupplies,amount:270}]},get:e=>Ue[e]||Ue.argon};var xe=o("vmnB");class Se{constructor(e,t,o="",i=1){this.wareService=e,this.moduleService=t,this.moduleId=o,this.count=i}get moduleId(){return this._moduleId}set moduleId(e){e!=this._moduleId&&(this._moduleId=e,this.update())}get count(){return this._count}set count(e){e!=this._count&&(this._count=e,this.update())}update(){if(this._moduleId){if(this.module=this.moduleService.getEntity(this.moduleId),this.needs=[],this.production=null,this.module.type==ye.a.production){const e=this.module.product;let t;t=null==this.module.makerRace?e.production.find(e=>e.method==we.default):e.production.find(e=>e.method==this.module.makerRace.id)||e.production.find(e=>e.method==we.default);const o=3600/t.time;this.production={amount:t.amount*o,ware:e,value:t},t.wares.forEach(e=>{const t=this.wareService.getEntity(e.ware);this.needs.push({amount:e.amount*o,ware:t})})}else if(this.module.type==ye.a.habitation){const e=this.module.workForce.capacity,t=Ue.get(this.module.workForce.race.id);t.consumption.forEach(o=>{this.needs.push({amount:o.amount*e/t.amount,ware:o.ware})})}}else this.module=null,this.production=null,this.needs=[]}}class Ee{static calculate(e,t,o){let i=0==o||0==t?0:o/t;i>1&&(i=1);let n={};e.length>0&&(n=e.map(e=>{const t=e.needs.map(t=>({ware:t.ware,count:e.count,amount:-t.amount,efficiency:100,name:e.module.name,total:e.count*-t.amount}));if(e.production){const o=e.production.value.effects?e.production.value.effects.find(e=>e.type==xe.a.work):null,n=null==o?1:1+o.product*i;t.push({ware:e.production.ware,count:e.count,amount:e.production.amount,efficiency:100*n,name:e.module.name,total:e.count*e.production.amount*n})}return t}).reduce((e,t)=>e.concat(t)).reduce(function(e,t){return e[t.ware.id]=e[t.ware.id]||[],e[t.ware.id].push(t),e},{}));const r=[];for(const s in n)if(n.hasOwnProperty(s)){const e=n[s];let t=0;e.forEach(e=>{t+=e.total}),r.push({ware:e[0].ware,amount:t,items:e})}return r}}var Pe=o("9PR/"),Ie=function(e){return e[e.expense=0]="expense",e[e.product=1]="product",e}({});class De{constructor(e,t,o,i,n){this.item=e,this.component=t,this.minPrice=o,this.maxPrice=i,this.items=n}get module(){return this.item.module}get count(){return this.item.count}get price(){return this.item.count*(this.minPrice+(this.maxPrice-this.minPrice)*this.component.modulesResourcesPrice/100)}}class Me{constructor(e,t,o){this.ware=e,this.amount=t,this.component=o}get price(){return this.amount*(this.ware.price.min+(this.ware.price.max-this.ware.price.min)*this.component.modulesResourcesPrice/100)}}class Re{constructor(e,t,o,i=null){this.model=e,this.pricePercentage=t,this.priceType=o,this.warePrice=i}get name(){return this.model.ware.name}get amount(){return this.model.amount}get price(){return null!=this.warePrice?0:this.model.ware.price.min+(this.model.ware.price.max-this.model.ware.price.min)*(this.priceType==Ie.expense?this.pricePercentage.resourcesPrice:this.pricePercentage.productsPrice)/100}}let Le=(()=>{class e{constructor(){this.partialWorkforceChanged=new d.a,this.partialWorkforce=0}setPartialWorkforce(e){this.partialWorkforce=e,this.partialWorkforceChanged.next(this.partialWorkforce)}get $partialWorkforce(){return this.partialWorkforce}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function Oe(e,t){1&e&&i.Qb(0,"i",55)}function $e(e,t){1&e&&i.Qb(0,"i",56)}function ze(e,t){if(1&e&&(i.Ub(0,"tr",59),i.Ub(1,"td",60),i.Ec(2),i.Tb(),i.Ub(3,"td",11),i.Ec(4),i.kc(5,"number"),i.Tb(),i.Tb()),2&e){const e=t.$implicit;i.Cb(2),i.Hc("",e.count," x ",e.name,""),i.Cb(2),i.Gc("-",i.mc(5,3,e.amount*e.count,"1.0-0"),"")}}function Ae(e,t){1&e&&(i.Ub(0,"tr",59),i.Ub(1,"td",60),i.Ec(2," 1 x Unknown Module "),i.Tb(),i.Ub(3,"td",11),i.Ec(4,"-200"),i.Tb(),i.Tb())}function Fe(e,t){if(1&e&&(i.Sb(0),i.Cc(1,ze,6,6,"tr",57),i.Cc(2,Ae,5,0,"tr",58),i.Rb()),2&e){const e=i.jc();i.Cb(1),i.pc("ngForOf",e.workforceNeeded),i.Cb(1),i.pc("ngIf",e.isHq)}}function je(e,t){1&e&&i.Qb(0,"i",55)}function We(e,t){1&e&&i.Qb(0,"i",56)}function Ye(e,t){if(1&e&&(i.Ub(0,"tr",30),i.Ub(1,"td",60),i.Ec(2),i.Tb(),i.Ub(3,"td",11),i.Ec(4),i.kc(5,"number"),i.Tb(),i.Tb()),2&e){const e=t.$implicit;i.Cb(2),i.Hc("",e.count," x ",e.name,""),i.Cb(2),i.Gc("+",i.mc(5,3,e.amount*e.count,"1.0-0"),"")}}function Be(e,t){if(1&e&&(i.Sb(0),i.Cc(1,Ye,6,6,"tr",61),i.Rb()),2&e){const e=i.jc();i.Cb(1),i.pc("ngForOf",e.workforceCapacity)}}function Ne(e,t){1&e&&i.Qb(0,"i",55)}function Ge(e,t){1&e&&i.Qb(0,"i",56)}const He=function(e,t){return{"text-danger":e,"text-warning":t}};function Ve(e,t){if(1&e&&(i.Ub(0,"tr",9),i.Ub(1,"td",63),i.Ec(2),i.kc(3,"number"),i.Tb(),i.Ub(4,"td",11),i.Ec(5),i.kc(6,"number"),i.Tb(),i.Tb()),2&e){const e=t.$implicit;i.pc("ngClass",i.tc(10,He,e.price>0,0==e.price)),i.Cb(2),i.Hc("",i.mc(3,4,e.amount,"1.0-0")," x ",e.name,""),i.Cb(3),i.Gc(" ",i.mc(6,7,e.amount*e.price,"1.0-0")," ")}}function Qe(e,t){if(1&e&&(i.Sb(0),i.Cc(1,Ve,7,13,"tr",62),i.Rb()),2&e){const e=i.jc();i.Cb(1),i.pc("ngForOf",e.resourcesNeeded)}}function qe(e,t){1&e&&i.Qb(0,"i",55)}function Xe(e,t){1&e&&i.Qb(0,"i",56)}function Ke(e,t){if(1&e&&(i.Ub(0,"tr",65),i.Ub(1,"td",63),i.Ec(2),i.kc(3,"number"),i.Tb(),i.Ub(4,"td",11),i.Ec(5),i.kc(6,"number"),i.Tb(),i.Tb()),2&e){const e=t.$implicit;i.Cb(2),i.Hc("",i.mc(3,3,e.amount,"1.0-0")," x ",e.name,""),i.Cb(3),i.Gc("+",i.mc(6,6,e.amount*e.price,"1.0-0"),"")}}function Je(e,t){if(1&e&&(i.Sb(0),i.Cc(1,Ke,7,9,"tr",64),i.Rb()),2&e){const e=i.jc();i.Cb(1),i.pc("ngForOf",e.resourcesProduced)}}function Ze(e,t){1&e&&(i.Sb(0),i.Ub(1,"span"),i.Yb(2,66),i.Tb(),i.Rb())}function et(e,t){1&e&&(i.Sb(0),i.Ub(1,"span"),i.Yb(2,67),i.Tb(),i.Rb())}function tt(e,t){1&e&&(i.Sb(0),i.Ub(1,"span"),i.Yb(2,68),i.Tb(),i.Rb())}function ot(e,t){if(1&e&&(i.Sb(0),i.Ec(1),i.Rb()),2&e){const e=i.jc();i.Cb(1),i.Gc("",e.resourcesPrice,"%")}}function it(e,t){1&e&&(i.Sb(0),i.Ub(1,"span"),i.Yb(2,69),i.Tb(),i.Rb())}function nt(e,t){1&e&&(i.Sb(0),i.Ub(1,"span"),i.Yb(2,70),i.Tb(),i.Rb())}function rt(e,t){1&e&&(i.Sb(0),i.Ub(1,"span"),i.Yb(2,71),i.Tb(),i.Rb())}function st(e,t){if(1&e&&(i.Sb(0),i.Ec(1),i.Rb()),2&e){const e=i.jc();i.Cb(1),i.Gc("",e.productsPrice,"%")}}function ct(e,t){1&e&&i.Qb(0,"i",55)}function at(e,t){1&e&&i.Qb(0,"i",56)}function lt(e,t){if(1&e&&(i.Ub(0,"tr"),i.Ub(1,"td",63),i.Ec(2),i.Tb(),i.Ub(3,"td",11),i.Ec(4),i.kc(5,"number"),i.Tb(),i.Tb()),2&e){const e=t.$implicit,o=i.jc(2).$implicit;i.Cb(2),i.Hc("",o.count*e.amount," x ",e.ware.name,""),i.Cb(2),i.Gc(" ",i.mc(5,3,o.count*e.price,"1.0-0")," ")}}function dt(e,t){if(1&e&&(i.Sb(0),i.Cc(1,lt,6,6,"tr",50),i.Rb()),2&e){const e=i.jc().$implicit;i.Cb(1),i.pc("ngForOf",e.items)}}function ut(e,t){if(1&e){const e=i.Vb();i.Sb(0),i.Ub(1,"tr",6),i.hc("click",function(){i.xc(e);const o=t.$implicit;return i.jc().toggleExpanded(o.module.id)}),i.Ub(2,"td"),i.Cc(3,ct,1,0,"i",7),i.Cc(4,at,1,0,"i",8),i.Ec(5),i.Tb(),i.Ub(6,"td",11),i.Ec(7),i.kc(8,"number"),i.Tb(),i.Tb(),i.Cc(9,dt,2,1,"ng-container",12),i.Rb()}if(2&e){const e=t.$implicit,o=i.jc();i.Cb(3),i.pc("ngIf",!o.expandState[e.module.id]),i.Cb(1),i.pc("ngIf",o.expandState[e.module.id]),i.Cb(1),i.Hc(" ",e.count," x ",e.module.name," "),i.Cb(2),i.Gc(" ",i.mc(8,6,e.price,"1.0-0")," "),i.Cb(2),i.pc("ngIf",o.expandState[e.module.id])}}function ht(e,t){if(1&e&&(i.Ub(0,"tr"),i.Ub(1,"td",11),i.Ec(2),i.Tb(),i.Ub(3,"td",11),i.Ec(4),i.kc(5,"number"),i.Tb(),i.Tb()),2&e){const e=t.$implicit;i.Cb(2),i.Fc(e.ware.name),i.Cb(2),i.Fc(i.mc(5,2,e.value,"1.0-0"))}}function bt(e,t){1&e&&(i.Sb(0),i.Ub(1,"span"),i.Yb(2,72),i.Tb(),i.Rb())}function pt(e,t){1&e&&(i.Sb(0),i.Ub(1,"span"),i.Yb(2,73),i.Tb(),i.Rb())}function mt(e,t){1&e&&(i.Sb(0),i.Ub(1,"span"),i.Yb(2,74),i.Tb(),i.Rb())}function ft(e,t){if(1&e&&(i.Sb(0),i.Ec(1),i.Rb()),2&e){const e=i.jc();i.Cb(1),i.Gc("",e.modulesResourcesPrice,"%")}}const gt=function(e,t){return{"text-danger":e,"text-success":t}};let _t=(()=>{class e{constructor(e,t){this.wareService=e,this.stationSummaryService=t,this.expandState={},this.provideBasicResources=!1,this.provideAllResources=!1,this.isHq=!1,this.resourcesPrice=50,this.productsPrice=50,this.modulesResourcesPrice=50,this._totalWorkforce=0,this.totalWorkforceCapacity=0,this.partialWorkforce=0,this.workforceNeeded=[],this.workforceCapacity=[],this.resourcesNeeded=[],this.resourcesProduced=[],this.totalModuleResourceCosts=[],this.change=new i.n}get modules(){return this._modules}set modules(e){this._modules=e,this.update()}get totalWorkforce(){return this._totalWorkforce+(this.isHq?200:0)}onChange(){this.update(),this.change.emit()}update(){if(this._totalWorkforce=0,this.workforceNeeded=[],this.workforceCapacity=[],this.resourcesNeeded=[],this.resourcesProduced=[],this.moduleCosts=[],null==this.modules)return;this.modules.forEach(e=>{if(null!=e.module&&null!=e.module.workForce&&(null!=e.module.workForce.max&&(this._totalWorkforce+=e.count*e.module.workForce.max,this.workforceNeeded.push({amount:e.module.workForce.max,name:e.module.name,count:e.count})),null!=e.module.workForce.capacity&&this.workforceCapacity.push({amount:e.module.workForce.capacity,name:e.module.name,count:e.count})),null!=e.module){const t=this.getModuleCost(e);null!=t&&this.moduleCosts.push(t)}});let t=this.modules.reduce((e,t)=>t.module&&t.module.workForce&&t.module.workForce.capacity?e+t.count*t.module.workForce.capacity:e,0);this.totalWorkforceCapacity!=t&&(this.totalWorkforceCapacity=t,this.partialWorkforce=t),this.stationSummaryService.setPartialWorkforce(this.partialWorkforce);const o=Ee.calculate(this.modules,this._totalWorkforce,this.partialWorkforce);o.sort((e,t)=>this.wareService.compareWares(e.ware,t.ware)),o.forEach(t=>{if(t.amount<0){let o=null;(this.provideAllResources||this.provideBasicResources&&e.basicResources.indexOf(t.ware.group)>=0)&&(o=0);const i=new Re(t,this,Ie.expense,o);this.resourcesNeeded.push(i)}else if(t.amount>0){const e=new Re(t,this,Ie.product);this.resourcesProduced.push(e)}}),this.totalModuleResourceCosts=[],this.moduleCosts.forEach(e=>{e.items.forEach(t=>{let o=this.totalModuleResourceCosts.find(e=>e.ware.id==t.ware.id);null==o?(o={ware:t.ware,value:e.count*t.amount},this.totalModuleResourceCosts.push(o)):o.value+=e.count*t.amount})})}get totalExpenses(){let e=0;return this.resourcesNeeded.forEach(t=>{e+=t.amount*t.price}),e}get totalProfits(){let e=0;return this.resourcesProduced.forEach(t=>{e+=t.amount*t.price}),e}get totalModuleCost(){let e=0;return this.moduleCosts.forEach(t=>{e+=t.price}),e}getModuleCost(e){const t=e.module.production[0];if(!t)return null;let o=0,i=0;const n=[];return t.wares.forEach(e=>{const t=this.wareService.getEntity(e.ware);o+=t.price.min*e.amount,i+=t.price.max*e.amount,n.push(new Me(t,e.amount,this))}),new De(e,this,o,i,n)}toggleExpanded(e){this.expandState[e]=!this.expandState[e]}}return e.basicResources=[Pe.a.gases,Pe.a.minerals,Pe.a.ice],e.\u0275fac=function(t){return new(t||e)(i.Pb(pe.a),i.Pb(Le))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-station-summary"]],inputs:{modules:"modules"},outputs:{change:"change"},decls:149,vars:67,consts:function(){let e,t,o,i,n,r,s,c,a,l,d,u,h,b,p,m,f,g,_,v,C,y,w,T,k,U,x,S;return e=$localize`:@@workforce␟01587c6ea6d4de84678bb79ca36a98e5b2035a69␟8629714743305369533:Workforce`,t=$localize`:@@value␟5049e204c14c648691ac775a64fb504467aeb549␟6555318547274416232:Value`,o=$localize`:@@neededWorkforce␟de4e36127e6ba50375480462b127a82b9a283f52␟8949269492548556387: Needed Workforce `,i=$localize`:@@workforceCapacity␟e748798c6cc9162c1874eeb9a0438b44fb321a28␟4450125586797900986: Workforce Capacity `,n=$localize`:@@isHeadquarters␟cbcbf5392150ff0aca9d5550a90b15bce99f72c4␟2674413591253327227:Headquarters (The HQ needs 200 workers for some reason)`,r=$localize`:@@actualWorkforce␟a8ac08e20bca1f38d1601def7b210b5eb6c05218␟7090424968850798877:Actual Workforce:`,s=$localize`:@@productionPerHour␟168e82fbbb21c0d8c5d5fcbda7f57c0b0561b8fb␟2159000720808656354:Production Per Hour`,c=$localize`:@@amount␟dfc2fb58e2a04ed944a4bd80f0a2087775134068␟6533918067030990396:Amount`,a=$localize`:@@expenses␟935174cb0d7a7607a0d8d587bfc133dabc0a3e5f␟3274702092887675568: Expenses`,l=$localize`:@@production␟0f0ef5f1bb14e77852720f5e3bb8acbc48ff3155␟5052335382418789339: Production`,d=$localize`:@@profit␟8928d22ff8cfee2287d5682a2d091128f2b2555b␟2775162648346514817: Profit`,u=$localize`:@@minersProvideBasicResources␟0c66bebfec7b7b9a1e8f9f095bebd9099a60aa5b␟6102675801466902911:Miners provide basic resources`,h=$localize`:@@rovideAllResources␟f218655003d463664dc8a862a6167dd1a4854bdc␟8130704121672385920:Resources are provided by other stations`,b=$localize`:@@resourcePrice␟df8a8f7573cffa06e6c48c72fdee089eea3a6971␟6120421684213850873:Resources Price:`,p=$localize`:@@productsPrice␟6e8b9812913e4903a1cb99fe61d145bafc0117d9␟2147362910958557897:Products Price:`,m=$localize`:@@stationCosts␟1b27238e050fb724d4f9960b1960fbc70f943dad␟6689280018176731215:Station Costs`,f=$localize`:@@amount␟dfc2fb58e2a04ed944a4bd80f0a2087775134068␟6533918067030990396:Amount`,g=$localize`:@@total␟e657507a4e9ff27ce501080e9e0b93cf6811a185␟7349530031233006058:Total:`,_=$localize`:@@resourcesPrice␟df8a8f7573cffa06e6c48c72fdee089eea3a6971␟6120421684213850873:Resources Price:`,v=$localize`:@@min␟9abcd7c82643d60c22733470463f74e4a54bc069␟4912803901980915876:Min`,C=$localize`:@@average␟578f3696ab5ffb8fc85da042cb38d898c9ca894b␟6685892931357659955:Average`,y=$localize`:@@max␟c3ced4d162a0a55ee233a187ce7208ba5e922418␟3667949571823271511:Max`,w=$localize`:@@min␟9abcd7c82643d60c22733470463f74e4a54bc069␟4912803901980915876:Min`,T=$localize`:@@average␟578f3696ab5ffb8fc85da042cb38d898c9ca894b␟6685892931357659955:Average`,k=$localize`:@@max␟c3ced4d162a0a55ee233a187ce7208ba5e922418␟3667949571823271511:Max`,U=$localize`:@@min␟9abcd7c82643d60c22733470463f74e4a54bc069␟4912803901980915876:Min`,x=$localize`:@@average␟578f3696ab5ffb8fc85da042cb38d898c9ca894b␟6685892931357659955:Average`,S=$localize`:@@max␟c3ced4d162a0a55ee233a187ce7208ba5e922418␟3667949571823271511:Max`,[[1,"table","table-sm","small","table-hover"],[1,"bg-light"],["scope","col"],e,["scope","col",1,"text-right"],t,[1,"hover",3,"click"],["class","fa fa-angle-double-down",4,"ngIf"],["class","fa fa-angle-double-up",4,"ngIf"],[3,"ngClass"],o,[1,"text-right"],[4,"ngIf"],i,["colspan","2"],[1,"form-check"],["type","checkbox","id","is-hq",1,"form-check-input",3,"ngModel","ngModelChange"],["for","is-hq",1,"form-check-label"],n,[1,"row"],[1,"form-group","col"],["for","workforce-slider"],r,["type","range","id","workforce-slider","min","0","step","1",1,"form-control-range","small",3,"max","ngModel","ngModelChange"],s,c,[1,"hover","text-danger",3,"click"],a,[1,"hover","text-primary",3,"click"],l,[1,"text-success"],[1,"fa","fa-line-chart"],d,["type","checkbox","id","basic-resources",1,"form-check-input",3,"ngModel","ngModelChange"],["for","basic-resources",1,"form-check-label"],u,["type","checkbox","id","all-resources",1,"form-check-input",3,"ngModel","ngModelChange"],["for","all-resources",1,"form-check-label"],h,["for","resources-price"],b,[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["type","range","id","resources-price","min","0","max","100","step","5",1,"form-control-range","small",3,"ngModel","ngModelChange"],["for","products-price"],p,["type","range","id","products-price","min","0","max","100","step","5",1,"form-control-range","small",3,"ngModel","ngModelChange"],m,f,[4,"ngFor","ngForOf"],g,["for","modules-resources-price"],_,["type","range","id","modules-resources-price","min","0","max","100","step","5",1,"form-control-range","small",3,"ngModel","ngModelChange"],[1,"fa","fa-angle-double-down"],[1,"fa","fa-angle-double-up"],["class","text-danger",4,"ngFor","ngForOf"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"pl-4"],["class","text-success",4,"ngFor","ngForOf"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"pl-5"],["class","text-primary",4,"ngFor","ngForOf"],[1,"text-primary"],v,C,y,w,T,k,U,x,S]},template:function(e,t){1&e&&(i.Ub(0,"table",0),i.Ub(1,"thead"),i.Ub(2,"tr",1),i.Ub(3,"th",2),i.Yb(4,3),i.Tb(),i.Ub(5,"th",4),i.Yb(6,5),i.Tb(),i.Tb(),i.Tb(),i.Ub(7,"tbody"),i.Ub(8,"tr",6),i.hc("click",function(){return t.toggleExpanded("totalWorkforce")}),i.Ub(9,"td"),i.Cc(10,Oe,1,0,"i",7),i.Cc(11,$e,1,0,"i",8),i.Ub(12,"span",9),i.Yb(13,10),i.Tb(),i.Tb(),i.Ub(14,"td",11),i.Ec(15),i.kc(16,"number"),i.Tb(),i.Tb(),i.Cc(17,Fe,3,2,"ng-container",12),i.Ub(18,"tr",6),i.hc("click",function(){return t.toggleExpanded("totalWorkforceCapacity")}),i.Ub(19,"td"),i.Cc(20,je,1,0,"i",7),i.Cc(21,We,1,0,"i",8),i.Ub(22,"span",9),i.Yb(23,13),i.Tb(),i.Tb(),i.Ub(24,"td",11),i.Ec(25),i.kc(26,"number"),i.Tb(),i.Tb(),i.Cc(27,Be,2,1,"ng-container",12),i.Ub(28,"tr"),i.Ub(29,"td",14),i.Ub(30,"div",15),i.Ub(31,"input",16),i.hc("ngModelChange",function(e){return t.isHq=e})("ngModelChange",function(){return t.onChange()}),i.Tb(),i.Ub(32,"label",17),i.Yb(33,18),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Ub(34,"tr"),i.Ub(35,"td",14),i.Ub(36,"div",19),i.Ub(37,"div",20),i.Ub(38,"label",21),i.Ub(39,"span"),i.Yb(40,22),i.Tb(),i.Ec(41,"\xa0"),i.Ub(42,"strong"),i.Ec(43),i.Tb(),i.Tb(),i.Ub(44,"input",23),i.hc("ngModelChange",function(e){return t.partialWorkforce=e})("ngModelChange",function(){return t.onChange()}),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Ub(45,"table",0),i.Ub(46,"thead"),i.Ub(47,"tr",1),i.Ub(48,"th",2),i.Yb(49,24),i.Tb(),i.Ub(50,"th",4),i.Yb(51,25),i.Tb(),i.Tb(),i.Tb(),i.Ub(52,"tbody"),i.Ub(53,"tr",26),i.hc("click",function(){return t.toggleExpanded("totalExpenses")}),i.Ub(54,"td"),i.Cc(55,Ne,1,0,"i",7),i.Cc(56,Ge,1,0,"i",8),i.Ub(57,"span"),i.Yb(58,27),i.Tb(),i.Tb(),i.Ub(59,"td",11),i.Ec(60),i.kc(61,"number"),i.Tb(),i.Tb(),i.Cc(62,Qe,2,1,"ng-container",12),i.Ub(63,"tr",28),i.hc("click",function(){return t.toggleExpanded("totalProfits")}),i.Ub(64,"td"),i.Cc(65,qe,1,0,"i",7),i.Cc(66,Xe,1,0,"i",8),i.Ub(67,"span"),i.Yb(68,29),i.Tb(),i.Tb(),i.Ub(69,"td",11),i.Ec(70),i.kc(71,"number"),i.Tb(),i.Tb(),i.Cc(72,Je,2,1,"ng-container",12),i.Ub(73,"tr",30),i.Ub(74,"td"),i.Qb(75,"i",31),i.Ub(76,"strong"),i.Yb(77,32),i.Tb(),i.Tb(),i.Ub(78,"td",11),i.Ub(79,"strong"),i.Ec(80),i.kc(81,"number"),i.Tb(),i.Tb(),i.Tb(),i.Ub(82,"tr"),i.Ub(83,"td",14),i.Ub(84,"div",15),i.Ub(85,"input",33),i.hc("ngModelChange",function(e){return t.provideBasicResources=e})("ngModelChange",function(){return t.onChange()}),i.Tb(),i.Ub(86,"label",34),i.Yb(87,35),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Ub(88,"tr"),i.Ub(89,"td",14),i.Ub(90,"div",15),i.Ub(91,"input",36),i.hc("ngModelChange",function(e){return t.provideAllResources=e})("ngModelChange",function(){return t.onChange()}),i.Tb(),i.Ub(92,"label",37),i.Yb(93,38),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Ub(94,"tr"),i.Ub(95,"td",14),i.Ub(96,"div",19),i.Ub(97,"div",20),i.Ub(98,"label",39),i.Ub(99,"span"),i.Yb(100,40),i.Tb(),i.Ec(101,"\xa0 "),i.Ub(102,"strong",41),i.Cc(103,Ze,3,0,"ng-container",42),i.Cc(104,et,3,0,"ng-container",42),i.Cc(105,tt,3,0,"ng-container",42),i.Cc(106,ot,2,1,"ng-container",43),i.Tb(),i.Tb(),i.Ub(107,"input",44),i.hc("ngModelChange",function(e){return t.resourcesPrice=e})("ngModelChange",function(){return t.onChange()}),i.Tb(),i.Tb(),i.Ub(108,"div",20),i.Ub(109,"label",45),i.Ub(110,"span"),i.Yb(111,46),i.Tb(),i.Ec(112,"\xa0 "),i.Ub(113,"strong",41),i.Cc(114,it,3,0,"ng-container",42),i.Cc(115,nt,3,0,"ng-container",42),i.Cc(116,rt,3,0,"ng-container",42),i.Cc(117,st,2,1,"ng-container",43),i.Tb(),i.Tb(),i.Ub(118,"input",47),i.hc("ngModelChange",function(e){return t.productsPrice=e})("ngModelChange",function(){return t.onChange()}),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Ub(119,"table",0),i.Ub(120,"thead"),i.Ub(121,"tr",1),i.Ub(122,"th",2),i.Yb(123,48),i.Tb(),i.Ub(124,"th",4),i.Yb(125,49),i.Tb(),i.Tb(),i.Tb(),i.Ub(126,"tbody"),i.Cc(127,ut,10,9,"ng-container",50),i.Ub(128,"tr"),i.Ub(129,"th",11),i.Yb(130,51),i.Tb(),i.Ub(131,"th",11),i.Ec(132),i.kc(133,"number"),i.Tb(),i.Tb(),i.Cc(134,ht,6,5,"tr",50),i.Ub(135,"tr"),i.Ub(136,"td",14),i.Ub(137,"div",19),i.Ub(138,"div",20),i.Ub(139,"label",52),i.Ub(140,"span"),i.Yb(141,53),i.Tb(),i.Ec(142,"\xa0 "),i.Ub(143,"strong",41),i.Cc(144,bt,3,0,"ng-container",42),i.Cc(145,pt,3,0,"ng-container",42),i.Cc(146,mt,3,0,"ng-container",42),i.Cc(147,ft,2,1,"ng-container",43),i.Tb(),i.Tb(),i.Ub(148,"input",54),i.hc("ngModelChange",function(e){return t.modulesResourcesPrice=e})("ngModelChange",function(){return t.onChange()}),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Tb()),2&e&&(i.Cb(10),i.pc("ngIf",!t.expandState.totalWorkforce),i.Cb(1),i.pc("ngIf",t.expandState.totalWorkforce),i.Cb(1),i.pc("ngClass",i.tc(61,gt,t.totalWorkforce>t.totalWorkforceCapacity,t.totalWorkforce<=t.totalWorkforceCapacity)),i.Cb(3),i.Fc(i.mc(16,43,t.totalWorkforce,"1.0-0")),i.Cb(2),i.pc("ngIf",t.expandState.totalWorkforce),i.Cb(3),i.pc("ngIf",!t.expandState.totalWorkforceCapacity),i.Cb(1),i.pc("ngIf",t.expandState.totalWorkforceCapacity),i.Cb(1),i.pc("ngClass",i.tc(64,gt,t.totalWorkforce>t.totalWorkforceCapacity,t.totalWorkforce<=t.totalWorkforceCapacity)),i.Cb(3),i.Gc(" ",i.mc(26,46,t.totalWorkforceCapacity,"1.0-0")," "),i.Cb(2),i.pc("ngIf",t.expandState.totalWorkforceCapacity),i.Cb(4),i.pc("ngModel",t.isHq),i.Cb(12),i.Fc(t.partialWorkforce),i.Cb(1),i.pc("max",t.totalWorkforceCapacity)("ngModel",t.partialWorkforce),i.Cb(11),i.pc("ngIf",!t.expandState.totalExpenses),i.Cb(1),i.pc("ngIf",t.expandState.totalExpenses),i.Cb(4),i.Fc(i.mc(61,49,t.totalExpenses,"1.0-0")),i.Cb(2),i.pc("ngIf",t.expandState.totalExpenses),i.Cb(3),i.pc("ngIf",!t.expandState.totalProfits),i.Cb(1),i.pc("ngIf",t.expandState.totalProfits),i.Cb(4),i.Fc(i.mc(71,52,t.totalProfits,"1.0-0")),i.Cb(2),i.pc("ngIf",t.expandState.totalProfits),i.Cb(8),i.Fc(i.mc(81,55,t.totalProfits+t.totalExpenses,"1.0-0")),i.Cb(5),i.pc("ngModel",t.provideBasicResources),i.Cb(6),i.pc("ngModel",t.provideAllResources),i.Cb(11),i.pc("ngSwitch",t.resourcesPrice),i.Cb(1),i.pc("ngSwitchCase",0),i.Cb(1),i.pc("ngSwitchCase",50),i.Cb(1),i.pc("ngSwitchCase",100),i.Cb(2),i.pc("ngModel",t.resourcesPrice),i.Cb(6),i.pc("ngSwitch",t.productsPrice),i.Cb(1),i.pc("ngSwitchCase",0),i.Cb(1),i.pc("ngSwitchCase",50),i.Cb(1),i.pc("ngSwitchCase",100),i.Cb(2),i.pc("ngModel",t.productsPrice),i.Cb(9),i.pc("ngForOf",t.moduleCosts),i.Cb(5),i.Fc(i.mc(133,58,t.totalModuleCost,"1.0-0")),i.Cb(2),i.pc("ngForOf",t.totalModuleResourceCosts),i.Cb(9),i.pc("ngSwitch",t.modulesResourcesPrice),i.Cb(1),i.pc("ngSwitchCase",0),i.Cb(1),i.pc("ngSwitchCase",50),i.Cb(1),i.pc("ngSwitchCase",100),i.Cb(2),i.pc("ngModel",t.modulesResourcesPrice))},directives:[n.l,n.j,Z.a,Z.f,Z.g,Z.j,Z.b,n.m,n.n,n.o,n.k],pipes:[n.d],encapsulation:2}),e})();var vt=o("9QbX"),Ct=o("jhN1");function yt(e,t){if(1&e){const e=i.Vb();i.Ub(0,"div",9),i.hc("click",function(){i.xc(e);const o=t.$implicit;return i.jc(4).onClick(o)}),i.Ub(1,"label"),i.Ec(2),i.Tb(),i.Tb()}if(2&e){const e=t.$implicit;i.Cb(2),i.Fc(e.name)}}function wt(e,t){if(1&e&&(i.Ub(0,"div",6),i.Ub(1,"label",7),i.Ub(2,"b"),i.Ec(3),i.Tb(),i.Tb(),i.Cc(4,yt,3,1,"div",8),i.Tb()),2&e){const e=i.jc().$implicit;i.Cb(3),i.Fc(e.name),i.Cb(1),i.pc("ngForOf",e.modules)}}function Tt(e,t){if(1&e&&(i.Sb(0),i.Cc(1,wt,5,2,"div",5),i.Rb()),2&e){const e=t.$implicit;i.Cb(1),i.pc("ngIf",e.modules.length>0)}}function kt(e,t){if(1&e){const e=i.Vb();i.Ub(0,"div",3),i.hc("focus",function(){return i.xc(e),i.jc().onFocus()})("blur",function(){return i.xc(e),i.jc().onBlur()}),i.Cc(1,Tt,2,1,"ng-container",4),i.Tb()}if(2&e){const e=i.jc();i.Cb(1),i.pc("ngForOf",e.filteredGroups)}}let Ut=(()=>{class e{constructor(){this.id=null,this.groups=[],this.filteredGroups=[],this.selectModule=new i.n,this.inputString="",this.visible=!1}ngOnInit(){this.filteredGroups=this.groups.map(e=>Object.assign({},e)),this.setName()}filterModules(e){for(let t=0;t<this.groups.length;t++)this.filteredGroups[t].modules=[...this.groups[t].modules.filter(t=>t.name.trim().toLowerCase().includes(e.trim().toLowerCase()))]}changed(e){e?this.filterModules(e):this.filteredGroups=this.groups.map(e=>Object.assign({},e))}onFocus(){clearTimeout(this.timeout),this.filterModules(this.inputString),this.visible=!0}onBlur(){this.timeout=setTimeout(()=>{this.setName(),this.visible=!1},100)}onClick(e){this.inputString=e.name,this.filterModules(this.inputString),this.selectModule.emit(e.id),this.visible=!1}setName(){this.id&&this.groups.forEach(e=>{const t=e.modules.filter(e=>e.id===this.id)[0];t&&(this.inputString=t.name)})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Jb({type:e,selectors:[["app-autocomplete"]],inputs:{id:"id",groups:"groups"},outputs:{selectModule:"selectModule"},decls:3,vars:2,consts:function(){let e;return e=$localize`:@@select␟d8b6e86ac30baad6123c1bc904f7b1c7553b6913␟3229851246134324776:( Select )`,[[1,"autocomplete-container"],["type","search","placeholder",e,1,"form-control","form-control-sm",3,"ngModel","ngModelChange","focus","blur"],["tabindex","0","class","autocomplete",3,"focus","blur",4,"ngIf"],["tabindex","0",1,"autocomplete",3,"focus","blur"],[4,"ngFor","ngForOf"],["class","autocomplete__group-container",4,"ngIf"],[1,"autocomplete__group-container"],[1,"autocomplete__group-title"],["class","autocomplete__group-item",3,"click",4,"ngFor","ngForOf"],[1,"autocomplete__group-item",3,"click"]]},template:function(e,t){1&e&&(i.Ub(0,"div",0),i.Ub(1,"input",1),i.hc("ngModelChange",function(e){return t.inputString=e})("ngModelChange",function(e){return t.changed(e)})("focus",function(){return t.onFocus()})("blur",function(){return t.onBlur()}),i.Tb(),i.Cc(2,kt,2,1,"div",2),i.Tb()),2&e&&(i.Cb(1),i.pc("ngModel",t.inputString),i.Cb(1),i.pc("ngIf",t.visible))},directives:[Z.b,Z.f,Z.g,n.l,n.k],styles:[".autocomplete-container[_ngcontent-%COMP%]{position:relative}.autocomplete[_ngcontent-%COMP%]{max-height:40vh;overflow:hidden;overflow-y:scroll;position:absolute;background-color:#fff;border-radius:.2rem;border:1px solid #ced4da;z-index:1}.autocomplete__group-title[_ngcontent-%COMP%]{color:rgba(0,0,0,.7);font-size:1.15em;padding-left:10px}.autocomplete__group-item[_ngcontent-%COMP%]{font-size:1.1em;padding-left:20px;padding-right:10px}.autocomplete__group-item[_ngcontent-%COMP%]:hover{background-color:rgba(0,0,0,.2);cursor:pointer}.autocomplete__group-item[_ngcontent-%COMP%]:hover   label[_ngcontent-%COMP%]{cursor:pointer}label[_ngcontent-%COMP%]{margin:0}input[type=search][_ngcontent-%COMP%]::-webkit-search-cancel-button{-webkit-appearance:searchfield-cancel-button}"]}),e})();function xt(e,t){if(1&e&&(i.Ub(0,"div"),i.Ec(1),i.Tb()),2&e){const e=i.jc().$implicit;i.Cb(1),i.Gc(" ",e.module.name," ")}}function St(e,t){if(1&e){const e=i.Vb();i.Ub(0,"tr",15),i.Ub(1,"td"),i.Cc(2,xt,2,1,"div",16),i.Ub(3,"div",17),i.Ub(4,"app-autocomplete",18),i.hc("selectModule",function(o){i.xc(e);const n=t.$implicit;return i.jc().onSelectModule(o,n)}),i.Tb(),i.Tb(),i.Tb(),i.Ub(5,"td"),i.Ub(6,"div",17),i.Ub(7,"input",19),i.hc("ngModelChange",function(e){return t.$implicit.count=e})("ngModelChange",function(){return i.xc(e),i.jc().onChange()}),i.Tb(),i.Tb(),i.Tb(),i.Ub(8,"td"),i.Qb(9,"i",20),i.Tb(),i.Ub(10,"td"),i.Ub(11,"i",21),i.hc("click",function(){i.xc(e);const o=t.$implicit;return i.jc().removeModule(o)}),i.Tb(),i.Tb(),i.Tb()}if(2&e){const e=t.$implicit,o=i.jc();i.Cb(4),i.pc("id",e.moduleId)("groups",o.wareGroups),i.Cb(3),i.pc("ngModel",e.count)}}let Et=(()=>{class e{constructor(e,t){this.moduleService=e,this.wareService=t,this.change=new i.n}get modules(){return this._modules}set modules(e){this._modules=e}ngOnInit(){const e=this.moduleService.getModulesByType(ye.a.production).reduce((e,t)=>(e[t.product.group.id]=e[t.product.group.id]||{name:t.product.group.name,group:t.product.group,modules:[]},e[t.product.group.id].modules.push(t),e),[]);this.wareGroups=Object.keys(e).map(t=>e[t]).sort((e,t)=>this.wareService.compareGroups(e.group,t.group)),this.wareGroups.push({name:ye.a.habitation,modules:this.moduleService.getModulesByType(ye.a.habitation)}),this.wareGroups.push({name:ye.a.buildmodule,modules:this.moduleService.getModulesByType(ye.a.buildmodule)}),this.wareGroups.push({name:ye.a.dockarea,modules:this.moduleService.getModulesByType(ye.a.dockarea)}),this.wareGroups.push({name:ye.a.pier,modules:this.moduleService.getModulesByType(ye.a.pier)}),this.wareGroups.push({name:ye.a.storage,modules:this.moduleService.getModulesByType(ye.a.storage)}),this.wareGroups.push({name:ye.a.defencemodule,modules:this.moduleService.getModulesByType(ye.a.defencemodule)})}removeModule(e){const t=this.modules.indexOf(e);t>=0&&(this.modules.splice(t,1),this.onChange())}addModule(){this.modules.push(new Se(this.wareService,this.moduleService))}onChange(){this.change.emit()}backfillModules(){for(;;){const e=Ee.calculate(this.modules,0,0);let t=!1;const o=this.modules;for(const i of e){if(i.amount>=0)continue;const e=this.moduleService.getModuleByWare(i.ware.id);if(null==e)continue;t=!0;const n=e.product.production.find(e=>"default"==e.method),r=Math.ceil(-i.amount/(n.amount*(3600/n.time))),s=o.find(t=>{var o;return(null===(o=t.module)||void 0===o?void 0:o.id)==e.id});null==s?o.push(new Se(this.wareService,this.moduleService,e.id,r)):s.count+=r}if(!t)break}this.onChange()}onSelectModule(e,t){this.modules[this.modules.indexOf(t)].moduleId=e,this.onChange()}drop(e){G(this._modules,e.previousIndex,e.currentIndex)}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(ce.a),i.Pb(pe.a))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-station-modules"]],inputs:{modules:"modules"},outputs:{change:"change"},decls:25,vars:1,consts:function(){let e,t,o,i;return e=$localize`:@@module␟c10deee5463bd5458eca86cc2e4a2b87daf41bf1␟1867992058937397585:Module`,t=$localize`:@@count␟06412bce0f4fe4311193e9763666089bf9d980da␟8177873832400820695:Count`,o=$localize`:@@addModule␟599b7dcf22f4392a9f07d49c0d53b783c302f5df␟6979330132409506308:${"\ufffd#18\ufffd"}:START_ITALIC_TEXT:${"\ufffd/#18\ufffd"}:CLOSE_ITALIC_TEXT: Add Module `,i=$localize`:@@backfillModules␟0e3c397fdfb60cabff4cfed415f583c55745074c␟2269073296993820107:Autofill Modules`,[[1,"table","table-sm","table-hover","small"],[1,"bg-light"],["scope","col"],e,t,["aria-hidden","true",1,"fa","fa-ellipsis-v"],["aria-hidden","true",1,"fa","fa-trash"],["cdkDropList","",3,"cdkDropListDropped"],["cdkDrag","","cdkDragBoundary",".table",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-secondary","btn-sm",3,"click"],o,[1,"fa","fa-plus-square"],["type","button",1,"btn","btn-sm","btn-info",3,"click"],[1,"fa","fa-list"],i,["cdkDrag","","cdkDragBoundary",".table"],[4,"cdkDragPreview"],[1,"form-group"],[3,"id","groups","selectModule"],["type","number","placeholder","Module Count","min","0",1,"form-control","form-control-sm",3,"ngModel","ngModelChange"],["cdkDragHandle","",1,"fa","fa-ellipsis-v","move"],["aria-hidden","true",1,"fa","fa-trash","hover",3,"click"]]},template:function(e,t){1&e&&(i.Ub(0,"table",0),i.Ub(1,"thead"),i.Ub(2,"tr",1),i.Ub(3,"th",2),i.Yb(4,3),i.Tb(),i.Ub(5,"th",2),i.Yb(6,4),i.Tb(),i.Ub(7,"th",2),i.Qb(8,"i",5),i.Tb(),i.Ub(9,"th",2),i.Qb(10,"i",6),i.Tb(),i.Tb(),i.Tb(),i.Ub(11,"tbody",7),i.hc("cdkDropListDropped",function(e){return t.drop(e)}),i.Cc(12,St,12,3,"tr",8),i.Tb(),i.Ub(13,"tfoot"),i.Ub(14,"tr"),i.Ub(15,"th"),i.Ub(16,"button",9),i.hc("click",function(){return t.addModule()}),i.cc(17,10),i.Qb(18,"i",11),i.ac(),i.Tb(),i.Ec(19,"\xa0 "),i.Ub(20,"button",12),i.hc("click",function(){return t.backfillModules()}),i.Qb(21,"i",13),i.Ec(22,"\xa0"),i.Ub(23,"span"),i.Yb(24,14),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Tb()),2&e&&(i.Cb(12),i.pc("ngForOf",t.modules))},directives:[q,n.k,Y,O,Ut,Z.i,Z.b,Z.f,Z.g,R],styles:[".cdk-drag-preview[_ngcontent-%COMP%]{background-color:#fff;padding:20px;box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px rgba(0,0,0,.2),0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12)}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.move[_ngcontent-%COMP%]{cursor:move}"]}),e})();function Pt(e,t){1&e&&i.Qb(0,"i",13)}function It(e,t){1&e&&i.Qb(0,"i",14)}function Dt(e,t){if(1&e&&(i.Sb(0),i.Ub(1,"span"),i.Yb(2,18),i.Tb(),i.Ec(3,"\xa0"),i.Ub(4,"strong"),i.Ec(5),i.kc(6,"number"),i.Tb(),i.Ec(7,"\xa0"),i.Ub(8,"span"),i.Yb(9,19),i.Tb(),i.Rb()),2&e){const e=i.jc().$implicit;i.Cb(5),i.Gc("",i.mc(6,1,e.efficiency,"1.0-0"),"%")}}const Mt=function(e,t){return{"text-danger":e,"text-success":t}};function Rt(e,t){if(1&e&&(i.Ub(0,"tr",10),i.Ub(1,"td",16),i.Ub(2,"strong"),i.Ec(3),i.Tb(),i.Ec(4," x "),i.Ub(5,"strong"),i.Ec(6),i.Tb(),i.Cc(7,Dt,10,4,"ng-container",12),i.Tb(),i.Ub(8,"td",17),i.Ec(9),i.kc(10,"number"),i.Tb(),i.Tb()),2&e){const e=t.$implicit;i.pc("ngClass",i.tc(8,Mt,e.total<0,e.total>0)),i.Cb(3),i.Fc(e.count),i.Cb(3),i.Fc(e.name),i.Cb(1),i.pc("ngIf",e.total>0),i.Cb(2),i.Fc(i.mc(10,5,e.total,"1.0-0"))}}function Lt(e,t){if(1&e&&(i.Sb(0),i.Cc(1,Rt,11,11,"tr",15),i.Rb()),2&e){const e=i.jc().$implicit;i.Cb(1),i.pc("ngForOf",e.items)}}function Ot(e,t){if(1&e){const e=i.Vb();i.Sb(0),i.Ub(1,"tr",7),i.hc("click",function(){i.xc(e);const o=t.$implicit;return i.jc().toggleExpanded(o)}),i.Ub(2,"td"),i.Cc(3,Pt,1,0,"i",8),i.Cc(4,It,1,0,"i",9),i.Ub(5,"span",10),i.Ec(6),i.Tb(),i.Tb(),i.Ub(7,"td",11),i.Ec(8),i.kc(9,"number"),i.Tb(),i.Tb(),i.Cc(10,Lt,2,1,"ng-container",12),i.Rb()}if(2&e){const e=t.$implicit;i.Cb(3),i.pc("ngIf",!e.expanded),i.Cb(1),i.pc("ngIf",e.expanded),i.Cb(1),i.pc("ngClass",i.tc(10,Mt,e.amount<0,e.amount>0)),i.Cb(1),i.Gc(" ",e.ware.name,""),i.Cb(1),i.pc("ngClass",i.tc(13,Mt,e.amount<0,e.amount>0)),i.Cb(1),i.Fc(i.mc(9,7,e.amount,"1.0-0")),i.Cb(2),i.pc("ngIf",e.expanded)}}let $t=(()=>{class e{constructor(e,t){this.wareService=e,this.stationSummaryService=t,this.expandState={},this.totalWorkforce=0,this.totalWorkforceCapacity=0,this.partialWorkforce=0,this.resources=[],this.workforceSubscription=this.stationSummaryService.partialWorkforceChanged.subscribe(e=>{this.partialWorkforce=e,this.update()})}get modules(){return this._modules}set modules(e){this._modules=e,this.update()}ngOnInit(){}toggleExpanded(e){e.expanded=!e.expanded,this.expandState[e.ware.id]=e.expanded}update(){if(this.totalWorkforce=0,null==this.modules)return;this.totalWorkforce=this.modules.reduce((e,t)=>t.module&&t.module.workForce&&t.module.workForce.max?e+t.count*t.module.workForce.max:e,0);const e=this.modules.reduce((e,t)=>t.module&&t.module.workForce&&t.module.workForce.capacity?e+t.count*t.module.workForce.capacity:e,0);this.totalWorkforceCapacity!=e&&(this.totalWorkforceCapacity=e,this.partialWorkforce=e),this.resources=Ee.calculate(this.modules,this.totalWorkforce,this.partialWorkforce),this.resources.forEach(e=>{e.expanded=this.expandState[e.items[0].ware.id]}),this.resources.sort((e,t)=>this.wareService.compareWares(e.ware,t.ware))}ngOnDestroy(){this.workforceSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(pe.a),i.Pb(Le))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-station-resources"]],inputs:{modules:"modules"},decls:9,vars:1,consts:function(){let e,t,o,i;return e=$localize`:@@resources␟ffde342dc48f0b074d3dbcbb2f665216a2dd3deb␟1664620352147673062:Resource`,t=$localize`:@@amount␟dfc2fb58e2a04ed944a4bd80f0a2087775134068␟6533918067030990396:Amount`,o=$localize`:@@at␟100f1176cd594389e97bb60c1b909d45f6f585e9␟6900612748392196790: at`,i=$localize`:@@efficiency␟72deae4afe0bd3bf2443477fe56a76c5eb05c8b2␟8891644733531320653:efficiency`,[[1,"table","table-sm","small"],[1,"bg-light"],["scope","col"],e,["scope","col",1,"text-right"],t,[4,"ngFor","ngForOf"],[1,"hover",3,"click"],["class","fa fa-angle-double-down",4,"ngIf"],["class","fa fa-angle-double-up",4,"ngIf"],[3,"ngClass"],[1,"text-right",3,"ngClass"],[4,"ngIf"],[1,"fa","fa-angle-double-down"],[1,"fa","fa-angle-double-up"],[3,"ngClass",4,"ngFor","ngForOf"],[1,"pl-4"],[1,"text-right"],o,i]},template:function(e,t){1&e&&(i.Ub(0,"table",0),i.Ub(1,"thead"),i.Ub(2,"tr",1),i.Ub(3,"th",2),i.Yb(4,3),i.Tb(),i.Ub(5,"th",4),i.Yb(6,5),i.Tb(),i.Tb(),i.Tb(),i.Ub(7,"tbody"),i.Cc(8,Ot,11,16,"ng-container",6),i.Tb(),i.Tb()),2&e&&(i.Cb(8),i.pc("ngForOf",t.resources))},directives:[n.k,n.l,n.j],pipes:[n.d],encapsulation:2}),e})();function zt(e,t){if(1&e){const e=i.Vb();i.Ub(0,"div"),i.Qb(1,"span",2),i.Ub(2,"button",3),i.hc("click",function(){i.xc(e);const o=t.$implicit;return i.jc(2).close(o)}),i.Ub(3,"span",4),i.Ec(4,"\xd7"),i.Tb(),i.Tb(),i.Tb()}if(2&e){const e=t.$implicit;i.Fb("alert alert-",e.type,""),i.Cb(1),i.pc("innerHTML",e.content,i.yc)}}function At(e,t){if(1&e&&(i.Ub(0,"div"),i.Cc(1,zt,5,4,"div",1),i.Tb()),2&e){const e=i.jc();i.Cb(1),i.pc("ngForOf",e.messages)}}let Ft=(()=>{class e{close(e){const t=this.messages.indexOf(e);t>=0&&this.messages.splice(t,1)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Jb({type:e,selectors:[["app-messages"]],inputs:{messages:"messages"},decls:1,vars:1,consts:[[4,"ngIf"],[3,"class",4,"ngFor","ngForOf"],[3,"innerHTML"],["type","button","data-dismiss","alert","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"]],template:function(e,t){1&e&&i.Cc(0,At,2,1,"div",0),2&e&&i.pc("ngIf",t.messages&&t.messages.length)},directives:[n.l,n.k],encapsulation:2}),e})();const jt=["stationResources","stationSummary"];function Wt(e,t){if(1&e&&(i.Ub(0,"div",18),i.Ub(1,"div",29),i.Qb(2,"app-messages",30),i.Tb(),i.Tb()),2&e){const e=i.jc();i.Cb(2),i.pc("messages",e.messages)}}function Yt(e,t){1&e&&(i.Ub(0,"span"),i.Yb(1,31),i.Tb())}function Bt(e,t){if(1&e&&(i.Ub(0,"span",32),i.Ec(1),i.Tb()),2&e){const e=i.jc();i.Cb(1),i.Fc(e.layout.name)}}let Nt=(()=>{class e extends he.a{constructor(e,t,o,i,n,r){super(),this.modal=e,this.route=t,this.layoutService=o,this.titleService=i,this.wareService=n,this.moduleService=r,this.messages=[],this.modules=[]}ngOnInit(){this.titleService.setTitle(`${vt.a} - Station Calculator`),this.route.queryParams.pipe(Object(k.a)(this.onDestroy)).subscribe(e=>{if(e.l)try{const t=e.l.replace(/-/g,"=").replace(/,/g,"&"),o=ue.parse(t);this.modules=o.map(e=>new Se(this.wareService,this.moduleService,e.module,e.count))}catch(t){console.log(t)}}),0===this.modules.length&&this.modules.push(new Se(this.wareService,this.moduleService))}onChange(){this.components.forEach(e=>{e.update()})}shareLayout(){const e=this.modal.open(Ce),t=this.modules.filter(e=>e.count>0&&e.moduleId).map(e=>({module:e.moduleId,count:e.count})),o=ue.stringify(t).replace(/=/g,"-").replace(/&/g,","),i=window.location.href.split("?")[0];e.componentInstance.url=`${i}?l=${o}`}saveLayoutAs(){this.modal.open(ve).result.then(e=>{e&&(this.layout={name:e,resourcesPrice:this.summaryComponent.resourcesPrice,productsPrice:this.summaryComponent.productsPrice,modulesResourcesPrice:this.summaryComponent.modulesResourcesPrice,provideBasicResources:this.summaryComponent.provideBasicResources,provideAllResources:this.summaryComponent.provideAllResources,isHeadquarters:this.summaryComponent.isHq,config:this.getModuleConfig()},this.layoutService.saveLayout(this.layout),this.messages.push({type:be.success,content:`<strong>${e}</strong> successfully saved.`}))})}saveLayout(){this.layout&&this.layout.name?(this.layout.config=this.getModuleConfig(),this.layout.resourcesPrice=this.summaryComponent.resourcesPrice,this.layout.productsPrice=this.summaryComponent.productsPrice,this.layout.modulesResourcesPrice=this.summaryComponent.modulesResourcesPrice,this.layout.provideBasicResources=this.summaryComponent.provideBasicResources,this.layout.provideAllResources=this.summaryComponent.provideAllResources,this.layout.isHeadquarters=this.summaryComponent.isHq,this.layoutService.saveLayout(this.layout),this.messages.push({type:be.success,content:`<strong>${this.layout.name}</strong> successfully saved.`})):this.saveLayoutAs()}newLayout(){this.layout={name:null,config:[{moduleId:"",count:1}]},this.loadLayoutInternal(this.layout)}loadLayout(){this.modal.open(_e).result.then(e=>{if(e){const t=this.layoutService.getLayout(e.layoutName);if(t)if(e.type==ge.load)this.layout=t,this.loadLayoutInternal(t);else if(e.type==ge.add){const e=this.modules.concat([]);this.getModules(t.config).forEach(t=>{const o=e.find(e=>e.moduleId==t.moduleId);null==o?e.push(t):o.count+=t.count}),this.modules=e}}})}loadLayoutInternal(e){this.modules=this.getModules(e.config),this.summaryComponent.productsPrice=null==e.productsPrice?50:e.productsPrice,this.summaryComponent.modulesResourcesPrice=null==e.modulesResourcesPrice?50:e.modulesResourcesPrice,this.summaryComponent.resourcesPrice=null==e.resourcesPrice?50:e.resourcesPrice,this.summaryComponent.provideBasicResources=e.provideBasicResources,this.summaryComponent.provideAllResources=e.provideAllResources,this.summaryComponent.isHq=e.isHeadquarters}getModuleConfig(){return this.modules.map(e=>({moduleId:e.moduleId,count:e.count}))}getModules(e){return e.map(e=>new Se(this.wareService,this.moduleService,e.moduleId,e.count))}}return e.\u0275fac=function(t){return new(t||e)(i.Pb(ee.c),i.Pb(de.a),i.Pb(le),i.Pb(Ct.c),i.Pb(pe.a),i.Pb(ce.a))},e.\u0275cmp=i.Jb({type:e,selectors:[["app-station-calculator"]],viewQuery:function(e,t){if(1&e&&(i.Ic(_t,3),i.Ic(jt,1)),2&e){let e;i.vc(e=i.ic())&&(t.summaryComponent=e.first),i.vc(e=i.ic())&&(t.components=e)}},features:[i.zb],decls:51,vars:6,consts:function(){let e,t,o,i,n,r,s,c;return e=$localize`:@@newLayout␟d81f00c85d3b507f3e3d78bfc617a2c66e028391␟5280218112746407598:New`,t=$localize`:@@save␟52c9a103b812f258bcddc3d90a6e3f46871d25fe␟3768927257183755959:Save`,o=$localize`:@@saveAs␟f66cea314d7187ef5537d0509308d585f17e35b2␟2939714947607368087:Save As`,i=$localize`:@@load␟8d7fb36ea2bff6fd8a53c1676d45e63ab624ad16␟9131913350495870905:Load`,n=$localize`:@@share␟0bd8b27f60a1f098a53e06328426d818e3508ff9␟7419704019640008953:Share`,r=$localize`:@@stationResources␟bc00e11a84862a27908d979767db65037ae21c85␟5419514625105285324:Station Resources`,s=$localize`:@@stationSummary␟d9e2fdc810ccea9a7b3aa8808ea989b83dc6c241␟7444405062965257311:Station Summary`,c=$localize`:@@stationModules␟d2ac665afaeba38e930d32fd4af6e10aebdc6bb7␟9207116553076891214:Station Modules`,[[1,"row","content-row"],[1,"col-md-12"],[1,"card","shadow"],[1,"card-header","shadow-sm"],["type","button",1,"btn","btn-sm","btn-info",3,"click"],[1,"fa","fa-file"],e,["type","button",1,"btn","btn-sm","btn-primary",3,"click"],[1,"fa","fa-save"],t,o,[1,"fa","fa-folder-open"],i,["type","button",1,"btn","btn-sm","btn-secondary",3,"click"],[1,"fa","fa-share-square"],n,[1,"card-body"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-4","col-sm-12"],[1,"card-title"],[4,"ngIf"],["class","text-primary",4,"ngIf"],[3,"modules","change"],r,[3,"modules"],["stationResources",""],s,["stationSummary",""],[1,"col"],[3,"messages"],c,[1,"text-primary"]]},template:function(e,t){1&e&&(i.Ub(0,"div",0),i.Ub(1,"div",1),i.Ub(2,"div",2),i.Ub(3,"div",3),i.Ub(4,"button",4),i.hc("click",function(){return t.newLayout()}),i.Qb(5,"i",5),i.Ec(6,"\xa0"),i.Ub(7,"span"),i.Yb(8,6),i.Tb(),i.Tb(),i.Ec(9,"\xa0 "),i.Ub(10,"button",7),i.hc("click",function(){return t.saveLayout()}),i.Qb(11,"i",8),i.Ec(12,"\xa0"),i.Ub(13,"span"),i.Yb(14,9),i.Tb(),i.Tb(),i.Ec(15,"\xa0 "),i.Ub(16,"button",7),i.hc("click",function(){return t.saveLayoutAs()}),i.Qb(17,"i",8),i.Ec(18,"\xa0"),i.Ub(19,"span"),i.Yb(20,10),i.Tb(),i.Tb(),i.Ec(21,"\xa0 "),i.Ub(22,"button",4),i.hc("click",function(){return t.loadLayout()}),i.Qb(23,"i",11),i.Ec(24,"\xa0"),i.Ub(25,"span"),i.Yb(26,12),i.Tb(),i.Tb(),i.Ec(27,"\xa0 "),i.Ub(28,"button",13),i.hc("click",function(){return t.shareLayout()}),i.Qb(29,"i",14),i.Ec(30,"\xa0"),i.Ub(31,"span"),i.Yb(32,15),i.Tb(),i.Tb(),i.Tb(),i.Ub(33,"div",16),i.Cc(34,Wt,3,1,"div",17),i.Ub(35,"div",18),i.Ub(36,"div",19),i.Ub(37,"h6",20),i.Cc(38,Yt,2,0,"span",21),i.Cc(39,Bt,2,1,"span",22),i.Tb(),i.Ub(40,"app-station-modules",23),i.hc("change",function(){return t.onChange()}),i.Tb(),i.Tb(),i.Ub(41,"div",19),i.Ub(42,"h6",20),i.Yb(43,24),i.Tb(),i.Qb(44,"app-station-resources",25,26),i.Tb(),i.Ub(46,"div",19),i.Ub(47,"h6",20),i.Yb(48,27),i.Tb(),i.Qb(49,"app-station-summary",25,28),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Tb(),i.Tb()),2&e&&(i.Cb(34),i.pc("ngIf",t.messages.length),i.Cb(4),i.pc("ngIf",!t.layout),i.Cb(1),i.pc("ngIf",t.layout),i.Cb(1),i.pc("modules",t.modules),i.Cb(4),i.pc("modules",t.modules),i.Cb(5),i.pc("modules",t.modules))},directives:[n.l,Et,$t,_t,Ft],encapsulation:2}),e})(),Gt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({imports:[[de.f.forChild([{path:"",component:Nt}])],de.f]}),e})(),Ht=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.Nb({type:e}),e.\u0275inj=i.Mb({providers:[le],imports:[[ee.d,n.b,Z.c,te.a,Gt,J]]}),e})()}}]);